{
	"library": {
		"identifier": {
			"id": "OpioidCDS_REC_08",
			"version": "1.1.1"
		},
		"schemaIdentifier": {
			"id": "urn:hl7-org:elm",
			"version": "r1"
		},
		"usings": {
			"def": [
				{
					"localIdentifier": "System",
					"uri": "urn:hl7-org:elm-types:r1"
				},
				{
					"localId": "1",
					"locator": "3:1-3:26",
					"localIdentifier": "FHIR",
					"uri": "http://hl7.org/fhir",
					"version": "3.0.0"
				}
			]
		},
		"includes": {
			"def": [
				{
					"localId": "2",
					"locator": "5:1-5:54",
					"localIdentifier": "FHIRHelpers",
					"path": "FHIRHelpers",
					"version": "3.0.0"
				},
				{
					"localId": "3",
					"locator": "6:1-6:54",
					"localIdentifier": "Common",
					"path": "OpioidCDS_Common",
					"version": "1.1.1"
				}
			]
		},
		"parameters": {
			"def": [
				{
					"localId": "6",
					"locator": "43:1-43:54",
					"name": "ContextPrescriptions",
					"accessLevel": "Public",
					"parameterTypeSpecifier": {
						"localId": "5",
						"locator": "43:32-43:54",
						"type": "ListTypeSpecifier",
						"elementType": {
							"localId": "4",
							"locator": "43:37-43:53",
							"name": "{http://hl7.org/fhir}MedicationRequest",
							"type": "NamedTypeSpecifier"
						}
					}
				}
			]
		},
		"statements": {
			"def": [
				{
					"locator": "45:1-45:15",
					"name": "Patient",
					"context": "Patient",
					"expression": {
						"type": "SingletonFrom",
						"operand": {
							"locator": "45:1-45:15",
							"dataType": "{http://hl7.org/fhir}Patient",
							"type": "Retrieve"
						}
					}
				},
				{
					"localId": "16",
					"locator": "47:1-51:3",
					"name": "Validate Trigger Event",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "16",
								"s": [
									{
										"value": [
											"define ",
											"\"Validate Trigger Event\"",
											":\n  "
										]
									},
									{
										"r": "15",
										"s": [
											{
												"value": [
													"exists"
												]
											},
											{
												"r": "14",
												"s": [
													{
														"value": [
															"(\n    "
														]
													},
													{
														"r": "14",
														"s": [
															{
																"s": [
																	{
																		"r": "8",
																		"s": [
																			{
																				"r": "7",
																				"s": [
																					{
																						"s": [
																							{
																								"value": [
																									"ContextPrescriptions"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" ",
																					"triggerScript"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n      "
																]
															},
															{
																"r": "13",
																"s": [
																	{
																		"value": [
																			"where "
																		]
																	},
																	{
																		"r": "13",
																		"s": [
																			{
																				"r": "10",
																				"s": [
																					{
																						"r": "9",
																						"s": [
																							{
																								"value": [
																									"triggerScript"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "10",
																						"s": [
																							{
																								"value": [
																									"medication"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" in "
																				]
																			},
																			{
																				"r": "12",
																				"s": [
																					{
																						"r": "11",
																						"s": [
																							{
																								"value": [
																									"Common"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "12",
																						"s": [
																							{
																								"value": [
																									"\"Ambulatory Abuse Potential Opioids\""
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n  )"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "15",
						"locator": "48:3-51:3",
						"type": "Exists",
						"operand": {
							"localId": "14",
							"locator": "48:9-51:3",
							"type": "Query",
							"source": [
								{
									"localId": "8",
									"locator": "49:5-49:38",
									"alias": "triggerScript",
									"expression": {
										"localId": "7",
										"locator": "49:5-49:24",
										"name": "ContextPrescriptions",
										"type": "ParameterRef"
									}
								}
							],
							"relationship": [],
							"where": {
								"localId": "13",
								"locator": "50:7-50:83",
								"type": "InValueSet",
								"code": {
									"name": "ToConcept",
									"libraryName": "FHIRHelpers",
									"type": "FunctionRef",
									"operand": [
										{
											"asType": "{http://hl7.org/fhir}CodeableConcept",
											"type": "As",
											"operand": {
												"localId": "10",
												"locator": "50:13-50:36",
												"path": "medication",
												"scope": "triggerScript",
												"type": "Property"
											}
										}
									]
								},
								"valueset": {
									"localId": "12",
									"locator": "50:41-50:83",
									"name": "Ambulatory Abuse Potential Opioids",
									"libraryName": "Common"
								}
							}
						}
					}
				},
				{
					"localId": "25",
					"locator": "70:1-71:50",
					"name": "On Naloxone",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "25",
								"s": [
									{
										"value": [
											"define ",
											"\"On Naloxone\"",
											":\n  "
										]
									},
									{
										"r": "24",
										"s": [
											{
												"value": [
													"exists"
												]
											},
											{
												"r": "23",
												"s": [
													{
														"value": [
															"( "
														]
													},
													{
														"r": "23",
														"s": [
															{
																"r": "22",
																"s": [
																	{
																		"value": [
																			"Common"
																		]
																	}
																]
															},
															{
																"value": [
																	"."
																]
															},
															{
																"r": "23",
																"s": [
																	{
																		"value": [
																			"\"Active Ambulatory Naloxone Rx\""
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" )"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "24",
						"locator": "71:3-71:50",
						"type": "Exists",
						"operand": {
							"localId": "23",
							"locator": "71:9-71:50",
							"name": "Active Ambulatory Naloxone Rx",
							"libraryName": "Common",
							"type": "ExpressionRef"
						}
					}
				},
				{
					"localId": "30",
					"locator": "63:1-65:38",
					"name": "Exclusion Criteria",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "30",
								"s": [
									{
										"value": [
											"define ",
											"\"Exclusion Criteria\"",
											":\n  "
										]
									},
									{
										"r": "29",
										"s": [
											{
												"r": "26",
												"s": [
													{
														"value": [
															"\"On Naloxone\""
														]
													}
												]
											},
											{
												"value": [
													"\n    or "
												]
											},
											{
												"r": "28",
												"s": [
													{
														"r": "27",
														"s": [
															{
																"value": [
																	"Common"
																]
															}
														]
													},
													{
														"value": [
															"."
														]
													},
													{
														"r": "28",
														"s": [
															{
																"value": [
																	"\"End of Life Assessment\""
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "29",
						"locator": "64:3-65:38",
						"type": "Or",
						"operand": [
							{
								"localId": "26",
								"locator": "64:3-64:15",
								"name": "On Naloxone",
								"type": "ExpressionRef"
							},
							{
								"localId": "28",
								"locator": "65:8-65:38",
								"name": "End of Life Assessment",
								"libraryName": "Common",
								"type": "ExpressionRef"
							}
						]
					}
				},
				{
					"localId": "40",
					"locator": "67:1-68:82",
					"name": "Total MME",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "40",
								"s": [
									{
										"value": [
											"define ",
											"\"Total MME\"",
											":\n  "
										]
									},
									{
										"r": "39",
										"s": [
											{
												"r": "34",
												"s": [
													{
														"value": [
															"Common"
														]
													}
												]
											},
											{
												"value": [
													"."
												]
											},
											{
												"r": "39",
												"s": [
													{
														"value": [
															"TotalMME",
															"("
														]
													},
													{
														"r": "38",
														"s": [
															{
																"r": "36",
																"s": [
																	{
																		"r": "35",
																		"s": [
																			{
																				"value": [
																					"Common"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"."
																		]
																	},
																	{
																		"r": "36",
																		"s": [
																			{
																				"value": [
																					"\"Active Ambulatory Opioid Rx\""
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" union "
																]
															},
															{
																"r": "37",
																"s": [
																	{
																		"value": [
																			"ContextPrescriptions"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															")"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "39",
						"locator": "68:3-68:82",
						"name": "TotalMME",
						"libraryName": "Common",
						"type": "FunctionRef",
						"operand": [
							{
								"localId": "38",
								"locator": "68:19-68:81",
								"type": "Union",
								"operand": [
									{
										"localId": "36",
										"locator": "68:19-68:54",
										"name": "Active Ambulatory Opioid Rx",
										"libraryName": "Common",
										"type": "ExpressionRef"
									},
									{
										"localId": "37",
										"locator": "68:62-68:81",
										"name": "ContextPrescriptions",
										"type": "ParameterRef"
									}
								]
							}
						]
					}
				},
				{
					"localId": "47",
					"locator": "73:1-74:56",
					"name": "On Benzodiazepine",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "47",
								"s": [
									{
										"value": [
											"define ",
											"\"On Benzodiazepine\"",
											":\n  "
										]
									},
									{
										"r": "46",
										"s": [
											{
												"value": [
													"exists"
												]
											},
											{
												"r": "45",
												"s": [
													{
														"value": [
															"( "
														]
													},
													{
														"r": "45",
														"s": [
															{
																"r": "44",
																"s": [
																	{
																		"value": [
																			"Common"
																		]
																	}
																]
															},
															{
																"value": [
																	"."
																]
															},
															{
																"r": "45",
																"s": [
																	{
																		"value": [
																			"\"Active Ambulatory Benzodiazepine Rx\""
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" )"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "46",
						"locator": "74:3-74:56",
						"type": "Exists",
						"operand": {
							"localId": "45",
							"locator": "74:9-74:56",
							"name": "Active Ambulatory Benzodiazepine Rx",
							"libraryName": "Common",
							"type": "ExpressionRef"
						}
					}
				},
				{
					"localId": "52",
					"locator": "76:1-77:50",
					"name": "Has Substance Abuse History",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "52",
								"s": [
									{
										"value": [
											"define ",
											"\"Has Substance Abuse History\"",
											":\n  "
										]
									},
									{
										"r": "51",
										"s": [
											{
												"value": [
													"exists "
												]
											},
											{
												"r": "50",
												"s": [
													{
														"value": [
															"( "
														]
													},
													{
														"r": "50",
														"s": [
															{
																"value": [
																	"[",
																	"Condition",
																	": "
																]
															},
															{
																"s": [
																	{
																		"value": [
																			"Common",
																			".",
																			"\"Substance Abuse\""
																		]
																	}
																]
															},
															{
																"value": [
																	"]"
																]
															}
														]
													},
													{
														"value": [
															" )"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "51",
						"locator": "77:3-77:50",
						"type": "Exists",
						"operand": {
							"localId": "50",
							"locator": "77:10-77:50",
							"dataType": "{http://hl7.org/fhir}Condition",
							"codeProperty": "code",
							"type": "Retrieve",
							"codes": {
								"locator": "77:24-77:47",
								"name": "Substance Abuse",
								"libraryName": "Common",
								"type": "ValueSetRef"
							}
						}
					}
				},
				{
					"localId": "56",
					"locator": "53:1-61:5",
					"name": "Inclusion Criteria",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "56",
								"s": [
									{
										"value": [
											"define ",
											"\"Inclusion Criteria\"",
											":\n  "
										]
									},
									{
										"r": "55",
										"s": [
											{
												"r": "33",
												"s": [
													{
														"r": "21",
														"s": [
															{
																"r": "19",
																"s": [
																	{
																		"r": "17",
																		"s": [
																			{
																				"value": [
																					"AgeInYears",
																					"()"
																				]
																			}
																		]
																	},
																	{
																		"r": "18",
																		"value": [
																			" ",
																			">=",
																			" ",
																			"18"
																		]
																	}
																]
															},
															{
																"value": [
																	"\n    and "
																]
															},
															{
																"r": "20",
																"s": [
																	{
																		"value": [
																			"\"Validate Trigger Event\""
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    and "
														]
													},
													{
														"r": "32",
														"s": [
															{
																"value": [
																	"not "
																]
															},
															{
																"r": "31",
																"s": [
																	{
																		"value": [
																			"\"Exclusion Criteria\""
																		]
																	}
																]
															}
														]
													}
												]
											},
											{
												"value": [
													"\n    and "
												]
											},
											{
												"r": "54",
												"s": [
													{
														"value": [
															"(\n      "
														]
													},
													{
														"r": "54",
														"s": [
															{
																"r": "49",
																"s": [
																	{
																		"r": "43",
																		"s": [
																			{
																				"r": "41",
																				"s": [
																					{
																						"value": [
																							"\"Total MME\""
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" ",
																					">=",
																					" "
																				]
																			},
																			{
																				"r": "42",
																				"s": [
																					{
																						"value": [
																							"50 ",
																							"'mg/d'"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"\n        or "
																		]
																	},
																	{
																		"r": "48",
																		"s": [
																			{
																				"value": [
																					"\"On Benzodiazepine\""
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        or "
																]
															},
															{
																"r": "53",
																"s": [
																	{
																		"value": [
																			"\"Has Substance Abuse History\""
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    )"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "55",
						"locator": "54:3-61:5",
						"type": "And",
						"operand": [
							{
								"localId": "33",
								"locator": "54:3-56:32",
								"type": "And",
								"operand": [
									{
										"localId": "21",
										"locator": "54:3-55:32",
										"type": "And",
										"operand": [
											{
												"localId": "19",
												"locator": "54:3-54:20",
												"type": "GreaterOrEqual",
												"operand": [
													{
														"localId": "17",
														"locator": "54:3-54:14",
														"precision": "Year",
														"type": "CalculateAge",
														"operand": {
															"path": "birthDate.value",
															"type": "Property",
															"source": {
																"name": "Patient",
																"type": "ExpressionRef"
															}
														}
													},
													{
														"localId": "18",
														"locator": "54:19-54:20",
														"valueType": "{urn:hl7-org:elm-types:r1}Integer",
														"value": "18",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "20",
												"locator": "55:9-55:32",
												"name": "Validate Trigger Event",
												"type": "ExpressionRef"
											}
										]
									},
									{
										"localId": "32",
										"locator": "56:9-56:32",
										"type": "Not",
										"operand": {
											"localId": "31",
											"locator": "56:13-56:32",
											"name": "Exclusion Criteria",
											"type": "ExpressionRef"
										}
									}
								]
							},
							{
								"localId": "54",
								"locator": "57:9-61:5",
								"type": "Or",
								"operand": [
									{
										"localId": "49",
										"locator": "58:7-59:30",
										"type": "Or",
										"operand": [
											{
												"localId": "43",
												"locator": "58:7-58:30",
												"type": "GreaterOrEqual",
												"operand": [
													{
														"localId": "41",
														"locator": "58:7-58:17",
														"name": "Total MME",
														"type": "ExpressionRef"
													},
													{
														"localId": "42",
														"locator": "58:22-58:30",
														"value": 50,
														"unit": "mg/d",
														"type": "Quantity"
													}
												]
											},
											{
												"localId": "48",
												"locator": "59:12-59:30",
												"name": "On Benzodiazepine",
												"type": "ExpressionRef"
											}
										]
									},
									{
										"localId": "53",
										"locator": "60:12-60:40",
										"name": "Has Substance Abuse History",
										"type": "ExpressionRef"
									}
								]
							}
						]
					}
				},
				{
					"localId": "61",
					"locator": "79:1-82:11",
					"name": "Get Indicator",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "61",
								"s": [
									{
										"value": [
											"define ",
											"\"Get Indicator\"",
											":\n  "
										]
									},
									{
										"r": "60",
										"s": [
											{
												"value": [
													"if "
												]
											},
											{
												"r": "57",
												"s": [
													{
														"value": [
															"\"Inclusion Criteria\""
														]
													}
												]
											},
											{
												"value": [
													"\n    then "
												]
											},
											{
												"r": "58",
												"s": [
													{
														"value": [
															"'warning'"
														]
													}
												]
											},
											{
												"r": "59",
												"value": [
													"\n  else ",
													"null"
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "60",
						"locator": "80:3-82:11",
						"type": "If",
						"condition": {
							"asType": "{urn:hl7-org:elm-types:r1}Boolean",
							"type": "As",
							"operand": {
								"localId": "57",
								"locator": "80:6-80:25",
								"name": "Inclusion Criteria",
								"type": "ExpressionRef"
							}
						},
						"then": {
							"localId": "58",
							"locator": "81:10-81:18",
							"valueType": "{urn:hl7-org:elm-types:r1}String",
							"value": "warning",
							"type": "Literal"
						},
						"else": {
							"asType": "{urn:hl7-org:elm-types:r1}String",
							"type": "As",
							"operand": {
								"localId": "59",
								"locator": "82:8-82:11",
								"type": "Null"
							}
						}
					}
				},
				{
					"localId": "66",
					"locator": "84:1-87:11",
					"name": "Get Summary",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "66",
								"s": [
									{
										"value": [
											"define ",
											"\"Get Summary\"",
											":\n  "
										]
									},
									{
										"r": "65",
										"s": [
											{
												"value": [
													"if "
												]
											},
											{
												"r": "62",
												"s": [
													{
														"value": [
															"\"Inclusion Criteria\""
														]
													}
												]
											},
											{
												"value": [
													"\n    then "
												]
											},
											{
												"r": "63",
												"s": [
													{
														"value": [
															"'Incorporate into the management plan strategies to mitigate risk; including considering offering naloxone when factors that increase risk for opioid overdose are present'"
														]
													}
												]
											},
											{
												"r": "64",
												"value": [
													"\n  else ",
													"null"
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "65",
						"locator": "85:3-87:11",
						"type": "If",
						"condition": {
							"asType": "{urn:hl7-org:elm-types:r1}Boolean",
							"type": "As",
							"operand": {
								"localId": "62",
								"locator": "85:6-85:25",
								"name": "Inclusion Criteria",
								"type": "ExpressionRef"
							}
						},
						"then": {
							"localId": "63",
							"locator": "86:10-86:180",
							"valueType": "{urn:hl7-org:elm-types:r1}String",
							"value": "Incorporate into the management plan strategies to mitigate risk; including considering offering naloxone when factors that increase risk for opioid overdose are present",
							"type": "Literal"
						},
						"else": {
							"asType": "{urn:hl7-org:elm-types:r1}String",
							"type": "As",
							"operand": {
								"localId": "64",
								"locator": "87:8-87:11",
								"type": "Null"
							}
						}
					}
				},
				{
					"localId": "84",
					"locator": "89:1-94:3",
					"name": "Detail Descriptions",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "84",
								"s": [
									{
										"value": [
											"define ",
											"\"Detail Descriptions\"",
											":\n\t"
										]
									},
									{
										"r": "83",
										"s": [
											{
												"value": [
													"{\n    "
												]
											},
											{
												"r": "76",
												"s": [
													{
														"value": [
															"{ "
														]
													},
													{
														"s": [
															{
																"value": [
																	"hasCondition",
																	": "
																]
															},
															{
																"r": "69",
																"s": [
																	{
																		"r": "67",
																		"s": [
																			{
																				"value": [
																					"\"Total MME\""
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			">=",
																			" "
																		]
																	},
																	{
																		"r": "68",
																		"s": [
																			{
																				"value": [
																					"50 ",
																					"'mg/day'"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															", "
														]
													},
													{
														"s": [
															{
																"value": [
																	"text",
																	": "
																]
															},
															{
																"r": "75",
																"s": [
																	{
																		"r": "73",
																		"s": [
																			{
																				"r": "70",
																				"s": [
																					{
																						"value": [
																							"'Average MME ('"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" + "
																				]
																			},
																			{
																				"r": "72",
																				"s": [
																					{
																						"value": [
																							"ToString",
																							"("
																						]
																					},
																					{
																						"r": "71",
																						"s": [
																							{
																								"value": [
																									"\"Total MME\""
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" + "
																		]
																	},
																	{
																		"r": "74",
																		"s": [
																			{
																				"value": [
																					"') >= 50 mg/day'"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" }"
														]
													}
												]
											},
											{
												"value": [
													",\n    "
												]
											},
											{
												"r": "79",
												"s": [
													{
														"value": [
															"{ "
														]
													},
													{
														"s": [
															{
																"value": [
																	"hasCondition",
																	": "
																]
															},
															{
																"r": "77",
																"s": [
																	{
																		"value": [
																			"\"On Benzodiazepine\""
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															", "
														]
													},
													{
														"s": [
															{
																"value": [
																	"text",
																	": "
																]
															},
															{
																"r": "78",
																"s": [
																	{
																		"value": [
																			"'concurrent use of benzodiazepine'"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"}"
														]
													}
												]
											},
											{
												"value": [
													",\n    "
												]
											},
											{
												"r": "82",
												"s": [
													{
														"value": [
															"{ "
														]
													},
													{
														"s": [
															{
																"value": [
																	"hasCondition",
																	": "
																]
															},
															{
																"r": "80",
																"s": [
																	{
																		"value": [
																			"\"Has Substance Abuse History\""
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															", "
														]
													},
													{
														"s": [
															{
																"value": [
																	"text",
																	": "
																]
															},
															{
																"r": "81",
																"s": [
																	{
																		"value": [
																			"'history of alcohol or drug abuse'"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" }"
														]
													}
												]
											},
											{
												"value": [
													"\n  }"
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "83",
						"locator": "90:2-94:3",
						"type": "List",
						"element": [
							{
								"localId": "76",
								"locator": "91:5-91:114",
								"type": "Tuple",
								"element": [
									{
										"name": "hasCondition",
										"value": {
											"localId": "69",
											"locator": "91:21-91:46",
											"type": "GreaterOrEqual",
											"operand": [
												{
													"localId": "67",
													"locator": "91:21-91:31",
													"name": "Total MME",
													"type": "ExpressionRef"
												},
												{
													"localId": "68",
													"locator": "91:36-91:46",
													"value": 50,
													"unit": "mg/day",
													"type": "Quantity"
												}
											]
										}
									},
									{
										"name": "text",
										"value": {
											"localId": "75",
											"locator": "91:55-91:112",
											"type": "Concatenate",
											"operand": [
												{
													"localId": "73",
													"locator": "91:55-91:93",
													"type": "Concatenate",
													"operand": [
														{
															"localId": "70",
															"locator": "91:55-91:69",
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": "Average MME (",
															"type": "Literal"
														},
														{
															"localId": "72",
															"locator": "91:73-91:93",
															"type": "ToString",
															"operand": {
																"localId": "71",
																"locator": "91:82-91:92",
																"name": "Total MME",
																"type": "ExpressionRef"
															}
														}
													]
												},
												{
													"localId": "74",
													"locator": "91:97-91:112",
													"valueType": "{urn:hl7-org:elm-types:r1}String",
													"value": ") >= 50 mg/day",
													"type": "Literal"
												}
											]
										}
									}
								]
							},
							{
								"localId": "79",
								"locator": "92:5-92:82",
								"type": "Tuple",
								"element": [
									{
										"name": "hasCondition",
										"value": {
											"localId": "77",
											"locator": "92:21-92:39",
											"name": "On Benzodiazepine",
											"type": "ExpressionRef"
										}
									},
									{
										"name": "text",
										"value": {
											"localId": "78",
											"locator": "92:48-92:81",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "concurrent use of benzodiazepine",
											"type": "Literal"
										}
									}
								]
							},
							{
								"localId": "82",
								"locator": "93:5-93:93",
								"type": "Tuple",
								"element": [
									{
										"name": "hasCondition",
										"value": {
											"localId": "80",
											"locator": "93:21-93:49",
											"name": "Has Substance Abuse History",
											"type": "ExpressionRef"
										}
									},
									{
										"name": "text",
										"value": {
											"localId": "81",
											"locator": "93:58-93:91",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "history of alcohol or drug abuse",
											"type": "Literal"
										}
									}
								]
							}
						]
					}
				},
				{
					"localId": "95",
					"locator": "96:1-97:77",
					"name": "Detail List",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "95",
								"s": [
									{
										"value": [
											"define ",
											"\"Detail List\"",
											":\n\t"
										]
									},
									{
										"r": "94",
										"s": [
											{
												"value": [
													"Combine",
													"("
												]
											},
											{
												"r": "92",
												"s": [
													{
														"s": [
															{
																"r": "86",
																"s": [
																	{
																		"r": "85",
																		"s": [
																			{
																				"s": [
																					{
																						"value": [
																							"\"Detail Descriptions\""
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"dd"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" "
														]
													},
													{
														"r": "88",
														"s": [
															{
																"value": [
																	"where "
																]
															},
															{
																"r": "88",
																"s": [
																	{
																		"r": "87",
																		"s": [
																			{
																				"value": [
																					"dd"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"."
																		]
																	},
																	{
																		"r": "88",
																		"s": [
																			{
																				"value": [
																					"hasCondition"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" "
														]
													},
													{
														"r": "91",
														"s": [
															{
																"value": [
																	"return "
																]
															},
															{
																"r": "90",
																"s": [
																	{
																		"r": "89",
																		"s": [
																			{
																				"value": [
																					"dd"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"."
																		]
																	},
																	{
																		"r": "90",
																		"s": [
																			{
																				"value": [
																					"text"
																				]
																			}
																		]
																	}
																]
															}
														]
													}
												]
											},
											{
												"value": [
													", "
												]
											},
											{
												"r": "93",
												"s": [
													{
														"value": [
															"', '"
														]
													}
												]
											},
											{
												"value": [
													")"
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "94",
						"locator": "97:2-97:77",
						"type": "Combine",
						"source": {
							"localId": "92",
							"locator": "97:10-97:70",
							"type": "Query",
							"source": [
								{
									"localId": "86",
									"locator": "97:10-97:33",
									"alias": "dd",
									"expression": {
										"localId": "85",
										"locator": "97:10-97:30",
										"name": "Detail Descriptions",
										"type": "ExpressionRef"
									}
								}
							],
							"relationship": [],
							"where": {
								"localId": "88",
								"locator": "97:35-97:55",
								"path": "hasCondition",
								"scope": "dd",
								"type": "Property"
							},
							"return": {
								"localId": "91",
								"locator": "97:57-97:70",
								"expression": {
									"localId": "90",
									"locator": "97:64-97:70",
									"path": "text",
									"scope": "dd",
									"type": "Property"
								}
							}
						},
						"separator": {
							"localId": "93",
							"locator": "97:73-97:76",
							"valueType": "{urn:hl7-org:elm-types:r1}String",
							"value": ", ",
							"type": "Literal"
						}
					}
				},
				{
					"localId": "112",
					"locator": "99:1-106:11",
					"name": "Get Detail",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "112",
								"s": [
									{
										"value": [
											"define ",
											"\"Get Detail\"",
											":\n  "
										]
									},
									{
										"r": "111",
										"s": [
											{
												"value": [
													"if "
												]
											},
											{
												"r": "96",
												"s": [
													{
														"value": [
															"\"Inclusion Criteria\""
														]
													}
												]
											},
											{
												"value": [
													"\n    then\n      "
												]
											},
											{
												"r": "109",
												"s": [
													{
														"r": "97",
														"s": [
															{
																"value": [
																	"'Consider offering naloxone given following risk factor(s) for opioid overdose: '"
																]
															}
														]
													},
													{
														"value": [
															"\n        + "
														]
													},
													{
														"r": "108",
														"s": [
															{
																"value": [
																	"if "
																]
															},
															{
																"r": "103",
																"s": [
																	{
																		"r": "99",
																		"s": [
																			{
																				"r": "98",
																				"s": [
																					{
																						"value": [
																							"\"Detail List\""
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" is not null"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" and "
																		]
																	},
																	{
																		"r": "102",
																		"s": [
																			{
																				"r": "100",
																				"s": [
																					{
																						"value": [
																							"\"Detail List\""
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" ",
																					"!=",
																					" "
																				]
																			},
																			{
																				"r": "101",
																				"s": [
																					{
																						"value": [
																							"''"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n         then "
																]
															},
															{
																"r": "106",
																"s": [
																	{
																		"r": "104",
																		"s": [
																			{
																				"value": [
																					"\"Detail List\""
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" + "
																		]
																	},
																	{
																		"r": "105",
																		"s": [
																			{
																				"value": [
																					"'.'"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        else "
																]
															},
															{
																"r": "107",
																"s": [
																	{
																		"value": [
																			"'N/A.'"
																		]
																	}
																]
															}
														]
													}
												]
											},
											{
												"r": "110",
												"value": [
													"\n  else ",
													"null"
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "111",
						"locator": "100:3-106:11",
						"type": "If",
						"condition": {
							"asType": "{urn:hl7-org:elm-types:r1}Boolean",
							"type": "As",
							"operand": {
								"localId": "96",
								"locator": "100:6-100:25",
								"name": "Inclusion Criteria",
								"type": "ExpressionRef"
							}
						},
						"then": {
							"localId": "109",
							"locator": "102:7-105:19",
							"type": "Concatenate",
							"operand": [
								{
									"localId": "97",
									"locator": "102:7-102:87",
									"valueType": "{urn:hl7-org:elm-types:r1}String",
									"value": "Consider offering naloxone given following risk factor(s) for opioid overdose: ",
									"type": "Literal"
								},
								{
									"localId": "108",
									"locator": "103:11-105:19",
									"type": "If",
									"condition": {
										"asType": "{urn:hl7-org:elm-types:r1}Boolean",
										"type": "As",
										"operand": {
											"localId": "103",
											"locator": "103:14-103:62",
											"type": "And",
											"operand": [
												{
													"localId": "99",
													"locator": "103:14-103:38",
													"type": "Not",
													"operand": {
														"locator": "103:14-103:38",
														"type": "IsNull",
														"operand": {
															"localId": "98",
															"locator": "103:14-103:26",
															"name": "Detail List",
															"type": "ExpressionRef"
														}
													}
												},
												{
													"localId": "102",
													"locator": "103:44-103:62",
													"type": "Not",
													"operand": {
														"locator": "103:44-103:62",
														"type": "Equal",
														"operand": [
															{
																"localId": "100",
																"locator": "103:44-103:56",
																"name": "Detail List",
																"type": "ExpressionRef"
															},
															{
																"localId": "101",
																"locator": "103:61-103:62",
																"valueType": "{urn:hl7-org:elm-types:r1}String",
																"value": "",
																"type": "Literal"
															}
														]
													}
												}
											]
										}
									},
									"then": {
										"localId": "106",
										"locator": "104:15-104:33",
										"type": "Concatenate",
										"operand": [
											{
												"localId": "104",
												"locator": "104:15-104:27",
												"name": "Detail List",
												"type": "ExpressionRef"
											},
											{
												"localId": "105",
												"locator": "104:31-104:33",
												"valueType": "{urn:hl7-org:elm-types:r1}String",
												"value": ".",
												"type": "Literal"
											}
										]
									},
									"else": {
										"localId": "107",
										"locator": "105:14-105:19",
										"valueType": "{urn:hl7-org:elm-types:r1}String",
										"value": "N/A.",
										"type": "Literal"
									}
								}
							]
						},
						"else": {
							"asType": "{urn:hl7-org:elm-types:r1}String",
							"type": "As",
							"operand": {
								"localId": "110",
								"locator": "106:8-106:11",
								"type": "Null"
							}
						}
					}
				}
			]
		}
	}
}