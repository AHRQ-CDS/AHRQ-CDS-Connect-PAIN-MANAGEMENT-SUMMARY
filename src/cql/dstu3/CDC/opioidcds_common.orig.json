{
	"library": {
		"identifier": {
			"id": "OpioidCDS_Common",
			"version": "1.1.1"
		},
		"schemaIdentifier": {
			"id": "urn:hl7-org:elm",
			"version": "r1"
		},
		"usings": {
			"def": [
				{
					"localIdentifier": "System",
					"uri": "urn:hl7-org:elm-types:r1"
				},
				{
					"localId": "1",
					"locator": "3:1-3:26",
					"localIdentifier": "FHIR",
					"uri": "http://hl7.org/fhir",
					"version": "3.0.0"
				}
			]
		},
		"includes": {
			"def": [
				{
					"localId": "2",
					"locator": "5:1-5:54",
					"localIdentifier": "FHIRHelpers",
					"path": "FHIRHelpers",
					"version": "3.0.0"
				},
				{
					"localId": "3",
					"locator": "6:1-6:53",
					"localIdentifier": "OMTKLogic",
					"path": "OMTKLogicCQL",
					"version": "1.1.1"
				}
			]
		},
		"codeSystems": {
			"def": [
				{
					"localId": "4",
					"locator": "8:1-8:45",
					"name": "SNOMED",
					"id": "http://snomed.info/sct",
					"accessLevel": "Public"
				},
				{
					"localId": "5",
					"locator": "9:1-9:97",
					"name": "Medication Request Category Codes",
					"id": "http://hl7.org/fhir/medication-request-category",
					"accessLevel": "Public"
				}
			]
		},
		"valueSets": {
			"def": [
				{
					"localId": "6",
					"locator": "11:1-11:92",
					"name": "Benzodiazepines",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/benzodiazepines",
					"accessLevel": "Public"
				},
				{
					"localId": "7",
					"locator": "13:1-13:106",
					"name": "End of Life Conditions",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/end-of-life-conditions",
					"accessLevel": "Public"
				},
				{
					"localId": "8",
					"locator": "17:1-17:100",
					"name": "Hospice Disposition",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/hospice-disposition",
					"accessLevel": "Public"
				},
				{
					"localId": "9",
					"locator": "18:1-18:98",
					"name": "Hospice Finding Codes",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/hospice-finding",
					"accessLevel": "Public"
				},
				{
					"localId": "10",
					"locator": "19:1-19:102",
					"name": "Hospice Procedure Codes",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/hospice-procedure",
					"accessLevel": "Public"
				},
				{
					"localId": "11",
					"locator": "20:1-20:112",
					"name": "Illicit Drug Screening",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/illicit-drug-urine-screening",
					"accessLevel": "Public"
				},
				{
					"localId": "12",
					"locator": "22:1-22:130",
					"name": "Limited Life Expectancy Conditions",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/limited-life-expectancy-conditions",
					"accessLevel": "Public"
				},
				{
					"localId": "13",
					"locator": "23:1-23:100",
					"name": "Long Acting Opioids",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/long-acting-opioids",
					"accessLevel": "Public"
				},
				{
					"localId": "14",
					"locator": "24:1-24:78",
					"name": "Naloxone",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/naloxone",
					"accessLevel": "Public"
				},
				{
					"localId": "15",
					"locator": "25:1-25:100",
					"name": "Risk Assessment",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/opioid-abuse-assessment",
					"accessLevel": "Public"
				},
				{
					"localId": "16",
					"locator": "26:1-26:105",
					"name": "Opioid Drug Screening",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/opioid-urine-screening",
					"accessLevel": "Public"
				},
				{
					"localId": "17",
					"locator": "27:1-27:129",
					"name": "Ambulatory Abuse Potential Opioids",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/opioids-abused-in-ambulatory-care",
					"accessLevel": "Public"
				},
				{
					"localId": "18",
					"locator": "28:1-28:92",
					"name": "Substance Abuse",
					"id": "http://fhir.org/guides/cdc/opioid-cds/ValueSet/substance-abuse",
					"accessLevel": "Public"
				}
			]
		},
		"codes": {
			"def": [
				{
					"localId": "20",
					"locator": "30:1-30:53",
					"name": "Referral to Hospice",
					"id": "306205009",
					"accessLevel": "Public",
					"codeSystem": {
						"localId": "19",
						"locator": "30:46-30:53",
						"name": "SNOMED"
					}
				},
				{
					"localId": "22",
					"locator": "31:1-31:70",
					"name": "Community",
					"id": "community",
					"accessLevel": "Public",
					"codeSystem": {
						"localId": "21",
						"locator": "31:36-31:70",
						"name": "Medication Request Category Codes"
					}
				}
			]
		},
		"statements": {
			"def": [
				{
					"localId": "24",
					"locator": "34:1-34:29",
					"name": "IsForChronicPain",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "24",
								"s": [
									{
										"r": "23",
										"value": [
											"define ",
											"IsForChronicPain",
											": ",
											"true"
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "23",
						"locator": "34:26-34:29",
						"valueType": "{urn:hl7-org:elm-types:r1}Boolean",
						"value": "true",
						"type": "Literal"
					}
				},
				{
					"localId": "26",
					"locator": "41:1-41:43",
					"name": "IgnoreOutpatientCategorySystem",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "26",
								"s": [
									{
										"r": "25",
										"value": [
											"define ",
											"IgnoreOutpatientCategorySystem",
											": ",
											"true"
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "25",
						"locator": "41:40-41:43",
						"valueType": "{urn:hl7-org:elm-types:r1}Boolean",
						"value": "true",
						"type": "Literal"
					}
				},
				{
					"localId": "34",
					"locator": "43:1-44:25",
					"name": "CodeOnlyEquivalent",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "34",
								"s": [
									{
										"value": [
											"define function ",
											"CodeOnlyEquivalent",
											"(",
											"code1",
											" "
										]
									},
									{
										"r": "27",
										"s": [
											{
												"value": [
													"Code"
												]
											}
										]
									},
									{
										"value": [
											", ",
											"code2",
											" "
										]
									},
									{
										"r": "28",
										"s": [
											{
												"value": [
													"Code"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "33",
										"s": [
											{
												"r": "33",
												"s": [
													{
														"r": "30",
														"s": [
															{
																"r": "29",
																"s": [
																	{
																		"value": [
																			"code1"
																		]
																	}
																]
															},
															{
																"value": [
																	"."
																]
															},
															{
																"r": "30",
																"s": [
																	{
																		"value": [
																			"code"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" ",
															"~",
															" "
														]
													},
													{
														"r": "32",
														"s": [
															{
																"r": "31",
																"s": [
																	{
																		"value": [
																			"code2"
																		]
																	}
																]
															},
															{
																"value": [
																	"."
																]
															},
															{
																"r": "32",
																"s": [
																	{
																		"value": [
																			"code"
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "33",
						"locator": "44:3-44:25",
						"type": "Equivalent",
						"operand": [
							{
								"localId": "30",
								"locator": "44:3-44:12",
								"path": "code",
								"type": "Property",
								"source": {
									"localId": "29",
									"locator": "44:3-44:7",
									"name": "code1",
									"type": "OperandRef"
								}
							},
							{
								"localId": "32",
								"locator": "44:16-44:25",
								"path": "code",
								"type": "Property",
								"source": {
									"localId": "31",
									"locator": "44:16-44:20",
									"name": "code2",
									"type": "OperandRef"
								}
							}
						]
					},
					"operand": [
						{
							"name": "code1",
							"operandTypeSpecifier": {
								"localId": "27",
								"locator": "43:42-43:45",
								"name": "{urn:hl7-org:elm-types:r1}Code",
								"type": "NamedTypeSpecifier"
							}
						},
						{
							"name": "code2",
							"operandTypeSpecifier": {
								"localId": "28",
								"locator": "43:54-43:57",
								"name": "{urn:hl7-org:elm-types:r1}Code",
								"type": "NamedTypeSpecifier"
							}
						}
					]
				},
				{
					"localId": "46",
					"locator": "46:1-49:2",
					"name": "ConceptCodeOnlyEquivalent",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "46",
								"s": [
									{
										"value": [
											"define function ",
											"ConceptCodeOnlyEquivalent",
											"(",
											"concept",
											" "
										]
									},
									{
										"r": "35",
										"s": [
											{
												"value": [
													"Concept"
												]
											}
										]
									},
									{
										"value": [
											", ",
											"code",
											" "
										]
									},
									{
										"r": "36",
										"s": [
											{
												"value": [
													"Code"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "45",
										"s": [
											{
												"r": "45",
												"s": [
													{
														"value": [
															"exists "
														]
													},
													{
														"r": "44",
														"s": [
															{
																"value": [
																	"("
																]
															},
															{
																"r": "44",
																"s": [
																	{
																		"s": [
																			{
																				"r": "38",
																				"s": [
																					{
																						"r": "37",
																						"s": [
																							{
																								"s": [
																									{
																										"value": [
																											"concept",
																											".",
																											"codes"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" ",
																							"C"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"\n\t  "
																		]
																	},
																	{
																		"r": "43",
																		"s": [
																			{
																				"value": [
																					"where "
																				]
																			},
																			{
																				"r": "43",
																				"s": [
																					{
																						"r": "40",
																						"s": [
																							{
																								"r": "39",
																								"s": [
																									{
																										"value": [
																											"C"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "40",
																								"s": [
																									{
																										"value": [
																											"code"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" ",
																							"~",
																							" "
																						]
																					},
																					{
																						"r": "42",
																						"s": [
																							{
																								"r": "41",
																								"s": [
																									{
																										"value": [
																											"code"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "42",
																								"s": [
																									{
																										"value": [
																											"code"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n\t)"
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "45",
						"locator": "47:3-49:2",
						"type": "Exists",
						"operand": {
							"localId": "44",
							"locator": "47:10-49:2",
							"type": "Query",
							"source": [
								{
									"localId": "38",
									"locator": "47:11-47:25",
									"alias": "C",
									"expression": {
										"localId": "37",
										"locator": "47:11-47:23",
										"path": "codes",
										"type": "Property",
										"source": {
											"name": "concept",
											"type": "OperandRef"
										}
									}
								}
							],
							"relationship": [],
							"where": {
								"localId": "43",
								"locator": "48:4-48:27",
								"type": "Equivalent",
								"operand": [
									{
										"localId": "40",
										"locator": "48:10-48:15",
										"path": "code",
										"scope": "C",
										"type": "Property"
									},
									{
										"localId": "42",
										"locator": "48:19-48:27",
										"path": "code",
										"type": "Property",
										"source": {
											"localId": "41",
											"locator": "48:19-48:22",
											"name": "code",
											"type": "OperandRef"
										}
									}
								]
							}
						}
					},
					"operand": [
						{
							"name": "concept",
							"operandTypeSpecifier": {
								"localId": "35",
								"locator": "46:51-46:57",
								"name": "{urn:hl7-org:elm-types:r1}Concept",
								"type": "NamedTypeSpecifier"
							}
						},
						{
							"name": "code",
							"operandTypeSpecifier": {
								"localId": "36",
								"locator": "46:65-46:68",
								"name": "{urn:hl7-org:elm-types:r1}Code",
								"type": "NamedTypeSpecifier"
							}
						}
					]
				},
				{
					"localId": "74",
					"locator": "357:1-362:5",
					"name": "Is Active Ambulatory Medication Request?",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "74",
								"s": [
									{
										"value": [
											"define function ",
											"\"Is Active Ambulatory Medication Request?\"",
											" (",
											"value",
											" "
										]
									},
									{
										"r": "49",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "48",
												"s": [
													{
														"value": [
															"FHIR",
															".",
															"MedicationRequest"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											") returns "
										]
									},
									{
										"r": "51",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "50",
												"s": [
													{
														"value": [
															"FHIR",
															".",
															"MedicationRequest"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											":\n  "
										]
									},
									{
										"r": "73",
										"s": [
											{
												"r": "73",
												"s": [
													{
														"s": [
															{
																"r": "53",
																"s": [
																	{
																		"r": "52",
																		"s": [
																			{
																				"s": [
																					{
																						"value": [
																							"value"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"Rx"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n  "
														]
													},
													{
														"r": "72",
														"s": [
															{
																"value": [
																	"where "
																]
															},
															{
																"r": "72",
																"s": [
																	{
																		"r": "58",
																		"s": [
																			{
																				"r": "56",
																				"s": [
																					{
																						"r": "55",
																						"s": [
																							{
																								"r": "54",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "55",
																								"s": [
																									{
																										"value": [
																											"status"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "56",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" ",
																					"=",
																					" "
																				]
																			},
																			{
																				"r": "57",
																				"s": [
																					{
																						"value": [
																							"'active'"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"\n    and "
																		]
																	},
																	{
																		"r": "71",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "71",
																				"s": [
																					{
																						"r": "64",
																						"s": [
																							{
																								"r": "62",
																								"s": [
																									{
																										"r": "59",
																										"s": [
																											{
																												"value": [
																													"FHIRHelpers"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "62",
																										"s": [
																											{
																												"value": [
																													"ToConcept",
																													"("
																												]
																											},
																											{
																												"r": "61",
																												"s": [
																													{
																														"r": "60",
																														"s": [
																															{
																																"value": [
																																	"Rx"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "61",
																														"s": [
																															{
																																"value": [
																																	"category"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													")"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" ",
																									"~",
																									" "
																								]
																							},
																							{
																								"r": "63",
																								"s": [
																									{
																										"value": [
																											"\"Community\""
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"\n      or "
																						]
																					},
																					{
																						"r": "70",
																						"s": [
																							{
																								"value": [
																									"("
																								]
																							},
																							{
																								"r": "70",
																								"s": [
																									{
																										"r": "65",
																										"s": [
																											{
																												"value": [
																													"IgnoreOutpatientCategorySystem"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" and "
																										]
																									},
																									{
																										"r": "69",
																										"s": [
																											{
																												"value": [
																													"ConceptCodeOnlyEquivalent",
																													"("
																												]
																											},
																											{
																												"r": "67",
																												"s": [
																													{
																														"r": "66",
																														"s": [
																															{
																																"value": [
																																	"Rx"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "67",
																														"s": [
																															{
																																"value": [
																																	"category"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													", "
																												]
																											},
																											{
																												"r": "68",
																												"s": [
																													{
																														"value": [
																															"\"Community\""
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													")"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"\n    )"
																				]
																			}
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "73",
						"locator": "358:3-362:5",
						"type": "Query",
						"source": [
							{
								"localId": "53",
								"locator": "358:3-358:10",
								"alias": "Rx",
								"expression": {
									"localId": "52",
									"locator": "358:3-358:7",
									"name": "value",
									"type": "OperandRef"
								}
							}
						],
						"relationship": [],
						"where": {
							"localId": "72",
							"locator": "359:3-362:5",
							"type": "And",
							"operand": [
								{
									"localId": "58",
									"locator": "359:9-359:34",
									"type": "Equal",
									"operand": [
										{
											"localId": "56",
											"locator": "359:9-359:23",
											"path": "value",
											"type": "Property",
											"source": {
												"localId": "55",
												"locator": "359:9-359:17",
												"path": "status",
												"scope": "Rx",
												"type": "Property"
											}
										},
										{
											"localId": "57",
											"locator": "359:27-359:34",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "active",
											"type": "Literal"
										}
									]
								},
								{
									"localId": "71",
									"locator": "360:9-362:5",
									"type": "Or",
									"operand": [
										{
											"localId": "64",
											"locator": "360:10-360:57",
											"type": "Equivalent",
											"operand": [
												{
													"localId": "62",
													"locator": "360:10-360:43",
													"name": "ToConcept",
													"libraryName": "FHIRHelpers",
													"type": "FunctionRef",
													"operand": [
														{
															"localId": "61",
															"locator": "360:32-360:42",
															"path": "category",
															"scope": "Rx",
															"type": "Property"
														}
													]
												},
												{
													"type": "ToConcept",
													"operand": {
														"localId": "63",
														"locator": "360:47-360:57",
														"name": "Community",
														"type": "CodeRef"
													}
												}
											]
										},
										{
											"localId": "70",
											"locator": "361:10-361:97",
											"type": "And",
											"operand": [
												{
													"localId": "65",
													"locator": "361:11-361:40",
													"name": "IgnoreOutpatientCategorySystem",
													"type": "ExpressionRef"
												},
												{
													"localId": "69",
													"locator": "361:46-361:96",
													"name": "ConceptCodeOnlyEquivalent",
													"type": "FunctionRef",
													"operand": [
														{
															"name": "ToConcept",
															"libraryName": "FHIRHelpers",
															"type": "FunctionRef",
															"operand": [
																{
																	"localId": "67",
																	"locator": "361:72-361:82",
																	"path": "category",
																	"scope": "Rx",
																	"type": "Property"
																}
															]
														},
														{
															"localId": "68",
															"locator": "361:85-361:95",
															"name": "Community",
															"type": "CodeRef"
														}
													]
												}
											]
										}
									]
								}
							]
						}
					},
					"operand": [
						{
							"name": "value",
							"operandTypeSpecifier": {
								"localId": "49",
								"locator": "357:67-357:94",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "48",
									"locator": "357:72-357:93",
									"name": "{http://hl7.org/fhir}MedicationRequest",
									"type": "NamedTypeSpecifier"
								}
							}
						}
					]
				},
				{
					"localId": "124",
					"locator": "51:1-74:5",
					"name": "Active Ambulatory Opioid Rx",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "124",
								"s": [
									{
										"value": [
											"define ",
											"\"Active Ambulatory Opioid Rx\"",
											":\n  "
										]
									},
									{
										"r": "123",
										"s": [
											{
												"r": "75",
												"s": [
													{
														"value": [
															"(\n    "
														]
													},
													{
														"r": "75",
														"s": [
															{
																"value": [
																	"\"Is Active Ambulatory Medication Request?\"",
																	"("
																]
															},
															{
																"r": "47",
																"s": [
																	{
																		"value": [
																			"[",
																			"MedicationRequest",
																			": "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"\"Ambulatory Abuse Potential Opioids\""
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"]"
																		]
																	}
																]
															},
															{
																"value": [
																	")"
																]
															}
														]
													},
													{
														"value": [
															"\n  )"
														]
													}
												]
											},
											{
												"value": [
													"\n    union\n    "
												]
											},
											{
												"r": "122",
												"s": [
													{
														"value": [
															"(\n        "
														]
													},
													{
														"r": "122",
														"s": [
															{
																"s": [
																	{
																		"r": "78",
																		"s": [
																			{
																				"r": "77",
																				"s": [
																					{
																						"value": [
																							"("
																						]
																					},
																					{
																						"r": "77",
																						"s": [
																							{
																								"value": [
																									"\"Is Active Ambulatory Medication Request?\"",
																									"("
																								]
																							},
																							{
																								"r": "76",
																								"s": [
																									{
																										"value": [
																											"[",
																											"MedicationRequest",
																											"]"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" ",
																					"Rx"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n          "
																]
															},
															{
																"s": [
																	{
																		"value": [
																			"let "
																		]
																	},
																	{
																		"r": "88",
																		"s": [
																			{
																				"value": [
																					"MedRef",
																					": "
																				]
																			},
																			{
																				"r": "87",
																				"s": [
																					{
																						"value": [
																							"if "
																						]
																					},
																					{
																						"r": "82",
																						"s": [
																							{
																								"value": [
																									"("
																								]
																							},
																							{
																								"r": "82",
																								"s": [
																									{
																										"r": "80",
																										"s": [
																											{
																												"r": "79",
																												"s": [
																													{
																														"value": [
																															"Rx"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "80",
																												"s": [
																													{
																														"value": [
																															"medication"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" is "
																										]
																									},
																									{
																										"r": "81",
																										"s": [
																											{
																												"value": [
																													"FHIR",
																													".",
																													"Reference"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" then "
																						]
																					},
																					{
																						"r": "85",
																						"s": [
																							{
																								"r": "84",
																								"s": [
																									{
																										"r": "83",
																										"s": [
																											{
																												"value": [
																													"Rx"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "84",
																										"s": [
																											{
																												"value": [
																													"medication"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "85",
																								"s": [
																									{
																										"value": [
																											"reference"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"r": "86",
																						"value": [
																							" else ",
																							"null"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n            "
																		]
																	},
																	{
																		"r": "94",
																		"s": [
																			{
																				"value": [
																					"Med",
																					": "
																				]
																			},
																			{
																				"r": "93",
																				"s": [
																					{
																						"value": [
																							"[",
																							"Medication",
																							": ",
																							"id",
																							" in "
																						]
																					},
																					{
																						"r": "92",
																						"s": [
																							{
																								"value": [
																									"("
																								]
																							},
																							{
																								"r": "92",
																								"s": [
																									{
																										"value": [
																											"Last",
																											"("
																										]
																									},
																									{
																										"r": "91",
																										"s": [
																											{
																												"value": [
																													"Split",
																													"("
																												]
																											},
																											{
																												"r": "89",
																												"s": [
																													{
																														"value": [
																															"MedRef"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													", "
																												]
																											},
																											{
																												"r": "90",
																												"s": [
																													{
																														"value": [
																															"'/'"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													")"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"]"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n          "
																]
															},
															{
																"r": "98",
																"s": [
																	{
																		"value": [
																			"where "
																		]
																	},
																	{
																		"r": "98",
																		"s": [
																			{
																				"r": "96",
																				"s": [
																					{
																						"r": "95",
																						"s": [
																							{
																								"value": [
																									"Med"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "96",
																						"s": [
																							{
																								"value": [
																									"code"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" in "
																				]
																			},
																			{
																				"r": "97",
																				"s": [
																					{
																						"value": [
																							"\"Ambulatory Abuse Potential Opioids\""
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n          "
																]
															},
															{
																"r": "121",
																"s": [
																	{
																		"value": [
																			"return\n            "
																		]
																	},
																	{
																		"r": "120",
																		"s": [
																			{
																				"value": [
																					"MedicationRequest",
																					" {\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"id",
																							": "
																						]
																					},
																					{
																						"r": "100",
																						"s": [
																							{
																								"r": "99",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "100",
																								"s": [
																									{
																										"value": [
																											"id"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"status",
																							": "
																						]
																					},
																					{
																						"r": "102",
																						"s": [
																							{
																								"r": "101",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "102",
																								"s": [
																									{
																										"value": [
																											"status"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"intent",
																							": "
																						]
																					},
																					{
																						"r": "104",
																						"s": [
																							{
																								"r": "103",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "104",
																								"s": [
																									{
																										"value": [
																											"intent"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"category",
																							": "
																						]
																					},
																					{
																						"r": "106",
																						"s": [
																							{
																								"r": "105",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "106",
																								"s": [
																									{
																										"value": [
																											"category"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"medication",
																							": "
																						]
																					},
																					{
																						"r": "109",
																						"s": [
																							{
																								"value": [
																									"First",
																									"("
																								]
																							},
																							{
																								"r": "108",
																								"s": [
																									{
																										"r": "107",
																										"s": [
																											{
																												"value": [
																													"Med"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "108",
																										"s": [
																											{
																												"value": [
																													"code"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"subject",
																							": "
																						]
																					},
																					{
																						"r": "111",
																						"s": [
																							{
																								"r": "110",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "111",
																								"s": [
																									{
																										"value": [
																											"subject"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"authoredOn",
																							": "
																						]
																					},
																					{
																						"r": "113",
																						"s": [
																							{
																								"r": "112",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "113",
																								"s": [
																									{
																										"value": [
																											"authoredOn"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"recorder",
																							": "
																						]
																					},
																					{
																						"r": "115",
																						"s": [
																							{
																								"r": "114",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "115",
																								"s": [
																									{
																										"value": [
																											"recorder"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"dosageInstruction",
																							": "
																						]
																					},
																					{
																						"r": "117",
																						"s": [
																							{
																								"r": "116",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "117",
																								"s": [
																									{
																										"value": [
																											"dosageInstruction"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n              "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"dispenseRequest",
																							": "
																						]
																					},
																					{
																						"r": "119",
																						"s": [
																							{
																								"r": "118",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "119",
																								"s": [
																									{
																										"value": [
																											"dispenseRequest"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"\n            }"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    )"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "123",
						"locator": "52:3-74:5",
						"type": "Union",
						"operand": [
							{
								"localId": "75",
								"locator": "52:3-54:3",
								"name": "Is Active Ambulatory Medication Request?",
								"type": "FunctionRef",
								"operand": [
									{
										"localId": "47",
										"locator": "53:48-53:104",
										"dataType": "{http://hl7.org/fhir}MedicationRequest",
										"codeProperty": "medication",
										"type": "Retrieve",
										"codes": {
											"locator": "53:68-53:103",
											"name": "Ambulatory Abuse Potential Opioids",
											"type": "ValueSetRef"
										}
									}
								]
							},
							{
								"localId": "122",
								"locator": "56:5-74:5",
								"type": "Query",
								"source": [
									{
										"localId": "78",
										"locator": "57:9-57:76",
										"alias": "Rx",
										"expression": {
											"localId": "77",
											"locator": "57:9-57:73",
											"name": "Is Active Ambulatory Medication Request?",
											"type": "FunctionRef",
											"operand": [
												{
													"localId": "76",
													"locator": "57:53-57:71",
													"dataType": "{http://hl7.org/fhir}MedicationRequest",
													"type": "Retrieve"
												}
											]
										}
									}
								],
								"let": [
									{
										"localId": "88",
										"locator": "58:15-58:97",
										"identifier": "MedRef",
										"expression": {
											"localId": "87",
											"locator": "58:23-58:97",
											"type": "If",
											"condition": {
												"asType": "{urn:hl7-org:elm-types:r1}Boolean",
												"type": "As",
												"operand": {
													"localId": "82",
													"locator": "58:26-58:58",
													"type": "Is",
													"operand": {
														"localId": "80",
														"locator": "58:27-58:39",
														"path": "medication",
														"scope": "Rx",
														"type": "Property"
													},
													"isTypeSpecifier": {
														"localId": "81",
														"locator": "58:44-58:57",
														"name": "{http://hl7.org/fhir}Reference",
														"type": "NamedTypeSpecifier"
													}
												}
											},
											"then": {
												"localId": "85",
												"locator": "58:65-58:87",
												"path": "reference",
												"type": "Property",
												"source": {
													"localId": "84",
													"locator": "58:65-58:77",
													"path": "medication",
													"scope": "Rx",
													"type": "Property"
												}
											},
											"else": {
												"asType": "{http://hl7.org/fhir}string",
												"type": "As",
												"operand": {
													"localId": "86",
													"locator": "58:94-58:97",
													"type": "Null"
												}
											}
										}
									},
									{
										"localId": "94",
										"locator": "59:13-59:63",
										"identifier": "Med",
										"expression": {
											"localId": "93",
											"locator": "59:18-59:63",
											"dataType": "{http://hl7.org/fhir}Medication",
											"codeProperty": "id",
											"type": "Retrieve",
											"codes": {
												"type": "ToList",
												"operand": {
													"localId": "92",
													"locator": "59:37-59:62",
													"type": "Last",
													"source": {
														"localId": "91",
														"locator": "59:43-59:60",
														"type": "Split",
														"stringToSplit": {
															"name": "ToString",
															"libraryName": "FHIRHelpers",
															"type": "FunctionRef",
															"operand": [
																{
																	"localId": "89",
																	"locator": "59:49-59:54",
																	"name": "MedRef",
																	"type": "QueryLetRef"
																}
															]
														},
														"separator": {
															"localId": "90",
															"locator": "59:57-59:59",
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": "/",
															"type": "Literal"
														}
													}
												}
											}
										}
									}
								],
								"relationship": [],
								"where": {
									"localId": "98",
									"locator": "60:11-60:64",
									"type": "AnyInValueSet",
									"codes": {
										"type": "Query",
										"source": [
											{
												"alias": "X",
												"expression": {
													"localId": "96",
													"locator": "60:17-60:24",
													"type": "Query",
													"source": [
														{
															"alias": "$this",
															"expression": {
																"localId": "95",
																"locator": "60:17-60:19",
																"name": "Med",
																"type": "QueryLetRef"
															}
														}
													],
													"where": {
														"type": "Not",
														"operand": {
															"type": "IsNull",
															"operand": {
																"path": "code",
																"type": "Property",
																"source": {
																	"name": "$this",
																	"type": "AliasRef"
																}
															}
														}
													},
													"return": {
														"expression": {
															"path": "code",
															"type": "Property",
															"source": {
																"name": "$this",
																"type": "AliasRef"
															}
														}
													}
												}
											}
										],
										"return": {
											"distinct": false,
											"expression": {
												"name": "ToConcept",
												"libraryName": "FHIRHelpers",
												"type": "FunctionRef",
												"operand": [
													{
														"name": "X",
														"type": "AliasRef"
													}
												]
											}
										}
									},
									"valueset": {
										"localId": "97",
										"locator": "60:29-60:64",
										"name": "Ambulatory Abuse Potential Opioids"
									}
								},
								"return": {
									"localId": "121",
									"locator": "61:11-73:13",
									"expression": {
										"localId": "120",
										"locator": "62:13-73:13",
										"classType": "{http://hl7.org/fhir}MedicationRequest",
										"type": "Instance",
										"element": [
											{
												"name": "id",
												"value": {
													"localId": "100",
													"locator": "63:19-63:23",
													"path": "id",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "status",
												"value": {
													"localId": "102",
													"locator": "64:23-64:31",
													"path": "status",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "intent",
												"value": {
													"localId": "104",
													"locator": "65:23-65:31",
													"path": "intent",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "category",
												"value": {
													"localId": "106",
													"locator": "66:25-66:35",
													"path": "category",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "medication",
												"value": {
													"type": "As",
													"operand": {
														"localId": "109",
														"locator": "67:27-67:41",
														"type": "First",
														"source": {
															"localId": "108",
															"locator": "67:33-67:40",
															"type": "Query",
															"source": [
																{
																	"alias": "$this",
																	"expression": {
																		"localId": "107",
																		"locator": "67:33-67:35",
																		"name": "Med",
																		"type": "QueryLetRef"
																	}
																}
															],
															"where": {
																"type": "Not",
																"operand": {
																	"type": "IsNull",
																	"operand": {
																		"path": "code",
																		"type": "Property",
																		"source": {
																			"name": "$this",
																			"type": "AliasRef"
																		}
																	}
																}
															},
															"return": {
																"expression": {
																	"path": "code",
																	"type": "Property",
																	"source": {
																		"name": "$this",
																		"type": "AliasRef"
																	}
																}
															}
														}
													},
													"asTypeSpecifier": {
														"type": "ChoiceTypeSpecifier",
														"choice": [
															{
																"name": "{http://hl7.org/fhir}CodeableConcept",
																"type": "NamedTypeSpecifier"
															},
															{
																"name": "{http://hl7.org/fhir}Reference",
																"type": "NamedTypeSpecifier"
															}
														]
													}
												}
											},
											{
												"name": "subject",
												"value": {
													"localId": "111",
													"locator": "68:24-68:33",
													"path": "subject",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "authoredOn",
												"value": {
													"localId": "113",
													"locator": "69:27-69:39",
													"path": "authoredOn",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "recorder",
												"value": {
													"localId": "115",
													"locator": "70:25-70:35",
													"path": "recorder",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "dosageInstruction",
												"value": {
													"localId": "117",
													"locator": "71:34-71:53",
													"path": "dosageInstruction",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "dispenseRequest",
												"value": {
													"localId": "119",
													"locator": "72:32-72:49",
													"path": "dispenseRequest",
													"scope": "Rx",
													"type": "Property"
												}
											}
										]
									}
								}
							}
						]
					}
				},
				{
					"localId": "175",
					"locator": "76:1-99:3",
					"name": "Active Ambulatory Benzodiazepine Rx",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "175",
								"s": [
									{
										"value": [
											"define ",
											"\"Active Ambulatory Benzodiazepine Rx\"",
											":\n  "
										]
									},
									{
										"r": "174",
										"s": [
											{
												"r": "126",
												"s": [
													{
														"value": [
															"(\n    "
														]
													},
													{
														"r": "126",
														"s": [
															{
																"value": [
																	"\"Is Active Ambulatory Medication Request?\"",
																	"("
																]
															},
															{
																"r": "125",
																"s": [
																	{
																		"value": [
																			"[",
																			"MedicationRequest",
																			": "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"\"Benzodiazepines\""
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"]"
																		]
																	}
																]
															},
															{
																"value": [
																	")"
																]
															}
														]
													},
													{
														"value": [
															"\n  )"
														]
													}
												]
											},
											{
												"value": [
													"\n  union\n  "
												]
											},
											{
												"r": "173",
												"s": [
													{
														"value": [
															"(\n      "
														]
													},
													{
														"r": "173",
														"s": [
															{
																"s": [
																	{
																		"r": "129",
																		"s": [
																			{
																				"r": "128",
																				"s": [
																					{
																						"value": [
																							"("
																						]
																					},
																					{
																						"r": "128",
																						"s": [
																							{
																								"value": [
																									"\"Is Active Ambulatory Medication Request?\"",
																									"("
																								]
																							},
																							{
																								"r": "127",
																								"s": [
																									{
																										"value": [
																											"[",
																											"MedicationRequest",
																											"]"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" ",
																					"Rx"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"s": [
																	{
																		"value": [
																			"let "
																		]
																	},
																	{
																		"r": "139",
																		"s": [
																			{
																				"value": [
																					"MedRef",
																					": "
																				]
																			},
																			{
																				"r": "138",
																				"s": [
																					{
																						"value": [
																							"if "
																						]
																					},
																					{
																						"r": "133",
																						"s": [
																							{
																								"value": [
																									"("
																								]
																							},
																							{
																								"r": "133",
																								"s": [
																									{
																										"r": "131",
																										"s": [
																											{
																												"r": "130",
																												"s": [
																													{
																														"value": [
																															"Rx"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "131",
																												"s": [
																													{
																														"value": [
																															"medication"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" is "
																										]
																									},
																									{
																										"r": "132",
																										"s": [
																											{
																												"value": [
																													"FHIR",
																													".",
																													"Reference"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" then "
																						]
																					},
																					{
																						"r": "136",
																						"s": [
																							{
																								"r": "135",
																								"s": [
																									{
																										"r": "134",
																										"s": [
																											{
																												"value": [
																													"Rx"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "135",
																										"s": [
																											{
																												"value": [
																													"medication"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "136",
																								"s": [
																									{
																										"value": [
																											"reference"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"r": "137",
																						"value": [
																							" else ",
																							"null"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n          "
																		]
																	},
																	{
																		"r": "145",
																		"s": [
																			{
																				"value": [
																					"Med",
																					": "
																				]
																			},
																			{
																				"r": "144",
																				"s": [
																					{
																						"value": [
																							"[",
																							"Medication",
																							": ",
																							"id",
																							" in "
																						]
																					},
																					{
																						"r": "143",
																						"s": [
																							{
																								"value": [
																									"("
																								]
																							},
																							{
																								"r": "143",
																								"s": [
																									{
																										"value": [
																											"Last",
																											"("
																										]
																									},
																									{
																										"r": "142",
																										"s": [
																											{
																												"value": [
																													"Split",
																													"("
																												]
																											},
																											{
																												"r": "140",
																												"s": [
																													{
																														"value": [
																															"MedRef"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													", "
																												]
																											},
																											{
																												"r": "141",
																												"s": [
																													{
																														"value": [
																															"'/'"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													")"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"]"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "149",
																"s": [
																	{
																		"value": [
																			"where "
																		]
																	},
																	{
																		"r": "149",
																		"s": [
																			{
																				"r": "147",
																				"s": [
																					{
																						"r": "146",
																						"s": [
																							{
																								"value": [
																									"Med"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "147",
																						"s": [
																							{
																								"value": [
																									"code"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" in "
																				]
																			},
																			{
																				"r": "148",
																				"s": [
																					{
																						"value": [
																							"\"Benzodiazepines\""
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "172",
																"s": [
																	{
																		"value": [
																			"return\n          "
																		]
																	},
																	{
																		"r": "171",
																		"s": [
																			{
																				"value": [
																					"MedicationRequest",
																					" {\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"id",
																							": "
																						]
																					},
																					{
																						"r": "151",
																						"s": [
																							{
																								"r": "150",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "151",
																								"s": [
																									{
																										"value": [
																											"id"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"status",
																							": "
																						]
																					},
																					{
																						"r": "153",
																						"s": [
																							{
																								"r": "152",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "153",
																								"s": [
																									{
																										"value": [
																											"status"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"intent",
																							": "
																						]
																					},
																					{
																						"r": "155",
																						"s": [
																							{
																								"r": "154",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "155",
																								"s": [
																									{
																										"value": [
																											"intent"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"category",
																							": "
																						]
																					},
																					{
																						"r": "157",
																						"s": [
																							{
																								"r": "156",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "157",
																								"s": [
																									{
																										"value": [
																											"category"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"medication",
																							": "
																						]
																					},
																					{
																						"r": "160",
																						"s": [
																							{
																								"value": [
																									"First",
																									"("
																								]
																							},
																							{
																								"r": "159",
																								"s": [
																									{
																										"r": "158",
																										"s": [
																											{
																												"value": [
																													"Med"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "159",
																										"s": [
																											{
																												"value": [
																													"code"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"subject",
																							": "
																						]
																					},
																					{
																						"r": "162",
																						"s": [
																							{
																								"r": "161",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "162",
																								"s": [
																									{
																										"value": [
																											"subject"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"authoredOn",
																							": "
																						]
																					},
																					{
																						"r": "164",
																						"s": [
																							{
																								"r": "163",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "164",
																								"s": [
																									{
																										"value": [
																											"authoredOn"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"recorder",
																							": "
																						]
																					},
																					{
																						"r": "166",
																						"s": [
																							{
																								"r": "165",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "166",
																								"s": [
																									{
																										"value": [
																											"recorder"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"dosageInstruction",
																							": "
																						]
																					},
																					{
																						"r": "168",
																						"s": [
																							{
																								"r": "167",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "168",
																								"s": [
																									{
																										"value": [
																											"dosageInstruction"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"dispenseRequest",
																							": "
																						]
																					},
																					{
																						"r": "170",
																						"s": [
																							{
																								"r": "169",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "170",
																								"s": [
																									{
																										"value": [
																											"dispenseRequest"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"\n          }"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n  )"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "174",
						"locator": "77:3-99:3",
						"type": "Union",
						"operand": [
							{
								"localId": "126",
								"locator": "77:3-79:3",
								"name": "Is Active Ambulatory Medication Request?",
								"type": "FunctionRef",
								"operand": [
									{
										"localId": "125",
										"locator": "78:48-78:85",
										"dataType": "{http://hl7.org/fhir}MedicationRequest",
										"codeProperty": "medication",
										"type": "Retrieve",
										"codes": {
											"locator": "78:68-78:84",
											"name": "Benzodiazepines",
											"type": "ValueSetRef"
										}
									}
								]
							},
							{
								"localId": "173",
								"locator": "81:3-99:3",
								"type": "Query",
								"source": [
									{
										"localId": "129",
										"locator": "82:7-82:74",
										"alias": "Rx",
										"expression": {
											"localId": "128",
											"locator": "82:7-82:71",
											"name": "Is Active Ambulatory Medication Request?",
											"type": "FunctionRef",
											"operand": [
												{
													"localId": "127",
													"locator": "82:51-82:69",
													"dataType": "{http://hl7.org/fhir}MedicationRequest",
													"type": "Retrieve"
												}
											]
										}
									}
								],
								"let": [
									{
										"localId": "139",
										"locator": "83:13-83:95",
										"identifier": "MedRef",
										"expression": {
											"localId": "138",
											"locator": "83:21-83:95",
											"type": "If",
											"condition": {
												"asType": "{urn:hl7-org:elm-types:r1}Boolean",
												"type": "As",
												"operand": {
													"localId": "133",
													"locator": "83:24-83:56",
													"type": "Is",
													"operand": {
														"localId": "131",
														"locator": "83:25-83:37",
														"path": "medication",
														"scope": "Rx",
														"type": "Property"
													},
													"isTypeSpecifier": {
														"localId": "132",
														"locator": "83:42-83:55",
														"name": "{http://hl7.org/fhir}Reference",
														"type": "NamedTypeSpecifier"
													}
												}
											},
											"then": {
												"localId": "136",
												"locator": "83:63-83:85",
												"path": "reference",
												"type": "Property",
												"source": {
													"localId": "135",
													"locator": "83:63-83:75",
													"path": "medication",
													"scope": "Rx",
													"type": "Property"
												}
											},
											"else": {
												"asType": "{http://hl7.org/fhir}string",
												"type": "As",
												"operand": {
													"localId": "137",
													"locator": "83:92-83:95",
													"type": "Null"
												}
											}
										}
									},
									{
										"localId": "145",
										"locator": "84:11-84:61",
										"identifier": "Med",
										"expression": {
											"localId": "144",
											"locator": "84:16-84:61",
											"dataType": "{http://hl7.org/fhir}Medication",
											"codeProperty": "id",
											"type": "Retrieve",
											"codes": {
												"type": "ToList",
												"operand": {
													"localId": "143",
													"locator": "84:35-84:60",
													"type": "Last",
													"source": {
														"localId": "142",
														"locator": "84:41-84:58",
														"type": "Split",
														"stringToSplit": {
															"name": "ToString",
															"libraryName": "FHIRHelpers",
															"type": "FunctionRef",
															"operand": [
																{
																	"localId": "140",
																	"locator": "84:47-84:52",
																	"name": "MedRef",
																	"type": "QueryLetRef"
																}
															]
														},
														"separator": {
															"localId": "141",
															"locator": "84:55-84:57",
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": "/",
															"type": "Literal"
														}
													}
												}
											}
										}
									}
								],
								"relationship": [],
								"where": {
									"localId": "149",
									"locator": "85:9-85:43",
									"type": "AnyInValueSet",
									"codes": {
										"type": "Query",
										"source": [
											{
												"alias": "X",
												"expression": {
													"localId": "147",
													"locator": "85:15-85:22",
													"type": "Query",
													"source": [
														{
															"alias": "$this",
															"expression": {
																"localId": "146",
																"locator": "85:15-85:17",
																"name": "Med",
																"type": "QueryLetRef"
															}
														}
													],
													"where": {
														"type": "Not",
														"operand": {
															"type": "IsNull",
															"operand": {
																"path": "code",
																"type": "Property",
																"source": {
																	"name": "$this",
																	"type": "AliasRef"
																}
															}
														}
													},
													"return": {
														"expression": {
															"path": "code",
															"type": "Property",
															"source": {
																"name": "$this",
																"type": "AliasRef"
															}
														}
													}
												}
											}
										],
										"return": {
											"distinct": false,
											"expression": {
												"name": "ToConcept",
												"libraryName": "FHIRHelpers",
												"type": "FunctionRef",
												"operand": [
													{
														"name": "X",
														"type": "AliasRef"
													}
												]
											}
										}
									},
									"valueset": {
										"localId": "148",
										"locator": "85:27-85:43",
										"name": "Benzodiazepines"
									}
								},
								"return": {
									"localId": "172",
									"locator": "86:9-98:11",
									"expression": {
										"localId": "171",
										"locator": "87:11-98:11",
										"classType": "{http://hl7.org/fhir}MedicationRequest",
										"type": "Instance",
										"element": [
											{
												"name": "id",
												"value": {
													"localId": "151",
													"locator": "88:17-88:21",
													"path": "id",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "status",
												"value": {
													"localId": "153",
													"locator": "89:21-89:29",
													"path": "status",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "intent",
												"value": {
													"localId": "155",
													"locator": "90:21-90:29",
													"path": "intent",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "category",
												"value": {
													"localId": "157",
													"locator": "91:23-91:33",
													"path": "category",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "medication",
												"value": {
													"type": "As",
													"operand": {
														"localId": "160",
														"locator": "92:25-92:39",
														"type": "First",
														"source": {
															"localId": "159",
															"locator": "92:31-92:38",
															"type": "Query",
															"source": [
																{
																	"alias": "$this",
																	"expression": {
																		"localId": "158",
																		"locator": "92:31-92:33",
																		"name": "Med",
																		"type": "QueryLetRef"
																	}
																}
															],
															"where": {
																"type": "Not",
																"operand": {
																	"type": "IsNull",
																	"operand": {
																		"path": "code",
																		"type": "Property",
																		"source": {
																			"name": "$this",
																			"type": "AliasRef"
																		}
																	}
																}
															},
															"return": {
																"expression": {
																	"path": "code",
																	"type": "Property",
																	"source": {
																		"name": "$this",
																		"type": "AliasRef"
																	}
																}
															}
														}
													},
													"asTypeSpecifier": {
														"type": "ChoiceTypeSpecifier",
														"choice": [
															{
																"name": "{http://hl7.org/fhir}CodeableConcept",
																"type": "NamedTypeSpecifier"
															},
															{
																"name": "{http://hl7.org/fhir}Reference",
																"type": "NamedTypeSpecifier"
															}
														]
													}
												}
											},
											{
												"name": "subject",
												"value": {
													"localId": "162",
													"locator": "93:22-93:31",
													"path": "subject",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "authoredOn",
												"value": {
													"localId": "164",
													"locator": "94:25-94:37",
													"path": "authoredOn",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "recorder",
												"value": {
													"localId": "166",
													"locator": "95:23-95:33",
													"path": "recorder",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "dosageInstruction",
												"value": {
													"localId": "168",
													"locator": "96:32-96:51",
													"path": "dosageInstruction",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "dispenseRequest",
												"value": {
													"localId": "170",
													"locator": "97:30-97:47",
													"path": "dispenseRequest",
													"scope": "Rx",
													"type": "Property"
												}
											}
										]
									}
								}
							}
						]
					}
				},
				{
					"localId": "224",
					"locator": "101:1-123:3",
					"name": "Active Ambulatory Naloxone Rx",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "224",
								"s": [
									{
										"value": [
											"define ",
											"\"Active Ambulatory Naloxone Rx\"",
											":\n  "
										]
									},
									{
										"r": "223",
										"s": [
											{
												"r": "177",
												"s": [
													{
														"value": [
															"(\n    "
														]
													},
													{
														"r": "177",
														"s": [
															{
																"value": [
																	"\"Is Active Ambulatory Medication Request?\"",
																	"("
																]
															},
															{
																"r": "176",
																"s": [
																	{
																		"value": [
																			"[",
																			"MedicationRequest",
																			": "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"\"Naloxone\""
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"]"
																		]
																	}
																]
															},
															{
																"value": [
																	")"
																]
															}
														]
													},
													{
														"value": [
															"\n  )"
														]
													}
												]
											},
											{
												"value": [
													"\n  union\n  "
												]
											},
											{
												"r": "222",
												"s": [
													{
														"value": [
															"(\n      "
														]
													},
													{
														"r": "222",
														"s": [
															{
																"s": [
																	{
																		"r": "180",
																		"s": [
																			{
																				"r": "179",
																				"s": [
																					{
																						"value": [
																							"("
																						]
																					},
																					{
																						"r": "179",
																						"s": [
																							{
																								"value": [
																									"\"Is Active Ambulatory Medication Request?\"",
																									"("
																								]
																							},
																							{
																								"r": "178",
																								"s": [
																									{
																										"value": [
																											"[",
																											"MedicationRequest",
																											"]"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" ",
																					"Rx"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"s": [
																	{
																		"value": [
																			"let "
																		]
																	},
																	{
																		"r": "190",
																		"s": [
																			{
																				"value": [
																					"MedRef",
																					": "
																				]
																			},
																			{
																				"r": "189",
																				"s": [
																					{
																						"value": [
																							"if "
																						]
																					},
																					{
																						"r": "184",
																						"s": [
																							{
																								"value": [
																									"("
																								]
																							},
																							{
																								"r": "184",
																								"s": [
																									{
																										"r": "182",
																										"s": [
																											{
																												"r": "181",
																												"s": [
																													{
																														"value": [
																															"Rx"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "182",
																												"s": [
																													{
																														"value": [
																															"medication"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" is "
																										]
																									},
																									{
																										"r": "183",
																										"s": [
																											{
																												"value": [
																													"FHIR",
																													".",
																													"Reference"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" then "
																						]
																					},
																					{
																						"r": "187",
																						"s": [
																							{
																								"r": "186",
																								"s": [
																									{
																										"r": "185",
																										"s": [
																											{
																												"value": [
																													"Rx"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "186",
																										"s": [
																											{
																												"value": [
																													"medication"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "187",
																								"s": [
																									{
																										"value": [
																											"reference"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"r": "188",
																						"value": [
																							" else ",
																							"null"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n          "
																		]
																	},
																	{
																		"r": "196",
																		"s": [
																			{
																				"value": [
																					"Med",
																					": "
																				]
																			},
																			{
																				"r": "195",
																				"s": [
																					{
																						"value": [
																							"[",
																							"Medication",
																							": ",
																							"id",
																							" in "
																						]
																					},
																					{
																						"r": "194",
																						"s": [
																							{
																								"value": [
																									"("
																								]
																							},
																							{
																								"r": "194",
																								"s": [
																									{
																										"value": [
																											"Last",
																											"("
																										]
																									},
																									{
																										"r": "193",
																										"s": [
																											{
																												"value": [
																													"Split",
																													"("
																												]
																											},
																											{
																												"r": "191",
																												"s": [
																													{
																														"value": [
																															"MedRef"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													", "
																												]
																											},
																											{
																												"r": "192",
																												"s": [
																													{
																														"value": [
																															"'/'"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													")"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"]"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "200",
																"s": [
																	{
																		"value": [
																			"where "
																		]
																	},
																	{
																		"r": "200",
																		"s": [
																			{
																				"r": "198",
																				"s": [
																					{
																						"r": "197",
																						"s": [
																							{
																								"value": [
																									"Med"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "198",
																						"s": [
																							{
																								"value": [
																									"code"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" in "
																				]
																			},
																			{
																				"r": "199",
																				"s": [
																					{
																						"value": [
																							"\"Naloxone\""
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "221",
																"s": [
																	{
																		"value": [
																			"return\n          "
																		]
																	},
																	{
																		"r": "220",
																		"s": [
																			{
																				"value": [
																					"MedicationRequest",
																					" {\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"id",
																							": "
																						]
																					},
																					{
																						"r": "202",
																						"s": [
																							{
																								"r": "201",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "202",
																								"s": [
																									{
																										"value": [
																											"id"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"status",
																							": "
																						]
																					},
																					{
																						"r": "204",
																						"s": [
																							{
																								"r": "203",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "204",
																								"s": [
																									{
																										"value": [
																											"status"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"intent",
																							": "
																						]
																					},
																					{
																						"r": "206",
																						"s": [
																							{
																								"r": "205",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "206",
																								"s": [
																									{
																										"value": [
																											"intent"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"category",
																							": "
																						]
																					},
																					{
																						"r": "208",
																						"s": [
																							{
																								"r": "207",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "208",
																								"s": [
																									{
																										"value": [
																											"category"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"medication",
																							": "
																						]
																					},
																					{
																						"r": "211",
																						"s": [
																							{
																								"value": [
																									"First",
																									"("
																								]
																							},
																							{
																								"r": "210",
																								"s": [
																									{
																										"r": "209",
																										"s": [
																											{
																												"value": [
																													"Med"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "210",
																										"s": [
																											{
																												"value": [
																													"code"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"subject",
																							": "
																						]
																					},
																					{
																						"r": "213",
																						"s": [
																							{
																								"r": "212",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "213",
																								"s": [
																									{
																										"value": [
																											"subject"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"recorder",
																							": "
																						]
																					},
																					{
																						"r": "215",
																						"s": [
																							{
																								"r": "214",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "215",
																								"s": [
																									{
																										"value": [
																											"recorder"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"dosageInstruction",
																							": "
																						]
																					},
																					{
																						"r": "217",
																						"s": [
																							{
																								"r": "216",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "217",
																								"s": [
																									{
																										"value": [
																											"dosageInstruction"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"dispenseRequest",
																							": "
																						]
																					},
																					{
																						"r": "219",
																						"s": [
																							{
																								"r": "218",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "219",
																								"s": [
																									{
																										"value": [
																											"dispenseRequest"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"\n          }"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n  )"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "223",
						"locator": "102:3-123:3",
						"type": "Union",
						"operand": [
							{
								"localId": "177",
								"locator": "102:3-104:3",
								"name": "Is Active Ambulatory Medication Request?",
								"type": "FunctionRef",
								"operand": [
									{
										"localId": "176",
										"locator": "103:48-103:78",
										"dataType": "{http://hl7.org/fhir}MedicationRequest",
										"codeProperty": "medication",
										"type": "Retrieve",
										"codes": {
											"locator": "103:68-103:77",
											"name": "Naloxone",
											"type": "ValueSetRef"
										}
									}
								]
							},
							{
								"localId": "222",
								"locator": "106:3-123:3",
								"type": "Query",
								"source": [
									{
										"localId": "180",
										"locator": "107:7-107:74",
										"alias": "Rx",
										"expression": {
											"localId": "179",
											"locator": "107:7-107:71",
											"name": "Is Active Ambulatory Medication Request?",
											"type": "FunctionRef",
											"operand": [
												{
													"localId": "178",
													"locator": "107:51-107:69",
													"dataType": "{http://hl7.org/fhir}MedicationRequest",
													"type": "Retrieve"
												}
											]
										}
									}
								],
								"let": [
									{
										"localId": "190",
										"locator": "108:13-108:95",
										"identifier": "MedRef",
										"expression": {
											"localId": "189",
											"locator": "108:21-108:95",
											"type": "If",
											"condition": {
												"asType": "{urn:hl7-org:elm-types:r1}Boolean",
												"type": "As",
												"operand": {
													"localId": "184",
													"locator": "108:24-108:56",
													"type": "Is",
													"operand": {
														"localId": "182",
														"locator": "108:25-108:37",
														"path": "medication",
														"scope": "Rx",
														"type": "Property"
													},
													"isTypeSpecifier": {
														"localId": "183",
														"locator": "108:42-108:55",
														"name": "{http://hl7.org/fhir}Reference",
														"type": "NamedTypeSpecifier"
													}
												}
											},
											"then": {
												"localId": "187",
												"locator": "108:63-108:85",
												"path": "reference",
												"type": "Property",
												"source": {
													"localId": "186",
													"locator": "108:63-108:75",
													"path": "medication",
													"scope": "Rx",
													"type": "Property"
												}
											},
											"else": {
												"asType": "{http://hl7.org/fhir}string",
												"type": "As",
												"operand": {
													"localId": "188",
													"locator": "108:92-108:95",
													"type": "Null"
												}
											}
										}
									},
									{
										"localId": "196",
										"locator": "109:11-109:61",
										"identifier": "Med",
										"expression": {
											"localId": "195",
											"locator": "109:16-109:61",
											"dataType": "{http://hl7.org/fhir}Medication",
											"codeProperty": "id",
											"type": "Retrieve",
											"codes": {
												"type": "ToList",
												"operand": {
													"localId": "194",
													"locator": "109:35-109:60",
													"type": "Last",
													"source": {
														"localId": "193",
														"locator": "109:41-109:58",
														"type": "Split",
														"stringToSplit": {
															"name": "ToString",
															"libraryName": "FHIRHelpers",
															"type": "FunctionRef",
															"operand": [
																{
																	"localId": "191",
																	"locator": "109:47-109:52",
																	"name": "MedRef",
																	"type": "QueryLetRef"
																}
															]
														},
														"separator": {
															"localId": "192",
															"locator": "109:55-109:57",
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": "/",
															"type": "Literal"
														}
													}
												}
											}
										}
									}
								],
								"relationship": [],
								"where": {
									"localId": "200",
									"locator": "110:9-110:36",
									"type": "AnyInValueSet",
									"codes": {
										"type": "Query",
										"source": [
											{
												"alias": "X",
												"expression": {
													"localId": "198",
													"locator": "110:15-110:22",
													"type": "Query",
													"source": [
														{
															"alias": "$this",
															"expression": {
																"localId": "197",
																"locator": "110:15-110:17",
																"name": "Med",
																"type": "QueryLetRef"
															}
														}
													],
													"where": {
														"type": "Not",
														"operand": {
															"type": "IsNull",
															"operand": {
																"path": "code",
																"type": "Property",
																"source": {
																	"name": "$this",
																	"type": "AliasRef"
																}
															}
														}
													},
													"return": {
														"expression": {
															"path": "code",
															"type": "Property",
															"source": {
																"name": "$this",
																"type": "AliasRef"
															}
														}
													}
												}
											}
										],
										"return": {
											"distinct": false,
											"expression": {
												"name": "ToConcept",
												"libraryName": "FHIRHelpers",
												"type": "FunctionRef",
												"operand": [
													{
														"name": "X",
														"type": "AliasRef"
													}
												]
											}
										}
									},
									"valueset": {
										"localId": "199",
										"locator": "110:27-110:36",
										"name": "Naloxone"
									}
								},
								"return": {
									"localId": "221",
									"locator": "111:9-122:11",
									"expression": {
										"localId": "220",
										"locator": "112:11-122:11",
										"classType": "{http://hl7.org/fhir}MedicationRequest",
										"type": "Instance",
										"element": [
											{
												"name": "id",
												"value": {
													"localId": "202",
													"locator": "113:17-113:21",
													"path": "id",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "status",
												"value": {
													"localId": "204",
													"locator": "114:21-114:29",
													"path": "status",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "intent",
												"value": {
													"localId": "206",
													"locator": "115:21-115:29",
													"path": "intent",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "category",
												"value": {
													"localId": "208",
													"locator": "116:23-116:33",
													"path": "category",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "medication",
												"value": {
													"type": "As",
													"operand": {
														"localId": "211",
														"locator": "117:25-117:39",
														"type": "First",
														"source": {
															"localId": "210",
															"locator": "117:31-117:38",
															"type": "Query",
															"source": [
																{
																	"alias": "$this",
																	"expression": {
																		"localId": "209",
																		"locator": "117:31-117:33",
																		"name": "Med",
																		"type": "QueryLetRef"
																	}
																}
															],
															"where": {
																"type": "Not",
																"operand": {
																	"type": "IsNull",
																	"operand": {
																		"path": "code",
																		"type": "Property",
																		"source": {
																			"name": "$this",
																			"type": "AliasRef"
																		}
																	}
																}
															},
															"return": {
																"expression": {
																	"path": "code",
																	"type": "Property",
																	"source": {
																		"name": "$this",
																		"type": "AliasRef"
																	}
																}
															}
														}
													},
													"asTypeSpecifier": {
														"type": "ChoiceTypeSpecifier",
														"choice": [
															{
																"name": "{http://hl7.org/fhir}CodeableConcept",
																"type": "NamedTypeSpecifier"
															},
															{
																"name": "{http://hl7.org/fhir}Reference",
																"type": "NamedTypeSpecifier"
															}
														]
													}
												}
											},
											{
												"name": "subject",
												"value": {
													"localId": "213",
													"locator": "118:22-118:31",
													"path": "subject",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "recorder",
												"value": {
													"localId": "215",
													"locator": "119:23-119:33",
													"path": "recorder",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "dosageInstruction",
												"value": {
													"localId": "217",
													"locator": "120:32-120:51",
													"path": "dosageInstruction",
													"scope": "Rx",
													"type": "Property"
												}
											},
											{
												"name": "dispenseRequest",
												"value": {
													"localId": "219",
													"locator": "121:30-121:47",
													"path": "dispenseRequest",
													"scope": "Rx",
													"type": "Property"
												}
											}
										]
									}
								}
							}
						]
					}
				},
				{
					"localId": "241",
					"locator": "125:1-128:96",
					"name": "Ambulatory Opioid Rx",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "241",
								"s": [
									{
										"value": [
											"define ",
											"\"Ambulatory Opioid Rx\"",
											":\n  "
										]
									},
									{
										"r": "240",
										"s": [
											{
												"s": [
													{
														"r": "226",
														"s": [
															{
																"r": "225",
																"s": [
																	{
																		"r": "225",
																		"s": [
																			{
																				"value": [
																					"[",
																					"MedicationRequest",
																					": "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"\"Ambulatory Abuse Potential Opioids\""
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"]"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" ",
																	"Rx"
																]
															}
														]
													}
												]
											},
											{
												"value": [
													"\n\t\t  "
												]
											},
											{
												"r": "239",
												"s": [
													{
														"value": [
															"where "
														]
													},
													{
														"r": "239",
														"s": [
															{
																"r": "232",
																"s": [
																	{
																		"r": "230",
																		"s": [
																			{
																				"r": "227",
																				"s": [
																					{
																						"value": [
																							"FHIRHelpers"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "230",
																				"s": [
																					{
																						"value": [
																							"ToConcept",
																							"("
																						]
																					},
																					{
																						"r": "229",
																						"s": [
																							{
																								"r": "228",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "229",
																								"s": [
																									{
																										"value": [
																											"category"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"~",
																			" "
																		]
																	},
																	{
																		"r": "231",
																		"s": [
																			{
																				"value": [
																					"\"Community\""
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n\t\t\t  or "
																]
															},
															{
																"r": "238",
																"s": [
																	{
																		"value": [
																			"("
																		]
																	},
																	{
																		"r": "238",
																		"s": [
																			{
																				"r": "233",
																				"s": [
																					{
																						"value": [
																							"IgnoreOutpatientCategorySystem"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" and "
																				]
																			},
																			{
																				"r": "237",
																				"s": [
																					{
																						"value": [
																							"ConceptCodeOnlyEquivalent",
																							"("
																						]
																					},
																					{
																						"r": "235",
																						"s": [
																							{
																								"r": "234",
																								"s": [
																									{
																										"value": [
																											"Rx"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "235",
																								"s": [
																									{
																										"value": [
																											"category"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							", "
																						]
																					},
																					{
																						"r": "236",
																						"s": [
																							{
																								"value": [
																									"\"Community\""
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			")"
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "240",
						"locator": "126:3-128:96",
						"type": "Query",
						"source": [
							{
								"localId": "226",
								"locator": "126:3-126:62",
								"alias": "Rx",
								"expression": {
									"localId": "225",
									"locator": "126:3-126:59",
									"dataType": "{http://hl7.org/fhir}MedicationRequest",
									"codeProperty": "medication",
									"type": "Retrieve",
									"codes": {
										"locator": "126:23-126:58",
										"name": "Ambulatory Abuse Potential Opioids",
										"type": "ValueSetRef"
									}
								}
							}
						],
						"relationship": [],
						"where": {
							"localId": "239",
							"locator": "127:5-128:96",
							"type": "Or",
							"operand": [
								{
									"localId": "232",
									"locator": "127:11-127:58",
									"type": "Equivalent",
									"operand": [
										{
											"localId": "230",
											"locator": "127:11-127:44",
											"name": "ToConcept",
											"libraryName": "FHIRHelpers",
											"type": "FunctionRef",
											"operand": [
												{
													"localId": "229",
													"locator": "127:33-127:43",
													"path": "category",
													"scope": "Rx",
													"type": "Property"
												}
											]
										},
										{
											"type": "ToConcept",
											"operand": {
												"localId": "231",
												"locator": "127:48-127:58",
												"name": "Community",
												"type": "CodeRef"
											}
										}
									]
								},
								{
									"localId": "238",
									"locator": "128:9-128:96",
									"type": "And",
									"operand": [
										{
											"localId": "233",
											"locator": "128:10-128:39",
											"name": "IgnoreOutpatientCategorySystem",
											"type": "ExpressionRef"
										},
										{
											"localId": "237",
											"locator": "128:45-128:95",
											"name": "ConceptCodeOnlyEquivalent",
											"type": "FunctionRef",
											"operand": [
												{
													"name": "ToConcept",
													"libraryName": "FHIRHelpers",
													"type": "FunctionRef",
													"operand": [
														{
															"localId": "235",
															"locator": "128:71-128:81",
															"path": "category",
															"scope": "Rx",
															"type": "Property"
														}
													]
												},
												{
													"localId": "236",
													"locator": "128:84-128:94",
													"name": "Community",
													"type": "CodeRef"
												}
											]
										}
									]
								}
							]
						}
					}
				},
				{
					"localId": "274",
					"locator": "130:1-144:3",
					"name": "End of Life Assessment",
					"context": "Patient",
					"accessLevel": "Public",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "274",
								"s": [
									{
										"value": [
											"define ",
											"\"End of Life Assessment\"",
											":\n  // 1. Conditions indicating end of life or with limited life expectancy\n  "
										]
									},
									{
										"r": "273",
										"s": [
											{
												"value": [
													"exists "
												]
											},
											{
												"r": "272",
												"s": [
													{
														"value": [
															"(\n    "
														]
													},
													{
														"r": "272",
														"s": [
															{
																"r": "256",
																"s": [
																	{
																		"value": [
																			"(\n      "
																		]
																	},
																	{
																		"r": "256",
																		"s": [
																			{
																				"s": [
																					{
																						"r": "243",
																						"s": [
																							{
																								"r": "242",
																								"s": [
																									{
																										"r": "242",
																										"s": [
																											{
																												"value": [
																													"[",
																													"Condition",
																													"]"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" ",
																									"C"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"\n        "
																				]
																			},
																			{
																				"r": "255",
																				"s": [
																					{
																						"value": [
																							"where "
																						]
																					},
																					{
																						"r": "255",
																						"s": [
																							{
																								"r": "250",
																								"s": [
																									{
																										"r": "246",
																										"s": [
																											{
																												"r": "245",
																												"s": [
																													{
																														"r": "244",
																														"s": [
																															{
																																"value": [
																																	"C"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "245",
																														"s": [
																															{
																																"value": [
																																	"clinicalStatus"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "246",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" in "
																										]
																									},
																									{
																										"r": "249",
																										"s": [
																											{
																												"value": [
																													"{ "
																												]
																											},
																											{
																												"r": "247",
																												"s": [
																													{
																														"value": [
																															"'active'"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													", "
																												]
																											},
																											{
																												"r": "248",
																												"s": [
																													{
																														"value": [
																															"'recurrence'"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													" }"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"\n        and "
																								]
																							},
																							{
																								"r": "254",
																								"s": [
																									{
																										"r": "252",
																										"s": [
																											{
																												"r": "251",
																												"s": [
																													{
																														"value": [
																															"C"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "252",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" in "
																										]
																									},
																									{
																										"r": "253",
																										"s": [
																											{
																												"value": [
																													"\"End of Life Conditions\""
																												]
																											}
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"\n    )"
																		]
																	}
																]
															},
															{
																"value": [
																	"\n    union\n    "
																]
															},
															{
																"r": "271",
																"s": [
																	{
																		"value": [
																			"(\n      "
																		]
																	},
																	{
																		"r": "271",
																		"s": [
																			{
																				"s": [
																					{
																						"r": "258",
																						"s": [
																							{
																								"r": "257",
																								"s": [
																									{
																										"r": "257",
																										"s": [
																											{
																												"value": [
																													"[",
																													"Condition",
																													"]"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" ",
																									"C"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"\n        "
																				]
																			},
																			{
																				"r": "270",
																				"s": [
																					{
																						"value": [
																							"where "
																						]
																					},
																					{
																						"r": "270",
																						"s": [
																							{
																								"r": "265",
																								"s": [
																									{
																										"r": "261",
																										"s": [
																											{
																												"r": "260",
																												"s": [
																													{
																														"r": "259",
																														"s": [
																															{
																																"value": [
																																	"C"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "260",
																														"s": [
																															{
																																"value": [
																																	"clinicalStatus"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "261",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" in "
																										]
																									},
																									{
																										"r": "264",
																										"s": [
																											{
																												"value": [
																													"{ "
																												]
																											},
																											{
																												"r": "262",
																												"s": [
																													{
																														"value": [
																															"'active'"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													", "
																												]
																											},
																											{
																												"r": "263",
																												"s": [
																													{
																														"value": [
																															"'recurrence'"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													" }"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"\n        and "
																								]
																							},
																							{
																								"r": "269",
																								"s": [
																									{
																										"r": "267",
																										"s": [
																											{
																												"r": "266",
																												"s": [
																													{
																														"value": [
																															"C"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "267",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" in "
																										]
																									},
																									{
																										"r": "268",
																										"s": [
																											{
																												"value": [
																													"\"Limited Life Expectancy Conditions\""
																												]
																											}
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"\n    )"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n  )"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "273",
						"locator": "132:3-144:3",
						"type": "Exists",
						"operand": {
							"localId": "272",
							"locator": "132:10-144:3",
							"type": "Union",
							"operand": [
								{
									"localId": "256",
									"locator": "133:5-137:5",
									"type": "Query",
									"source": [
										{
											"localId": "243",
											"locator": "134:7-134:19",
											"alias": "C",
											"expression": {
												"localId": "242",
												"locator": "134:7-134:17",
												"dataType": "{http://hl7.org/fhir}Condition",
												"type": "Retrieve"
											}
										}
									],
									"relationship": [],
									"where": {
										"localId": "255",
										"locator": "135:9-136:46",
										"type": "And",
										"operand": [
											{
												"localId": "250",
												"locator": "135:15-135:66",
												"type": "In",
												"operand": [
													{
														"localId": "246",
														"locator": "135:15-135:36",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "245",
															"locator": "135:15-135:30",
															"path": "clinicalStatus",
															"scope": "C",
															"type": "Property"
														}
													},
													{
														"localId": "249",
														"locator": "135:41-135:66",
														"type": "List",
														"element": [
															{
																"localId": "247",
																"locator": "135:43-135:50",
																"valueType": "{urn:hl7-org:elm-types:r1}String",
																"value": "active",
																"type": "Literal"
															},
															{
																"localId": "248",
																"locator": "135:53-135:64",
																"valueType": "{urn:hl7-org:elm-types:r1}String",
																"value": "recurrence",
																"type": "Literal"
															}
														]
													}
												]
											},
											{
												"localId": "254",
												"locator": "136:13-136:46",
												"type": "InValueSet",
												"code": {
													"name": "ToConcept",
													"libraryName": "FHIRHelpers",
													"type": "FunctionRef",
													"operand": [
														{
															"localId": "252",
															"locator": "136:13-136:18",
															"path": "code",
															"scope": "C",
															"type": "Property"
														}
													]
												},
												"valueset": {
													"localId": "253",
													"locator": "136:23-136:46",
													"name": "End of Life Conditions"
												}
											}
										]
									}
								},
								{
									"localId": "271",
									"locator": "139:5-143:5",
									"type": "Query",
									"source": [
										{
											"localId": "258",
											"locator": "140:7-140:19",
											"alias": "C",
											"expression": {
												"localId": "257",
												"locator": "140:7-140:17",
												"dataType": "{http://hl7.org/fhir}Condition",
												"type": "Retrieve"
											}
										}
									],
									"relationship": [],
									"where": {
										"localId": "270",
										"locator": "141:9-142:58",
										"type": "And",
										"operand": [
											{
												"localId": "265",
												"locator": "141:15-141:66",
												"type": "In",
												"operand": [
													{
														"localId": "261",
														"locator": "141:15-141:36",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "260",
															"locator": "141:15-141:30",
															"path": "clinicalStatus",
															"scope": "C",
															"type": "Property"
														}
													},
													{
														"localId": "264",
														"locator": "141:41-141:66",
														"type": "List",
														"element": [
															{
																"localId": "262",
																"locator": "141:43-141:50",
																"valueType": "{urn:hl7-org:elm-types:r1}String",
																"value": "active",
																"type": "Literal"
															},
															{
																"localId": "263",
																"locator": "141:53-141:64",
																"valueType": "{urn:hl7-org:elm-types:r1}String",
																"value": "recurrence",
																"type": "Literal"
															}
														]
													}
												]
											},
											{
												"localId": "269",
												"locator": "142:13-142:58",
												"type": "InValueSet",
												"code": {
													"name": "ToConcept",
													"libraryName": "FHIRHelpers",
													"type": "FunctionRef",
													"operand": [
														{
															"localId": "267",
															"locator": "142:13-142:18",
															"path": "code",
															"scope": "C",
															"type": "Property"
														}
													]
												},
												"valueset": {
													"localId": "268",
													"locator": "142:23-142:58",
													"name": "Limited Life Expectancy Conditions"
												}
											}
										]
									}
								}
							]
						}
					}
				},
				{
					"localId": "298",
					"locator": "336:1-342:3",
					"name": "ToCode",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "298",
								"s": [
									{
										"value": [
											"define function ",
											"ToCode",
											"(",
											"coding",
											" "
										]
									},
									{
										"r": "284",
										"s": [
											{
												"value": [
													"FHIR",
													".",
													"Coding"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "297",
										"s": [
											{
												"r": "297",
												"s": [
													{
														"value": [
															"System",
															".",
															"Code",
															" {\n    "
														]
													},
													{
														"s": [
															{
																"value": [
																	"code",
																	": "
																]
															},
															{
																"r": "287",
																"s": [
																	{
																		"r": "286",
																		"s": [
																			{
																				"r": "285",
																				"s": [
																					{
																						"value": [
																							"coding"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "286",
																				"s": [
																					{
																						"value": [
																							"code"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"."
																		]
																	},
																	{
																		"r": "287",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															",\n    "
														]
													},
													{
														"s": [
															{
																"value": [
																	"system",
																	": "
																]
															},
															{
																"r": "290",
																"s": [
																	{
																		"r": "289",
																		"s": [
																			{
																				"r": "288",
																				"s": [
																					{
																						"value": [
																							"coding"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "289",
																				"s": [
																					{
																						"value": [
																							"system"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"."
																		]
																	},
																	{
																		"r": "290",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															",\n    "
														]
													},
													{
														"s": [
															{
																"value": [
																	"version",
																	": "
																]
															},
															{
																"r": "293",
																"s": [
																	{
																		"r": "292",
																		"s": [
																			{
																				"r": "291",
																				"s": [
																					{
																						"value": [
																							"coding"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "292",
																				"s": [
																					{
																						"value": [
																							"version"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"."
																		]
																	},
																	{
																		"r": "293",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															",\n    "
														]
													},
													{
														"s": [
															{
																"value": [
																	"display",
																	": "
																]
															},
															{
																"r": "296",
																"s": [
																	{
																		"r": "295",
																		"s": [
																			{
																				"r": "294",
																				"s": [
																					{
																						"value": [
																							"coding"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "295",
																				"s": [
																					{
																						"value": [
																							"display"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"."
																		]
																	},
																	{
																		"r": "296",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n  }"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "297",
						"locator": "337:3-342:3",
						"classType": "{urn:hl7-org:elm-types:r1}Code",
						"type": "Instance",
						"element": [
							{
								"name": "code",
								"value": {
									"localId": "287",
									"locator": "338:11-338:27",
									"path": "value",
									"type": "Property",
									"source": {
										"localId": "286",
										"locator": "338:11-338:21",
										"path": "code",
										"type": "Property",
										"source": {
											"localId": "285",
											"locator": "338:11-338:16",
											"name": "coding",
											"type": "OperandRef"
										}
									}
								}
							},
							{
								"name": "system",
								"value": {
									"localId": "290",
									"locator": "339:13-339:31",
									"path": "value",
									"type": "Property",
									"source": {
										"localId": "289",
										"locator": "339:13-339:25",
										"path": "system",
										"type": "Property",
										"source": {
											"localId": "288",
											"locator": "339:13-339:18",
											"name": "coding",
											"type": "OperandRef"
										}
									}
								}
							},
							{
								"name": "version",
								"value": {
									"localId": "293",
									"locator": "340:14-340:33",
									"path": "value",
									"type": "Property",
									"source": {
										"localId": "292",
										"locator": "340:14-340:27",
										"path": "version",
										"type": "Property",
										"source": {
											"localId": "291",
											"locator": "340:14-340:19",
											"name": "coding",
											"type": "OperandRef"
										}
									}
								}
							},
							{
								"name": "display",
								"value": {
									"localId": "296",
									"locator": "341:14-341:33",
									"path": "value",
									"type": "Property",
									"source": {
										"localId": "295",
										"locator": "341:14-341:27",
										"path": "display",
										"type": "Property",
										"source": {
											"localId": "294",
											"locator": "341:14-341:19",
											"name": "coding",
											"type": "OperandRef"
										}
									}
								}
							}
						]
					},
					"operand": [
						{
							"name": "coding",
							"operandTypeSpecifier": {
								"localId": "284",
								"locator": "336:31-336:41",
								"name": "{http://hl7.org/fhir}Coding",
								"type": "NamedTypeSpecifier"
							}
						}
					]
				},
				{
					"localId": "357",
					"locator": "352:1-355:81",
					"name": "ToQuantity",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "357",
								"s": [
									{
										"value": [
											"define function ",
											"ToQuantity",
											"(",
											"quantity",
											" "
										]
									},
									{
										"r": "337",
										"s": [
											{
												"value": [
													"FHIR",
													".",
													"Quantity"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "356",
										"s": [
											{
												"r": "356",
												"s": [
													{
														"value": [
															"if "
														]
													},
													{
														"r": "341",
														"s": [
															{
																"r": "340",
																"s": [
																	{
																		"r": "339",
																		"s": [
																			{
																				"r": "338",
																				"s": [
																					{
																						"value": [
																							"quantity"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "339",
																				"s": [
																					{
																						"value": [
																							"code"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"."
																		]
																	},
																	{
																		"r": "340",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" is not null"
																]
															}
														]
													},
													{
														"value": [
															"\n    then "
														]
													},
													{
														"r": "348",
														"s": [
															{
																"value": [
																	"System",
																	".",
																	"Quantity",
																	" { "
																]
															},
															{
																"s": [
																	{
																		"value": [
																			"value",
																			": "
																		]
																	},
																	{
																		"r": "344",
																		"s": [
																			{
																				"r": "343",
																				"s": [
																					{
																						"r": "342",
																						"s": [
																							{
																								"value": [
																									"quantity"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "343",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "344",
																				"s": [
																					{
																						"value": [
																							"value"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	", "
																]
															},
															{
																"s": [
																	{
																		"value": [
																			"unit",
																			": "
																		]
																	},
																	{
																		"r": "347",
																		"s": [
																			{
																				"r": "346",
																				"s": [
																					{
																						"r": "345",
																						"s": [
																							{
																								"value": [
																									"quantity"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "346",
																						"s": [
																							{
																								"value": [
																									"code"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "347",
																				"s": [
																					{
																						"value": [
																							"value"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" }"
																]
															}
														]
													},
													{
														"value": [
															"\n  else "
														]
													},
													{
														"r": "355",
														"s": [
															{
																"value": [
																	"System",
																	".",
																	"Quantity",
																	" { "
																]
															},
															{
																"s": [
																	{
																		"value": [
																			"value",
																			": "
																		]
																	},
																	{
																		"r": "351",
																		"s": [
																			{
																				"r": "350",
																				"s": [
																					{
																						"r": "349",
																						"s": [
																							{
																								"value": [
																									"quantity"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "350",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "351",
																				"s": [
																					{
																						"value": [
																							"value"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	", "
																]
															},
															{
																"s": [
																	{
																		"value": [
																			"unit",
																			": "
																		]
																	},
																	{
																		"r": "354",
																		"s": [
																			{
																				"r": "353",
																				"s": [
																					{
																						"r": "352",
																						"s": [
																							{
																								"value": [
																									"quantity"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "353",
																						"s": [
																							{
																								"value": [
																									"unit"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "354",
																				"s": [
																					{
																						"value": [
																							"value"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" }"
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "356",
						"locator": "353:3-355:81",
						"type": "If",
						"condition": {
							"asType": "{urn:hl7-org:elm-types:r1}Boolean",
							"type": "As",
							"operand": {
								"localId": "341",
								"locator": "353:6-353:36",
								"type": "Not",
								"operand": {
									"locator": "353:6-353:36",
									"type": "IsNull",
									"operand": {
										"localId": "340",
										"locator": "353:6-353:24",
										"path": "value",
										"type": "Property",
										"source": {
											"localId": "339",
											"locator": "353:6-353:18",
											"path": "code",
											"type": "Property",
											"source": {
												"localId": "338",
												"locator": "353:6-353:13",
												"name": "quantity",
												"type": "OperandRef"
											}
										}
									}
								}
							}
						},
						"then": {
							"localId": "348",
							"locator": "354:10-354:83",
							"classType": "{urn:hl7-org:elm-types:r1}Quantity",
							"type": "Instance",
							"element": [
								{
									"name": "value",
									"value": {
										"localId": "344",
										"locator": "354:35-354:54",
										"path": "value",
										"type": "Property",
										"source": {
											"localId": "343",
											"locator": "354:35-354:48",
											"path": "value",
											"type": "Property",
											"source": {
												"localId": "342",
												"locator": "354:35-354:42",
												"name": "quantity",
												"type": "OperandRef"
											}
										}
									}
								},
								{
									"name": "unit",
									"value": {
										"localId": "347",
										"locator": "354:63-354:81",
										"path": "value",
										"type": "Property",
										"source": {
											"localId": "346",
											"locator": "354:63-354:75",
											"path": "code",
											"type": "Property",
											"source": {
												"localId": "345",
												"locator": "354:63-354:70",
												"name": "quantity",
												"type": "OperandRef"
											}
										}
									}
								}
							]
						},
						"else": {
							"localId": "355",
							"locator": "355:8-355:81",
							"classType": "{urn:hl7-org:elm-types:r1}Quantity",
							"type": "Instance",
							"element": [
								{
									"name": "value",
									"value": {
										"localId": "351",
										"locator": "355:33-355:52",
										"path": "value",
										"type": "Property",
										"source": {
											"localId": "350",
											"locator": "355:33-355:46",
											"path": "value",
											"type": "Property",
											"source": {
												"localId": "349",
												"locator": "355:33-355:40",
												"name": "quantity",
												"type": "OperandRef"
											}
										}
									}
								},
								{
									"name": "unit",
									"value": {
										"localId": "354",
										"locator": "355:61-355:79",
										"path": "value",
										"type": "Property",
										"source": {
											"localId": "353",
											"locator": "355:61-355:73",
											"path": "unit",
											"type": "Property",
											"source": {
												"localId": "352",
												"locator": "355:61-355:68",
												"name": "quantity",
												"type": "OperandRef"
											}
										}
									}
								}
							]
						}
					},
					"operand": [
						{
							"name": "quantity",
							"operandTypeSpecifier": {
								"localId": "337",
								"locator": "352:37-352:49",
								"name": "{http://hl7.org/fhir}Quantity",
								"type": "NamedTypeSpecifier"
							}
						}
					]
				},
				{
					"localId": "457",
					"locator": "188:1-231:5",
					"name": "Prescriptions",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "457",
								"s": [
									{
										"value": [
											"define function ",
											"Prescriptions",
											"(",
											"Orders",
											" "
										]
									},
									{
										"r": "276",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "275",
												"s": [
													{
														"value": [
															"MedicationRequest"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "456",
										"s": [
											{
												"r": "456",
												"s": [
													{
														"s": [
															{
																"r": "278",
																"s": [
																	{
																		"r": "277",
																		"s": [
																			{
																				"s": [
																					{
																						"value": [
																							"Orders"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"O"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"s": [
															{
																"value": [
																	"let\n      // NOTE: Assuming medication is specified as a CodeableConcept with a single RxNorm code\n      "
																]
															},
															{
																"r": "300",
																"s": [
																	{
																		"value": [
																			"rxNormCode",
																			": "
																		]
																	},
																	{
																		"r": "299",
																		"s": [
																			{
																				"value": [
																					"ToCode",
																					"("
																				]
																			},
																			{
																				"r": "283",
																				"s": [
																					{
																						"r": "281",
																						"s": [
																							{
																								"r": "280",
																								"s": [
																									{
																										"r": "279",
																										"s": [
																											{
																												"value": [
																													"O"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "280",
																										"s": [
																											{
																												"value": [
																													"medication"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "281",
																								"s": [
																									{
																										"value": [
																											"coding"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"r": "282",
																						"value": [
																							"[",
																							"0",
																							"]"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "304",
																"s": [
																	{
																		"value": [
																			"medicationName",
																			": "
																		]
																	},
																	{
																		"r": "303",
																		"s": [
																			{
																				"r": "301",
																				"s": [
																					{
																						"value": [
																							"OMTKLogic"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "303",
																				"s": [
																					{
																						"value": [
																							"GetMedicationName",
																							"("
																						]
																					},
																					{
																						"r": "302",
																						"s": [
																							{
																								"value": [
																									"rxNormCode"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      // NOTE: Assuming a single dosage instruction element\n      "
																]
															},
															{
																"r": "309",
																"s": [
																	{
																		"value": [
																			"dosageInstruction",
																			": "
																		]
																	},
																	{
																		"r": "308",
																		"s": [
																			{
																				"r": "306",
																				"s": [
																					{
																						"r": "305",
																						"s": [
																							{
																								"value": [
																									"O"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "306",
																						"s": [
																							{
																								"value": [
																									"dosageInstruction"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"r": "307",
																				"value": [
																					"[",
																					"0",
																					"]"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "313",
																"s": [
																	{
																		"value": [
																			"repeat",
																			": "
																		]
																	},
																	{
																		"r": "312",
																		"s": [
																			{
																				"r": "311",
																				"s": [
																					{
																						"r": "310",
																						"s": [
																							{
																								"value": [
																									"dosageInstruction"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "311",
																						"s": [
																							{
																								"value": [
																									"timing"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "312",
																				"s": [
																					{
																						"value": [
																							"repeat"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "321",
																"s": [
																	{
																		"value": [
																			"frequency",
																			": "
																		]
																	},
																	{
																		"r": "320",
																		"s": [
																			{
																				"value": [
																					"Coalesce",
																					"("
																				]
																			},
																			{
																				"r": "316",
																				"s": [
																					{
																						"r": "315",
																						"s": [
																							{
																								"r": "314",
																								"s": [
																									{
																										"value": [
																											"repeat"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "315",
																								"s": [
																									{
																										"value": [
																											"frequencyMax"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "316",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					", "
																				]
																			},
																			{
																				"r": "319",
																				"s": [
																					{
																						"r": "318",
																						"s": [
																							{
																								"r": "317",
																								"s": [
																									{
																										"value": [
																											"repeat"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "318",
																								"s": [
																									{
																										"value": [
																											"frequency"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "319",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "329",
																"s": [
																	{
																		"value": [
																			"period",
																			": "
																		]
																	},
																	{
																		"r": "328",
																		"s": [
																			{
																				"value": [
																					"System",
																					".",
																					"Quantity",
																					" { "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"value",
																							": "
																						]
																					},
																					{
																						"r": "324",
																						"s": [
																							{
																								"r": "323",
																								"s": [
																									{
																										"r": "322",
																										"s": [
																											{
																												"value": [
																													"repeat"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "323",
																										"s": [
																											{
																												"value": [
																													"period"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "324",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					", "
																				]
																			},
																			{
																				"s": [
																					{
																						"value": [
																							"unit",
																							": "
																						]
																					},
																					{
																						"r": "327",
																						"s": [
																							{
																								"r": "326",
																								"s": [
																									{
																										"r": "325",
																										"s": [
																											{
																												"value": [
																													"repeat"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "326",
																										"s": [
																											{
																												"value": [
																													"periodUnit"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "327",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" }"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "381",
																"s": [
																	{
																		"value": [
																			"doseDescription",
																			":\n        "
																		]
																	},
																	{
																		"r": "380",
																		"s": [
																			{
																				"value": [
																					"Coalesce",
																					"(\n          // There should be a conversion from FHIR.SimpleQuantity to System.Quantity\n          "
																				]
																			},
																			{
																				"r": "378",
																				"s": [
																					{
																						"value": [
																							"if "
																						]
																					},
																					{
																						"r": "333",
																						"s": [
																							{
																								"r": "331",
																								"s": [
																									{
																										"r": "330",
																										"s": [
																											{
																												"value": [
																													"dosageInstruction"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "331",
																										"s": [
																											{
																												"value": [
																													"dose"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" is "
																								]
																							},
																							{
																								"r": "332",
																								"s": [
																									{
																										"value": [
																											"FHIR",
																											".",
																											"Range"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"\n            then "
																						]
																					},
																					{
																						"r": "373",
																						"s": [
																							{
																								"r": "367",
																								"s": [
																									{
																										"r": "361",
																										"s": [
																											{
																												"r": "359",
																												"s": [
																													{
																														"value": [
																															"ToString",
																															"("
																														]
																													},
																													{
																														"r": "358",
																														"s": [
																															{
																																"value": [
																																	"ToQuantity",
																																	"("
																																]
																															},
																															{
																																"r": "336",
																																"s": [
																																	{
																																		"r": "335",
																																		"s": [
																																			{
																																				"r": "334",
																																				"s": [
																																					{
																																						"value": [
																																							"dosageInstruction"
																																						]
																																					}
																																				]
																																			},
																																			{
																																				"value": [
																																					"."
																																				]
																																			},
																																			{
																																				"r": "335",
																																				"s": [
																																					{
																																						"value": [
																																							"dose"
																																						]
																																					}
																																				]
																																			}
																																		]
																																	},
																																	{
																																		"value": [
																																			"."
																																		]
																																	},
																																	{
																																		"r": "336",
																																		"s": [
																																			{
																																				"value": [
																																					"low"
																																				]
																																			}
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	")"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															")"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"\n                          + "
																												]
																											},
																											{
																												"r": "360",
																												"s": [
																													{
																														"value": [
																															"'-'"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" + "
																										]
																									},
																									{
																										"r": "366",
																										"s": [
																											{
																												"value": [
																													"ToString",
																													"("
																												]
																											},
																											{
																												"r": "365",
																												"s": [
																													{
																														"value": [
																															"ToQuantity",
																															"("
																														]
																													},
																													{
																														"r": "364",
																														"s": [
																															{
																																"r": "363",
																																"s": [
																																	{
																																		"r": "362",
																																		"s": [
																																			{
																																				"value": [
																																					"dosageInstruction"
																																				]
																																			}
																																		]
																																	},
																																	{
																																		"value": [
																																			"."
																																		]
																																	},
																																	{
																																		"r": "363",
																																		"s": [
																																			{
																																				"value": [
																																					"dose"
																																				]
																																			}
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	"."
																																]
																															},
																															{
																																"r": "364",
																																"s": [
																																	{
																																		"value": [
																																			"high"
																																		]
																																	}
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															")"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													")"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"\n                          + "
																								]
																							},
																							{
																								"r": "372",
																								"s": [
																									{
																										"r": "371",
																										"s": [
																											{
																												"r": "370",
																												"s": [
																													{
																														"r": "369",
																														"s": [
																															{
																																"r": "368",
																																"s": [
																																	{
																																		"value": [
																																			"dosageInstruction"
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	"."
																																]
																															},
																															{
																																"r": "369",
																																"s": [
																																	{
																																		"value": [
																																			"dose"
																																		]
																																	}
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "370",
																														"s": [
																															{
																																"value": [
																																	"high"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "371",
																												"s": [
																													{
																														"value": [
																															"unit"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "372",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"\n            else "
																						]
																					},
																					{
																						"r": "377",
																						"s": [
																							{
																								"value": [
																									"ToString",
																									"("
																								]
																							},
																							{
																								"r": "376",
																								"s": [
																									{
																										"value": [
																											"ToQuantity",
																											"("
																										]
																									},
																									{
																										"r": "375",
																										"s": [
																											{
																												"r": "374",
																												"s": [
																													{
																														"value": [
																															"dosageInstruction"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "375",
																												"s": [
																													{
																														"value": [
																															"dose"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n            "
																				]
																			},
																			{
																				"r": "379",
																				"s": [
																					{
																						"value": [
																							"''"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"\n        )"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "399",
																"s": [
																	{
																		"value": [
																			"frequencyDescription",
																			":\n        "
																		]
																	},
																	{
																		"r": "398",
																		"s": [
																			{
																				"r": "387",
																				"s": [
																					{
																						"value": [
																							"ToString",
																							"("
																						]
																					},
																					{
																						"r": "386",
																						"s": [
																							{
																								"r": "385",
																								"s": [
																									{
																										"r": "384",
																										"s": [
																											{
																												"r": "383",
																												"s": [
																													{
																														"r": "382",
																														"s": [
																															{
																																"value": [
																																	"dosageInstruction"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "383",
																														"s": [
																															{
																																"value": [
																																	"timing"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "384",
																												"s": [
																													{
																														"value": [
																															"repeat"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "385",
																										"s": [
																											{
																												"value": [
																													"frequency"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "386",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" +\n          "
																				]
																			},
																			{
																				"r": "397",
																				"s": [
																					{
																						"value": [
																							"Coalesce",
																							"(\n            "
																						]
																					},
																					{
																						"r": "395",
																						"s": [
																							{
																								"r": "388",
																								"s": [
																									{
																										"value": [
																											"'-'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" + "
																								]
																							},
																							{
																								"r": "394",
																								"s": [
																									{
																										"value": [
																											"ToString",
																											"("
																										]
																									},
																									{
																										"r": "393",
																										"s": [
																											{
																												"r": "392",
																												"s": [
																													{
																														"r": "391",
																														"s": [
																															{
																																"r": "390",
																																"s": [
																																	{
																																		"r": "389",
																																		"s": [
																																			{
																																				"value": [
																																					"dosageInstruction"
																																				]
																																			}
																																		]
																																	},
																																	{
																																		"value": [
																																			"."
																																		]
																																	},
																																	{
																																		"r": "390",
																																		"s": [
																																			{
																																				"value": [
																																					"timing"
																																				]
																																			}
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	"."
																																]
																															},
																															{
																																"r": "391",
																																"s": [
																																	{
																																		"value": [
																																			"repeat"
																																		]
																																	}
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "392",
																														"s": [
																															{
																																"value": [
																																	"frequencyMax"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "393",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							",\n            "
																						]
																					},
																					{
																						"r": "396",
																						"s": [
																							{
																								"value": [
																									"''"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"\n          )"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"r": "455",
														"s": [
															{
																"value": [
																	"return "
																]
															},
															{
																"r": "454",
																"s": [
																	{
																		"value": [
																			"{\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"rxNormCode",
																					": "
																				]
																			},
																			{
																				"r": "400",
																				"s": [
																					{
																						"value": [
																							"rxNormCode"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"isDraft",
																					": "
																				]
																			},
																			{
																				"r": "405",
																				"s": [
																					{
																						"r": "403",
																						"s": [
																							{
																								"r": "402",
																								"s": [
																									{
																										"r": "401",
																										"s": [
																											{
																												"value": [
																													"O"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "402",
																										"s": [
																											{
																												"value": [
																													"status"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "403",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" ",
																							"=",
																							" "
																						]
																					},
																					{
																						"r": "404",
																						"s": [
																							{
																								"value": [
																									"'draft'"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      // NOTE: Assuming asNeeded is expressed as a boolean\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"isPRN",
																					": "
																				]
																			},
																			{
																				"r": "408",
																				"s": [
																					{
																						"r": "407",
																						"s": [
																							{
																								"r": "406",
																								"s": [
																									{
																										"value": [
																											"dosageInstruction"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "407",
																								"s": [
																									{
																										"value": [
																											"asNeeded"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "408",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"prescription",
																					":\n        "
																				]
																			},
																			{
																				"r": "435",
																				"s": [
																					{
																						"value": [
																							"if "
																						]
																					},
																					{
																						"r": "411",
																						"s": [
																							{
																								"r": "410",
																								"s": [
																									{
																										"r": "409",
																										"s": [
																											{
																												"value": [
																													"dosageInstruction"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "410",
																										"s": [
																											{
																												"value": [
																													"text"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" is not null"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" then\n          "
																						]
																					},
																					{
																						"r": "418",
																						"s": [
																							{
																								"r": "414",
																								"s": [
																									{
																										"r": "412",
																										"s": [
																											{
																												"value": [
																													"medicationName"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" + "
																										]
																									},
																									{
																										"r": "413",
																										"s": [
																											{
																												"value": [
																													"' '"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" + "
																								]
																							},
																							{
																								"r": "417",
																								"s": [
																									{
																										"r": "416",
																										"s": [
																											{
																												"r": "415",
																												"s": [
																													{
																														"value": [
																															"dosageInstruction"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "416",
																												"s": [
																													{
																														"value": [
																															"text"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "417",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"\n        else\n          // TODO: Shouldn't need the .value here on asNeededBoolean\n          "
																						]
																					},
																					{
																						"r": "434",
																						"s": [
																							{
																								"r": "427",
																								"s": [
																									{
																										"r": "425",
																										"s": [
																											{
																												"r": "423",
																												"s": [
																													{
																														"r": "421",
																														"s": [
																															{
																																"r": "419",
																																"s": [
																																	{
																																		"value": [
																																			"medicationName"
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	" + "
																																]
																															},
																															{
																																"r": "420",
																																"s": [
																																	{
																																		"value": [
																																			"' '"
																																		]
																																	}
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															" + "
																														]
																													},
																													{
																														"r": "422",
																														"s": [
																															{
																																"value": [
																																	"doseDescription"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													" + "
																												]
																											},
																											{
																												"r": "424",
																												"s": [
																													{
																														"value": [
																															"' q'"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" + "
																										]
																									},
																									{
																										"r": "426",
																										"s": [
																											{
																												"value": [
																													"frequencyDescription"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" + "
																								]
																							},
																							{
																								"r": "433",
																								"s": [
																									{
																										"value": [
																											"("
																										]
																									},
																									{
																										"r": "433",
																										"s": [
																											{
																												"value": [
																													"if "
																												]
																											},
																											{
																												"r": "430",
																												"s": [
																													{
																														"r": "429",
																														"s": [
																															{
																																"r": "428",
																																"s": [
																																	{
																																		"value": [
																																			"dosageInstruction"
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	"."
																																]
																															},
																															{
																																"r": "429",
																																"s": [
																																	{
																																		"value": [
																																			"asNeeded"
																																		]
																																	}
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "430",
																														"s": [
																															{
																																"value": [
																																	"value"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													" then "
																												]
																											},
																											{
																												"r": "431",
																												"s": [
																													{
																														"value": [
																															"' PRN'"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													" else "
																												]
																											},
																											{
																												"r": "432",
																												"s": [
																													{
																														"value": [
																															"''"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      // TODO: Shouldn't need the ToQuantity here...\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"dose",
																					": "
																				]
																			},
																			{
																				"r": "447",
																				"s": [
																					{
																						"value": [
																							"if "
																						]
																					},
																					{
																						"r": "439",
																						"s": [
																							{
																								"r": "437",
																								"s": [
																									{
																										"r": "436",
																										"s": [
																											{
																												"value": [
																													"dosageInstruction"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "437",
																										"s": [
																											{
																												"value": [
																													"dose"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" is "
																								]
																							},
																							{
																								"r": "438",
																								"s": [
																									{
																										"value": [
																											"FHIR",
																											".",
																											"Range"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"\n            then "
																						]
																					},
																					{
																						"r": "443",
																						"s": [
																							{
																								"value": [
																									"ToQuantity",
																									"("
																								]
																							},
																							{
																								"r": "442",
																								"s": [
																									{
																										"r": "441",
																										"s": [
																											{
																												"r": "440",
																												"s": [
																													{
																														"value": [
																															"dosageInstruction"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "441",
																												"s": [
																													{
																														"value": [
																															"dose"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "442",
																										"s": [
																											{
																												"value": [
																													"high"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"\n            else "
																						]
																					},
																					{
																						"r": "446",
																						"s": [
																							{
																								"value": [
																									"ToQuantity",
																									"("
																								]
																							},
																							{
																								"r": "445",
																								"s": [
																									{
																										"r": "444",
																										"s": [
																											{
																												"value": [
																													"dosageInstruction"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "445",
																										"s": [
																											{
																												"value": [
																													"dose"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"dosesPerDay",
																					": "
																				]
																			},
																			{
																				"r": "453",
																				"s": [
																					{
																						"value": [
																							"Coalesce",
																							"("
																						]
																					},
																					{
																						"r": "451",
																						"s": [
																							{
																								"r": "448",
																								"s": [
																									{
																										"value": [
																											"OMTKLogic"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "451",
																								"s": [
																									{
																										"value": [
																											"ToDaily",
																											"("
																										]
																									},
																									{
																										"r": "449",
																										"s": [
																											{
																												"value": [
																													"frequency"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											", "
																										]
																									},
																									{
																										"r": "450",
																										"s": [
																											{
																												"value": [
																													"period"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"r": "452",
																						"value": [
																							", ",
																							"1.0",
																							")"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"\n    }"
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "456",
						"locator": "189:3-231:5",
						"type": "Query",
						"source": [
							{
								"localId": "278",
								"locator": "189:3-189:10",
								"alias": "O",
								"expression": {
									"localId": "277",
									"locator": "189:3-189:8",
									"name": "Orders",
									"type": "OperandRef"
								}
							}
						],
						"let": [
							{
								"localId": "300",
								"locator": "192:7-192:48",
								"identifier": "rxNormCode",
								"expression": {
									"localId": "299",
									"locator": "192:19-192:48",
									"name": "ToCode",
									"type": "FunctionRef",
									"operand": [
										{
											"localId": "283",
											"locator": "192:26-192:47",
											"type": "Indexer",
											"operand": [
												{
													"localId": "281",
													"locator": "192:26-192:44",
													"path": "coding",
													"type": "Property",
													"source": {
														"localId": "280",
														"locator": "192:26-192:37",
														"path": "medication",
														"scope": "O",
														"type": "Property"
													}
												},
												{
													"localId": "282",
													"locator": "192:46",
													"valueType": "{urn:hl7-org:elm-types:r1}Integer",
													"value": "0",
													"type": "Literal"
												}
											]
										}
									]
								}
							},
							{
								"localId": "304",
								"locator": "193:7-193:61",
								"identifier": "medicationName",
								"expression": {
									"localId": "303",
									"locator": "193:23-193:61",
									"name": "GetMedicationName",
									"libraryName": "OMTKLogic",
									"type": "FunctionRef",
									"operand": [
										{
											"localId": "302",
											"locator": "193:51-193:60",
											"name": "rxNormCode",
											"type": "QueryLetRef"
										}
									]
								}
							},
							{
								"localId": "309",
								"locator": "195:7-195:47",
								"identifier": "dosageInstruction",
								"expression": {
									"localId": "308",
									"locator": "195:26-195:47",
									"type": "Indexer",
									"operand": [
										{
											"localId": "306",
											"locator": "195:26-195:44",
											"path": "dosageInstruction",
											"scope": "O",
											"type": "Property"
										},
										{
											"localId": "307",
											"locator": "195:46",
											"valueType": "{urn:hl7-org:elm-types:r1}Integer",
											"value": "0",
											"type": "Literal"
										}
									]
								}
							},
							{
								"localId": "313",
								"locator": "196:7-196:45",
								"identifier": "repeat",
								"expression": {
									"localId": "312",
									"locator": "196:15-196:45",
									"path": "repeat",
									"type": "Property",
									"source": {
										"localId": "311",
										"locator": "196:15-196:38",
										"path": "timing",
										"type": "Property",
										"source": {
											"localId": "310",
											"locator": "196:15-196:31",
											"name": "dosageInstruction",
											"type": "QueryLetRef"
										}
									}
								}
							},
							{
								"localId": "321",
								"locator": "197:7-197:76",
								"identifier": "frequency",
								"expression": {
									"localId": "320",
									"locator": "197:18-197:76",
									"type": "Coalesce",
									"operand": [
										{
											"localId": "316",
											"locator": "197:27-197:51",
											"path": "value",
											"type": "Property",
											"source": {
												"localId": "315",
												"locator": "197:27-197:45",
												"path": "frequencyMax",
												"type": "Property",
												"source": {
													"localId": "314",
													"locator": "197:27-197:32",
													"name": "repeat",
													"type": "QueryLetRef"
												}
											}
										},
										{
											"localId": "319",
											"locator": "197:54-197:75",
											"path": "value",
											"type": "Property",
											"source": {
												"localId": "318",
												"locator": "197:54-197:69",
												"path": "frequency",
												"type": "Property",
												"source": {
													"localId": "317",
													"locator": "197:54-197:59",
													"name": "repeat",
													"type": "QueryLetRef"
												}
											}
										}
									]
								}
							},
							{
								"localId": "329",
								"locator": "198:7-198:91",
								"identifier": "period",
								"expression": {
									"localId": "328",
									"locator": "198:15-198:91",
									"classType": "{urn:hl7-org:elm-types:r1}Quantity",
									"type": "Instance",
									"element": [
										{
											"name": "value",
											"value": {
												"localId": "324",
												"locator": "198:40-198:58",
												"path": "value",
												"type": "Property",
												"source": {
													"localId": "323",
													"locator": "198:40-198:52",
													"path": "period",
													"type": "Property",
													"source": {
														"localId": "322",
														"locator": "198:40-198:45",
														"name": "repeat",
														"type": "QueryLetRef"
													}
												}
											}
										},
										{
											"name": "unit",
											"value": {
												"localId": "327",
												"locator": "198:67-198:89",
												"path": "value",
												"type": "Property",
												"source": {
													"localId": "326",
													"locator": "198:67-198:83",
													"path": "periodUnit",
													"type": "Property",
													"source": {
														"localId": "325",
														"locator": "198:67-198:72",
														"name": "repeat",
														"type": "QueryLetRef"
													}
												}
											}
										}
									]
								}
							},
							{
								"localId": "381",
								"locator": "199:7-208:9",
								"identifier": "doseDescription",
								"expression": {
									"localId": "380",
									"locator": "200:9-208:9",
									"type": "Coalesce",
									"operand": [
										{
											"localId": "378",
											"locator": "202:11-206:61",
											"type": "If",
											"condition": {
												"asType": "{urn:hl7-org:elm-types:r1}Boolean",
												"type": "As",
												"operand": {
													"localId": "333",
													"locator": "202:14-202:49",
													"type": "Is",
													"operand": {
														"localId": "331",
														"locator": "202:14-202:35",
														"path": "dose",
														"type": "Property",
														"source": {
															"localId": "330",
															"locator": "202:14-202:30",
															"name": "dosageInstruction",
															"type": "QueryLetRef"
														}
													},
													"isTypeSpecifier": {
														"localId": "332",
														"locator": "202:40-202:49",
														"name": "{http://hl7.org/fhir}Range",
														"type": "NamedTypeSpecifier"
													}
												}
											},
											"then": {
												"localId": "373",
												"locator": "203:18-205:66",
												"type": "Concatenate",
												"operand": [
													{
														"localId": "367",
														"locator": "203:18-204:83",
														"type": "Concatenate",
														"operand": [
															{
																"localId": "361",
																"locator": "203:18-204:31",
																"type": "Concatenate",
																"operand": [
																	{
																		"localId": "359",
																		"locator": "203:18-203:65",
																		"type": "ToString",
																		"operand": {
																			"localId": "358",
																			"locator": "203:27-203:64",
																			"name": "ToQuantity",
																			"type": "FunctionRef",
																			"operand": [
																				{
																					"localId": "336",
																					"locator": "203:38-203:63",
																					"path": "low",
																					"type": "Property",
																					"source": {
																						"localId": "335",
																						"locator": "203:38-203:59",
																						"path": "dose",
																						"type": "Property",
																						"source": {
																							"localId": "334",
																							"locator": "203:38-203:54",
																							"name": "dosageInstruction",
																							"type": "QueryLetRef"
																						}
																					}
																				}
																			]
																		}
																	},
																	{
																		"localId": "360",
																		"locator": "204:29-204:31",
																		"valueType": "{urn:hl7-org:elm-types:r1}String",
																		"value": "-",
																		"type": "Literal"
																	}
																]
															},
															{
																"localId": "366",
																"locator": "204:35-204:83",
																"type": "ToString",
																"operand": {
																	"localId": "365",
																	"locator": "204:44-204:82",
																	"name": "ToQuantity",
																	"type": "FunctionRef",
																	"operand": [
																		{
																			"localId": "364",
																			"locator": "204:55-204:81",
																			"path": "high",
																			"type": "Property",
																			"source": {
																				"localId": "363",
																				"locator": "204:55-204:76",
																				"path": "dose",
																				"type": "Property",
																				"source": {
																					"localId": "362",
																					"locator": "204:55-204:71",
																					"name": "dosageInstruction",
																					"type": "QueryLetRef"
																				}
																			}
																		}
																	]
																}
															}
														]
													},
													{
														"localId": "372",
														"locator": "205:29-205:66",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "371",
															"locator": "205:29-205:60",
															"path": "unit",
															"type": "Property",
															"source": {
																"localId": "370",
																"locator": "205:29-205:55",
																"path": "high",
																"type": "Property",
																"source": {
																	"localId": "369",
																	"locator": "205:29-205:50",
																	"path": "dose",
																	"type": "Property",
																	"source": {
																		"localId": "368",
																		"locator": "205:29-205:45",
																		"name": "dosageInstruction",
																		"type": "QueryLetRef"
																	}
																}
															}
														}
													}
												]
											},
											"else": {
												"localId": "377",
												"locator": "206:18-206:61",
												"type": "ToString",
												"operand": {
													"localId": "376",
													"locator": "206:27-206:60",
													"name": "ToQuantity",
													"type": "FunctionRef",
													"operand": [
														{
															"asType": "{http://hl7.org/fhir}Quantity",
															"type": "As",
															"operand": {
																"localId": "375",
																"locator": "206:38-206:59",
																"path": "dose",
																"type": "Property",
																"source": {
																	"localId": "374",
																	"locator": "206:38-206:54",
																	"name": "dosageInstruction",
																	"type": "QueryLetRef"
																}
															}
														}
													]
												}
											}
										},
										{
											"localId": "379",
											"locator": "207:13-207:14",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "",
											"type": "Literal"
										}
									]
								}
							},
							{
								"localId": "399",
								"locator": "209:7-214:11",
								"identifier": "frequencyDescription",
								"expression": {
									"localId": "398",
									"locator": "210:9-214:11",
									"type": "Concatenate",
									"operand": [
										{
											"localId": "387",
											"locator": "210:9-210:65",
											"type": "ToString",
											"operand": {
												"localId": "386",
												"locator": "210:18-210:64",
												"path": "value",
												"type": "Property",
												"source": {
													"localId": "385",
													"locator": "210:18-210:58",
													"path": "frequency",
													"type": "Property",
													"source": {
														"localId": "384",
														"locator": "210:18-210:48",
														"path": "repeat",
														"type": "Property",
														"source": {
															"localId": "383",
															"locator": "210:18-210:41",
															"path": "timing",
															"type": "Property",
															"source": {
																"localId": "382",
																"locator": "210:18-210:34",
																"name": "dosageInstruction",
																"type": "QueryLetRef"
															}
														}
													}
												}
											}
										},
										{
											"localId": "397",
											"locator": "211:11-214:11",
											"type": "Coalesce",
											"operand": [
												{
													"localId": "395",
													"locator": "212:13-212:78",
													"type": "Concatenate",
													"operand": [
														{
															"localId": "388",
															"locator": "212:13-212:15",
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": "-",
															"type": "Literal"
														},
														{
															"localId": "394",
															"locator": "212:19-212:78",
															"type": "ToString",
															"operand": {
																"localId": "393",
																"locator": "212:28-212:77",
																"path": "value",
																"type": "Property",
																"source": {
																	"localId": "392",
																	"locator": "212:28-212:71",
																	"path": "frequencyMax",
																	"type": "Property",
																	"source": {
																		"localId": "391",
																		"locator": "212:28-212:58",
																		"path": "repeat",
																		"type": "Property",
																		"source": {
																			"localId": "390",
																			"locator": "212:28-212:51",
																			"path": "timing",
																			"type": "Property",
																			"source": {
																				"localId": "389",
																				"locator": "212:28-212:44",
																				"name": "dosageInstruction",
																				"type": "QueryLetRef"
																			}
																		}
																	}
																}
															}
														}
													]
												},
												{
													"localId": "396",
													"locator": "213:13-213:14",
													"valueType": "{urn:hl7-org:elm-types:r1}String",
													"value": "",
													"type": "Literal"
												}
											]
										}
									]
								}
							}
						],
						"relationship": [],
						"return": {
							"localId": "455",
							"locator": "215:5-231:5",
							"expression": {
								"localId": "454",
								"locator": "215:12-231:5",
								"type": "Tuple",
								"element": [
									{
										"name": "rxNormCode",
										"value": {
											"localId": "400",
											"locator": "216:19-216:28",
											"name": "rxNormCode",
											"type": "QueryLetRef"
										}
									},
									{
										"name": "isDraft",
										"value": {
											"localId": "405",
											"locator": "217:16-217:39",
											"type": "Equal",
											"operand": [
												{
													"localId": "403",
													"locator": "217:16-217:29",
													"path": "value",
													"type": "Property",
													"source": {
														"localId": "402",
														"locator": "217:16-217:23",
														"path": "status",
														"scope": "O",
														"type": "Property"
													}
												},
												{
													"localId": "404",
													"locator": "217:33-217:39",
													"valueType": "{urn:hl7-org:elm-types:r1}String",
													"value": "draft",
													"type": "Literal"
												}
											]
										}
									},
									{
										"name": "isPRN",
										"value": {
											"localId": "408",
											"locator": "219:14-219:45",
											"path": "value",
											"type": "Property",
											"source": {
												"localId": "407",
												"locator": "219:14-219:39",
												"path": "asNeeded",
												"type": "Property",
												"source": {
													"localId": "406",
													"locator": "219:14-219:30",
													"name": "dosageInstruction",
													"type": "QueryLetRef"
												}
											}
										}
									},
									{
										"name": "prescription",
										"value": {
											"localId": "435",
											"locator": "221:9-225:138",
											"type": "If",
											"condition": {
												"asType": "{urn:hl7-org:elm-types:r1}Boolean",
												"type": "As",
												"operand": {
													"localId": "411",
													"locator": "221:12-221:45",
													"type": "Not",
													"operand": {
														"locator": "221:12-221:45",
														"type": "IsNull",
														"operand": {
															"localId": "410",
															"locator": "221:12-221:33",
															"path": "text",
															"type": "Property",
															"source": {
																"localId": "409",
																"locator": "221:12-221:28",
																"name": "dosageInstruction",
																"type": "QueryLetRef"
															}
														}
													}
												}
											},
											"then": {
												"localId": "418",
												"locator": "222:11-222:61",
												"type": "Concatenate",
												"operand": [
													{
														"localId": "414",
														"locator": "222:11-222:30",
														"type": "Concatenate",
														"operand": [
															{
																"localId": "412",
																"locator": "222:11-222:24",
																"name": "medicationName",
																"type": "QueryLetRef"
															},
															{
																"localId": "413",
																"locator": "222:28-222:30",
																"valueType": "{urn:hl7-org:elm-types:r1}String",
																"value": " ",
																"type": "Literal"
															}
														]
													},
													{
														"localId": "417",
														"locator": "222:34-222:61",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "416",
															"locator": "222:34-222:55",
															"path": "text",
															"type": "Property",
															"source": {
																"localId": "415",
																"locator": "222:34-222:50",
																"name": "dosageInstruction",
																"type": "QueryLetRef"
															}
														}
													}
												]
											},
											"else": {
												"localId": "434",
												"locator": "225:11-225:138",
												"type": "Concatenate",
												"operand": [
													{
														"localId": "427",
														"locator": "225:11-225:78",
														"type": "Concatenate",
														"operand": [
															{
																"localId": "425",
																"locator": "225:11-225:55",
																"type": "Concatenate",
																"operand": [
																	{
																		"localId": "423",
																		"locator": "225:11-225:48",
																		"type": "Concatenate",
																		"operand": [
																			{
																				"localId": "421",
																				"locator": "225:11-225:30",
																				"type": "Concatenate",
																				"operand": [
																					{
																						"localId": "419",
																						"locator": "225:11-225:24",
																						"name": "medicationName",
																						"type": "QueryLetRef"
																					},
																					{
																						"localId": "420",
																						"locator": "225:28-225:30",
																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																						"value": " ",
																						"type": "Literal"
																					}
																				]
																			},
																			{
																				"localId": "422",
																				"locator": "225:34-225:48",
																				"name": "doseDescription",
																				"type": "QueryLetRef"
																			}
																		]
																	},
																	{
																		"localId": "424",
																		"locator": "225:52-225:55",
																		"valueType": "{urn:hl7-org:elm-types:r1}String",
																		"value": " q",
																		"type": "Literal"
																	}
																]
															},
															{
																"localId": "426",
																"locator": "225:59-225:78",
																"name": "frequencyDescription",
																"type": "QueryLetRef"
															}
														]
													},
													{
														"localId": "433",
														"locator": "225:82-225:138",
														"type": "If",
														"condition": {
															"asType": "{urn:hl7-org:elm-types:r1}Boolean",
															"type": "As",
															"operand": {
																"localId": "430",
																"locator": "225:86-225:117",
																"path": "value",
																"type": "Property",
																"source": {
																	"localId": "429",
																	"locator": "225:86-225:111",
																	"path": "asNeeded",
																	"type": "Property",
																	"source": {
																		"localId": "428",
																		"locator": "225:86-225:102",
																		"name": "dosageInstruction",
																		"type": "QueryLetRef"
																	}
																}
															}
														},
														"then": {
															"localId": "431",
															"locator": "225:124-225:129",
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": " PRN",
															"type": "Literal"
														},
														"else": {
															"localId": "432",
															"locator": "225:136-225:137",
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": "",
															"type": "Literal"
														}
													}
												]
											}
										}
									},
									{
										"name": "dose",
										"value": {
											"localId": "447",
											"locator": "227:13-229:51",
											"type": "If",
											"condition": {
												"asType": "{urn:hl7-org:elm-types:r1}Boolean",
												"type": "As",
												"operand": {
													"localId": "439",
													"locator": "227:16-227:51",
													"type": "Is",
													"operand": {
														"localId": "437",
														"locator": "227:16-227:37",
														"path": "dose",
														"type": "Property",
														"source": {
															"localId": "436",
															"locator": "227:16-227:32",
															"name": "dosageInstruction",
															"type": "QueryLetRef"
														}
													},
													"isTypeSpecifier": {
														"localId": "438",
														"locator": "227:42-227:51",
														"name": "{http://hl7.org/fhir}Range",
														"type": "NamedTypeSpecifier"
													}
												}
											},
											"then": {
												"localId": "443",
												"locator": "228:18-228:56",
												"name": "ToQuantity",
												"type": "FunctionRef",
												"operand": [
													{
														"localId": "442",
														"locator": "228:29-228:55",
														"path": "high",
														"type": "Property",
														"source": {
															"localId": "441",
															"locator": "228:29-228:50",
															"path": "dose",
															"type": "Property",
															"source": {
																"localId": "440",
																"locator": "228:29-228:45",
																"name": "dosageInstruction",
																"type": "QueryLetRef"
															}
														}
													}
												]
											},
											"else": {
												"localId": "446",
												"locator": "229:18-229:51",
												"name": "ToQuantity",
												"type": "FunctionRef",
												"operand": [
													{
														"asType": "{http://hl7.org/fhir}Quantity",
														"type": "As",
														"operand": {
															"localId": "445",
															"locator": "229:29-229:50",
															"path": "dose",
															"type": "Property",
															"source": {
																"localId": "444",
																"locator": "229:29-229:45",
																"name": "dosageInstruction",
																"type": "QueryLetRef"
															}
														}
													}
												]
											}
										}
									},
									{
										"name": "dosesPerDay",
										"value": {
											"localId": "453",
											"locator": "230:20-230:70",
											"type": "Coalesce",
											"operand": [
												{
													"localId": "451",
													"locator": "230:29-230:64",
													"name": "ToDaily",
													"libraryName": "OMTKLogic",
													"type": "FunctionRef",
													"operand": [
														{
															"localId": "449",
															"locator": "230:47-230:55",
															"name": "frequency",
															"type": "QueryLetRef"
														},
														{
															"localId": "450",
															"locator": "230:58-230:63",
															"name": "period",
															"type": "QueryLetRef"
														}
													]
												},
												{
													"localId": "452",
													"locator": "230:67-230:69",
													"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
													"value": "1.0",
													"type": "Literal"
												}
											]
										}
									}
								]
							}
						}
					},
					"operand": [
						{
							"name": "Orders",
							"operandTypeSpecifier": {
								"localId": "276",
								"locator": "188:38-188:60",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "275",
									"locator": "188:43-188:59",
									"name": "{http://hl7.org/fhir}MedicationRequest",
									"type": "NamedTypeSpecifier"
								}
							}
						}
					]
				},
				{
					"localId": "492",
					"locator": "233:1-244:5",
					"name": "MME",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "492",
								"s": [
									{
										"value": [
											"define function ",
											"MME",
											"(",
											"prescriptions",
											" "
										]
									},
									{
										"r": "459",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "458",
												"s": [
													{
														"value": [
															"MedicationRequest"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "491",
										"s": [
											{
												"r": "491",
												"s": [
													{
														"s": [
															{
																"r": "462",
																"s": [
																	{
																		"r": "461",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "461",
																				"s": [
																					{
																						"value": [
																							"Prescriptions",
																							"("
																						]
																					},
																					{
																						"r": "460",
																						"s": [
																							{
																								"value": [
																									"prescriptions"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"P"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"s": [
															{
																"value": [
																	"let "
																]
															},
															{
																"r": "474",
																"s": [
																	{
																		"value": [
																			"mme",
																			": "
																		]
																	},
																	{
																		"r": "473",
																		"s": [
																			{
																				"value": [
																					"SingletonFrom",
																					"("
																				]
																			},
																			{
																				"r": "472",
																				"s": [
																					{
																						"r": "463",
																						"s": [
																							{
																								"value": [
																									"OMTKLogic"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "472",
																						"s": [
																							{
																								"value": [
																									"CalculateMMEs",
																									"("
																								]
																							},
																							{
																								"r": "471",
																								"s": [
																									{
																										"value": [
																											"{ "
																										]
																									},
																									{
																										"r": "470",
																										"s": [
																											{
																												"value": [
																													"{ "
																												]
																											},
																											{
																												"s": [
																													{
																														"value": [
																															"rxNormCode",
																															": "
																														]
																													},
																													{
																														"r": "465",
																														"s": [
																															{
																																"r": "464",
																																"s": [
																																	{
																																		"value": [
																																			"P"
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	"."
																																]
																															},
																															{
																																"r": "465",
																																"s": [
																																	{
																																		"value": [
																																			"rxNormCode"
																																		]
																																	}
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													", "
																												]
																											},
																											{
																												"s": [
																													{
																														"value": [
																															"doseQuantity",
																															": "
																														]
																													},
																													{
																														"r": "467",
																														"s": [
																															{
																																"r": "466",
																																"s": [
																																	{
																																		"value": [
																																			"P"
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	"."
																																]
																															},
																															{
																																"r": "467",
																																"s": [
																																	{
																																		"value": [
																																			"dose"
																																		]
																																	}
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													", "
																												]
																											},
																											{
																												"s": [
																													{
																														"value": [
																															"dosesPerDay",
																															": "
																														]
																													},
																													{
																														"r": "469",
																														"s": [
																															{
																																"r": "468",
																																"s": [
																																	{
																																		"value": [
																																			"P"
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	"."
																																]
																															},
																															{
																																"r": "469",
																																"s": [
																																	{
																																		"value": [
																																			"dosesPerDay"
																																		]
																																	}
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													" }"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" }"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"r": "490",
														"s": [
															{
																"value": [
																	"return "
																]
															},
															{
																"r": "489",
																"s": [
																	{
																		"value": [
																			"{\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"rxNormCode",
																					": "
																				]
																			},
																			{
																				"r": "476",
																				"s": [
																					{
																						"r": "475",
																						"s": [
																							{
																								"value": [
																									"P"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "476",
																						"s": [
																							{
																								"value": [
																									"rxNormCode"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"isDraft",
																					": "
																				]
																			},
																			{
																				"r": "478",
																				"s": [
																					{
																						"r": "477",
																						"s": [
																							{
																								"value": [
																									"P"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "478",
																						"s": [
																							{
																								"value": [
																									"isDraft"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"isPRN",
																					": "
																				]
																			},
																			{
																				"r": "480",
																				"s": [
																					{
																						"r": "479",
																						"s": [
																							{
																								"value": [
																									"P"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "480",
																						"s": [
																							{
																								"value": [
																									"isPRN"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"prescription",
																					": "
																				]
																			},
																			{
																				"r": "482",
																				"s": [
																					{
																						"r": "481",
																						"s": [
																							{
																								"value": [
																									"P"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "482",
																						"s": [
																							{
																								"value": [
																									"prescription"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"dailyDose",
																					": "
																				]
																			},
																			{
																				"r": "484",
																				"s": [
																					{
																						"r": "483",
																						"s": [
																							{
																								"value": [
																									"mme"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "484",
																						"s": [
																							{
																								"value": [
																									"dailyDoseDescription"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"conversionFactor",
																					": "
																				]
																			},
																			{
																				"r": "486",
																				"s": [
																					{
																						"r": "485",
																						"s": [
																							{
																								"value": [
																									"mme"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "486",
																						"s": [
																							{
																								"value": [
																									"conversionFactor"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			",\n      "
																		]
																	},
																	{
																		"s": [
																			{
																				"value": [
																					"mme",
																					": "
																				]
																			},
																			{
																				"r": "488",
																				"s": [
																					{
																						"r": "487",
																						"s": [
																							{
																								"value": [
																									"mme"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "488",
																						"s": [
																							{
																								"value": [
																									"mme"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"\n    }"
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "491",
						"locator": "234:3-244:5",
						"type": "Query",
						"source": [
							{
								"localId": "462",
								"locator": "234:3-234:34",
								"alias": "P",
								"expression": {
									"localId": "461",
									"locator": "234:3-234:32",
									"name": "Prescriptions",
									"type": "FunctionRef",
									"operand": [
										{
											"localId": "460",
											"locator": "234:18-234:30",
											"name": "prescriptions",
											"type": "OperandRef"
										}
									]
								}
							}
						],
						"let": [
							{
								"localId": "474",
								"locator": "235:9-235:135",
								"identifier": "mme",
								"expression": {
									"localId": "473",
									"locator": "235:14-235:135",
									"type": "SingletonFrom",
									"operand": {
										"localId": "472",
										"locator": "235:28-235:134",
										"name": "CalculateMMEs",
										"libraryName": "OMTKLogic",
										"type": "FunctionRef",
										"operand": [
											{
												"localId": "471",
												"locator": "235:52-235:133",
												"type": "List",
												"element": [
													{
														"localId": "470",
														"locator": "235:54-235:131",
														"type": "Tuple",
														"element": [
															{
																"name": "rxNormCode",
																"value": {
																	"localId": "465",
																	"locator": "235:68-235:79",
																	"path": "rxNormCode",
																	"scope": "P",
																	"type": "Property"
																}
															},
															{
																"name": "doseQuantity",
																"value": {
																	"localId": "467",
																	"locator": "235:96-235:101",
																	"path": "dose",
																	"scope": "P",
																	"type": "Property"
																}
															},
															{
																"name": "dosesPerDay",
																"value": {
																	"localId": "469",
																	"locator": "235:117-235:129",
																	"path": "dosesPerDay",
																	"scope": "P",
																	"type": "Property"
																}
															}
														]
													}
												]
											}
										]
									}
								}
							}
						],
						"relationship": [],
						"return": {
							"localId": "490",
							"locator": "236:5-244:5",
							"expression": {
								"localId": "489",
								"locator": "236:12-244:5",
								"type": "Tuple",
								"element": [
									{
										"name": "rxNormCode",
										"value": {
											"localId": "476",
											"locator": "237:19-237:30",
											"path": "rxNormCode",
											"scope": "P",
											"type": "Property"
										}
									},
									{
										"name": "isDraft",
										"value": {
											"localId": "478",
											"locator": "238:16-238:24",
											"path": "isDraft",
											"scope": "P",
											"type": "Property"
										}
									},
									{
										"name": "isPRN",
										"value": {
											"localId": "480",
											"locator": "239:14-239:20",
											"path": "isPRN",
											"scope": "P",
											"type": "Property"
										}
									},
									{
										"name": "prescription",
										"value": {
											"localId": "482",
											"locator": "240:21-240:34",
											"path": "prescription",
											"scope": "P",
											"type": "Property"
										}
									},
									{
										"name": "dailyDose",
										"value": {
											"localId": "484",
											"locator": "241:18-241:41",
											"path": "dailyDoseDescription",
											"type": "Property",
											"source": {
												"localId": "483",
												"locator": "241:18-241:20",
												"name": "mme",
												"type": "QueryLetRef"
											}
										}
									},
									{
										"name": "conversionFactor",
										"value": {
											"localId": "486",
											"locator": "242:25-242:44",
											"path": "conversionFactor",
											"type": "Property",
											"source": {
												"localId": "485",
												"locator": "242:25-242:27",
												"name": "mme",
												"type": "QueryLetRef"
											}
										}
									},
									{
										"name": "mme",
										"value": {
											"localId": "488",
											"locator": "243:12-243:18",
											"path": "mme",
											"type": "Property",
											"source": {
												"localId": "487",
												"locator": "243:12-243:14",
												"name": "mme",
												"type": "QueryLetRef"
											}
										}
									}
								]
							}
						}
					},
					"operand": [
						{
							"name": "prescriptions",
							"operandTypeSpecifier": {
								"localId": "459",
								"locator": "233:35-233:57",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "458",
									"locator": "233:40-233:56",
									"name": "{http://hl7.org/fhir}MedicationRequest",
									"type": "NamedTypeSpecifier"
								}
							}
						}
					]
				},
				{
					"localId": "506",
					"locator": "246:1-250:3",
					"name": "TotalMME",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "506",
								"s": [
									{
										"value": [
											"define function ",
											"TotalMME",
											"(",
											"prescriptions",
											" "
										]
									},
									{
										"r": "494",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "493",
												"s": [
													{
														"value": [
															"MedicationRequest"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "505",
										"s": [
											{
												"r": "505",
												"s": [
													{
														"value": [
															"System",
															".",
															"Quantity",
															" {\n    "
														]
													},
													{
														"s": [
															{
																"value": [
																	"value",
																	": "
																]
															},
															{
																"r": "503",
																"s": [
																	{
																		"value": [
																			"Sum",
																			"("
																		]
																	},
																	{
																		"r": "502",
																		"s": [
																			{
																				"s": [
																					{
																						"r": "497",
																						"s": [
																							{
																								"r": "496",
																								"s": [
																									{
																										"value": [
																											"("
																										]
																									},
																									{
																										"r": "496",
																										"s": [
																											{
																												"value": [
																													"MME",
																													"("
																												]
																											},
																											{
																												"r": "495",
																												"s": [
																													{
																														"value": [
																															"prescriptions"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													")"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" ",
																									"M"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" "
																				]
																			},
																			{
																				"r": "501",
																				"s": [
																					{
																						"value": [
																							"return "
																						]
																					},
																					{
																						"r": "500",
																						"s": [
																							{
																								"r": "499",
																								"s": [
																									{
																										"r": "498",
																										"s": [
																											{
																												"value": [
																													"M"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "499",
																										"s": [
																											{
																												"value": [
																													"mme"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "500",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			")"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															",\n    "
														]
													},
													{
														"s": [
															{
																"value": [
																	"unit",
																	": "
																]
															},
															{
																"r": "504",
																"s": [
																	{
																		"value": [
																			"'mg/d'"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n  }"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "505",
						"locator": "247:3-250:3",
						"classType": "{urn:hl7-org:elm-types:r1}Quantity",
						"type": "Instance",
						"element": [
							{
								"name": "value",
								"value": {
									"localId": "503",
									"locator": "248:12-248:57",
									"type": "Sum",
									"source": {
										"localId": "502",
										"locator": "248:16-248:56",
										"type": "Query",
										"source": [
											{
												"localId": "497",
												"locator": "248:16-248:37",
												"alias": "M",
												"expression": {
													"localId": "496",
													"locator": "248:16-248:35",
													"name": "MME",
													"type": "FunctionRef",
													"operand": [
														{
															"localId": "495",
															"locator": "248:21-248:33",
															"name": "prescriptions",
															"type": "OperandRef"
														}
													]
												}
											}
										],
										"relationship": [],
										"return": {
											"localId": "501",
											"locator": "248:39-248:56",
											"expression": {
												"localId": "500",
												"locator": "248:46-248:56",
												"path": "value",
												"type": "Property",
												"source": {
													"localId": "499",
													"locator": "248:46-248:50",
													"path": "mme",
													"scope": "M",
													"type": "Property"
												}
											}
										}
									}
								}
							},
							{
								"name": "unit",
								"value": {
									"localId": "504",
									"locator": "249:11-249:16",
									"valueType": "{urn:hl7-org:elm-types:r1}String",
									"value": "mg/d",
									"type": "Literal"
								}
							}
						]
					},
					"operand": [
						{
							"name": "prescriptions",
							"operandTypeSpecifier": {
								"localId": "494",
								"locator": "246:40-246:62",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "493",
									"locator": "246:45-246:61",
									"name": "{http://hl7.org/fhir}MedicationRequest",
									"type": "NamedTypeSpecifier"
								}
							}
						}
					]
				},
				{
					"localId": "592",
					"locator": "274:1-283:5",
					"name": "GetPeriodDays",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "592",
								"s": [
									{
										"value": [
											"define function ",
											"GetPeriodDays",
											"(",
											"value",
											" "
										]
									},
									{
										"r": "539",
										"s": [
											{
												"value": [
													"System",
													".",
													"String"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "591",
										"s": [
											{
												"r": "591",
												"s": [
													{
														"value": [
															"case\n    "
														]
													},
													{
														"r": "544",
														"s": [
															{
																"value": [
																	"when "
																]
															},
															{
																"r": "542",
																"s": [
																	{
																		"r": "540",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"=",
																			" "
																		]
																	},
																	{
																		"r": "541",
																		"s": [
																			{
																				"value": [
																					"'a'"
																				]
																			}
																		]
																	}
																]
															},
															{
																"r": "543",
																"value": [
																	" then ",
																	"365.0"
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"r": "549",
														"s": [
															{
																"value": [
																	"when "
																]
															},
															{
																"r": "547",
																"s": [
																	{
																		"r": "545",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"=",
																			" "
																		]
																	},
																	{
																		"r": "546",
																		"s": [
																			{
																				"value": [
																					"'mo'"
																				]
																			}
																		]
																	}
																]
															},
															{
																"r": "548",
																"value": [
																	" then ",
																	"30.0"
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"r": "556",
														"s": [
															{
																"value": [
																	"when "
																]
															},
															{
																"r": "552",
																"s": [
																	{
																		"r": "550",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"=",
																			" "
																		]
																	},
																	{
																		"r": "551",
																		"s": [
																			{
																				"value": [
																					"'h'"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" then "
																]
															},
															{
																"r": "555",
																"s": [
																	{
																		"r": "553",
																		"value": [
																			"1.0",
																			"/",
																			"24.0"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"r": "565",
														"s": [
															{
																"value": [
																	"when "
																]
															},
															{
																"r": "559",
																"s": [
																	{
																		"r": "557",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"=",
																			" "
																		]
																	},
																	{
																		"r": "558",
																		"s": [
																			{
																				"value": [
																					"'min'"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" then "
																]
															},
															{
																"r": "564",
																"s": [
																	{
																		"r": "562",
																		"s": [
																			{
																				"r": "560",
																				"value": [
																					"1.0",
																					"/",
																					"24.0"
																				]
																			}
																		]
																	},
																	{
																		"r": "563",
																		"value": [
																			"*",
																			"60.0"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"r": "576",
														"s": [
															{
																"value": [
																	"when "
																]
															},
															{
																"r": "568",
																"s": [
																	{
																		"r": "566",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"=",
																			" "
																		]
																	},
																	{
																		"r": "567",
																		"s": [
																			{
																				"value": [
																					"'s'"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" then "
																]
															},
															{
																"r": "575",
																"s": [
																	{
																		"r": "573",
																		"s": [
																			{
																				"r": "571",
																				"s": [
																					{
																						"r": "569",
																						"value": [
																							"1.0",
																							"/",
																							"24.0"
																						]
																					}
																				]
																			},
																			{
																				"r": "572",
																				"value": [
																					"*",
																					"60.0"
																				]
																			}
																		]
																	},
																	{
																		"r": "574",
																		"value": [
																			"*",
																			"60.0"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"r": "589",
														"s": [
															{
																"value": [
																	"when "
																]
															},
															{
																"r": "579",
																"s": [
																	{
																		"r": "577",
																		"s": [
																			{
																				"value": [
																					"value"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"=",
																			" "
																		]
																	},
																	{
																		"r": "578",
																		"s": [
																			{
																				"value": [
																					"'ms'"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" then "
																]
															},
															{
																"r": "588",
																"s": [
																	{
																		"r": "586",
																		"s": [
																			{
																				"r": "584",
																				"s": [
																					{
																						"r": "582",
																						"s": [
																							{
																								"r": "580",
																								"value": [
																									"1.0",
																									"/",
																									"24.0"
																								]
																							}
																						]
																					},
																					{
																						"r": "583",
																						"value": [
																							"*",
																							"60.0"
																						]
																					}
																				]
																			},
																			{
																				"r": "585",
																				"value": [
																					"*",
																					"60.0"
																				]
																			}
																		]
																	},
																	{
																		"r": "587",
																		"value": [
																			"*",
																			"1000.0"
																		]
																	}
																]
															}
														]
													},
													{
														"r": "590",
														"value": [
															"\n    else ",
															"1.0",
															"\n  end"
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "591",
						"locator": "275:3-283:5",
						"type": "Case",
						"caseItem": [
							{
								"localId": "544",
								"locator": "276:5-276:31",
								"when": {
									"localId": "542",
									"locator": "276:10-276:20",
									"type": "Equal",
									"operand": [
										{
											"localId": "540",
											"locator": "276:10-276:14",
											"name": "value",
											"type": "OperandRef"
										},
										{
											"localId": "541",
											"locator": "276:18-276:20",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "a",
											"type": "Literal"
										}
									]
								},
								"then": {
									"localId": "543",
									"locator": "276:27-276:31",
									"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
									"value": "365.0",
									"type": "Literal"
								}
							},
							{
								"localId": "549",
								"locator": "277:5-277:31",
								"when": {
									"localId": "547",
									"locator": "277:10-277:21",
									"type": "Equal",
									"operand": [
										{
											"localId": "545",
											"locator": "277:10-277:14",
											"name": "value",
											"type": "OperandRef"
										},
										{
											"localId": "546",
											"locator": "277:18-277:21",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "mo",
											"type": "Literal"
										}
									]
								},
								"then": {
									"localId": "548",
									"locator": "277:28-277:31",
									"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
									"value": "30.0",
									"type": "Literal"
								}
							},
							{
								"localId": "556",
								"locator": "278:5-278:34",
								"when": {
									"localId": "552",
									"locator": "278:10-278:20",
									"type": "Equal",
									"operand": [
										{
											"localId": "550",
											"locator": "278:10-278:14",
											"name": "value",
											"type": "OperandRef"
										},
										{
											"localId": "551",
											"locator": "278:18-278:20",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "h",
											"type": "Literal"
										}
									]
								},
								"then": {
									"localId": "555",
									"locator": "278:27-278:34",
									"type": "Divide",
									"operand": [
										{
											"localId": "553",
											"locator": "278:27-278:29",
											"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
											"value": "1.0",
											"type": "Literal"
										},
										{
											"localId": "554",
											"locator": "278:31-278:34",
											"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
											"value": "24.0",
											"type": "Literal"
										}
									]
								}
							},
							{
								"localId": "565",
								"locator": "279:5-279:41",
								"when": {
									"localId": "559",
									"locator": "279:10-279:22",
									"type": "Equal",
									"operand": [
										{
											"localId": "557",
											"locator": "279:10-279:14",
											"name": "value",
											"type": "OperandRef"
										},
										{
											"localId": "558",
											"locator": "279:18-279:22",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "min",
											"type": "Literal"
										}
									]
								},
								"then": {
									"localId": "564",
									"locator": "279:29-279:41",
									"type": "Multiply",
									"operand": [
										{
											"localId": "562",
											"locator": "279:29-279:36",
											"type": "Divide",
											"operand": [
												{
													"localId": "560",
													"locator": "279:29-279:31",
													"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
													"value": "1.0",
													"type": "Literal"
												},
												{
													"localId": "561",
													"locator": "279:33-279:36",
													"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
													"value": "24.0",
													"type": "Literal"
												}
											]
										},
										{
											"localId": "563",
											"locator": "279:38-279:41",
											"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
											"value": "60.0",
											"type": "Literal"
										}
									]
								}
							},
							{
								"localId": "576",
								"locator": "280:5-280:44",
								"when": {
									"localId": "568",
									"locator": "280:10-280:20",
									"type": "Equal",
									"operand": [
										{
											"localId": "566",
											"locator": "280:10-280:14",
											"name": "value",
											"type": "OperandRef"
										},
										{
											"localId": "567",
											"locator": "280:18-280:20",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "s",
											"type": "Literal"
										}
									]
								},
								"then": {
									"localId": "575",
									"locator": "280:27-280:44",
									"type": "Multiply",
									"operand": [
										{
											"localId": "573",
											"locator": "280:27-280:39",
											"type": "Multiply",
											"operand": [
												{
													"localId": "571",
													"locator": "280:27-280:34",
													"type": "Divide",
													"operand": [
														{
															"localId": "569",
															"locator": "280:27-280:29",
															"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
															"value": "1.0",
															"type": "Literal"
														},
														{
															"localId": "570",
															"locator": "280:31-280:34",
															"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
															"value": "24.0",
															"type": "Literal"
														}
													]
												},
												{
													"localId": "572",
													"locator": "280:36-280:39",
													"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
													"value": "60.0",
													"type": "Literal"
												}
											]
										},
										{
											"localId": "574",
											"locator": "280:41-280:44",
											"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
											"value": "60.0",
											"type": "Literal"
										}
									]
								}
							},
							{
								"localId": "589",
								"locator": "281:5-281:52",
								"when": {
									"localId": "579",
									"locator": "281:10-281:21",
									"type": "Equal",
									"operand": [
										{
											"localId": "577",
											"locator": "281:10-281:14",
											"name": "value",
											"type": "OperandRef"
										},
										{
											"localId": "578",
											"locator": "281:18-281:21",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "ms",
											"type": "Literal"
										}
									]
								},
								"then": {
									"localId": "588",
									"locator": "281:28-281:52",
									"type": "Multiply",
									"operand": [
										{
											"localId": "586",
											"locator": "281:28-281:45",
											"type": "Multiply",
											"operand": [
												{
													"localId": "584",
													"locator": "281:28-281:40",
													"type": "Multiply",
													"operand": [
														{
															"localId": "582",
															"locator": "281:28-281:35",
															"type": "Divide",
															"operand": [
																{
																	"localId": "580",
																	"locator": "281:28-281:30",
																	"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
																	"value": "1.0",
																	"type": "Literal"
																},
																{
																	"localId": "581",
																	"locator": "281:32-281:35",
																	"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
																	"value": "24.0",
																	"type": "Literal"
																}
															]
														},
														{
															"localId": "583",
															"locator": "281:37-281:40",
															"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
															"value": "60.0",
															"type": "Literal"
														}
													]
												},
												{
													"localId": "585",
													"locator": "281:42-281:45",
													"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
													"value": "60.0",
													"type": "Literal"
												}
											]
										},
										{
											"localId": "587",
											"locator": "281:47-281:52",
											"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
											"value": "1000.0",
											"type": "Literal"
										}
									]
								}
							}
						],
						"else": {
							"localId": "590",
							"locator": "282:10-282:12",
							"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
							"value": "1.0",
							"type": "Literal"
						}
					},
					"operand": [
						{
							"name": "value",
							"operandTypeSpecifier": {
								"localId": "539",
								"locator": "274:37-274:49",
								"name": "{urn:hl7-org:elm-types:r1}String",
								"type": "NamedTypeSpecifier"
							}
						}
					]
				},
				{
					"localId": "776",
					"locator": "285:3-298:9",
					"name": "GetDurationInDays",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "776",
								"s": [
									{
										"value": [
											"define function ",
											"GetDurationInDays",
											"(",
											"value",
											" "
										]
									},
									{
										"r": "618",
										"s": [
											{
												"value": [
													"FHIR",
													".",
													"Duration"
												]
											}
										]
									},
									{
										"value": [
											"):\n    "
										]
									},
									{
										"r": "775",
										"s": [
											{
												"r": "775",
												"s": [
													{
														"value": [
															"if "
														]
													},
													{
														"r": "620",
														"s": [
															{
																"r": "619",
																"s": [
																	{
																		"value": [
																			"value"
																		]
																	}
																]
															},
															{
																"value": [
																	" is null"
																]
															}
														]
													},
													{
														"r": "621",
														"value": [
															" then ",
															"null",
															"\n    else\n      "
														]
													},
													{
														"r": "774",
														"s": [
															{
																"value": [
																	"case\n        "
																]
															},
															{
																"r": "638",
																"s": [
																	{
																		"value": [
																			"when "
																		]
																	},
																	{
																		"r": "632",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "632",
																				"s": [
																					{
																						"r": "626",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "624",
																								"s": [
																									{
																										"r": "623",
																										"s": [
																											{
																												"r": "622",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "623",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "624",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "625",
																								"s": [
																									{
																										"value": [
																											"'a'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" or "
																						]
																					},
																					{
																						"r": "631",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "629",
																								"s": [
																									{
																										"r": "628",
																										"s": [
																											{
																												"r": "627",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "628",
																												"s": [
																													{
																														"value": [
																															"unit"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "629",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "630",
																								"s": [
																									{
																										"value": [
																											"'a'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" then "
																		]
																	},
																	{
																		"r": "637",
																		"s": [
																			{
																				"r": "635",
																				"s": [
																					{
																						"r": "634",
																						"s": [
																							{
																								"r": "633",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "634",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "635",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"r": "636",
																				"value": [
																					" * ",
																					"365.0"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "655",
																"s": [
																	{
																		"value": [
																			"when "
																		]
																	},
																	{
																		"r": "649",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "649",
																				"s": [
																					{
																						"r": "643",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "641",
																								"s": [
																									{
																										"r": "640",
																										"s": [
																											{
																												"r": "639",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "640",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "641",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "642",
																								"s": [
																									{
																										"value": [
																											"'mo'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" or "
																						]
																					},
																					{
																						"r": "648",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "646",
																								"s": [
																									{
																										"r": "645",
																										"s": [
																											{
																												"r": "644",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "645",
																												"s": [
																													{
																														"value": [
																															"unit"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "646",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "647",
																								"s": [
																									{
																										"value": [
																											"'mo'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" then "
																		]
																	},
																	{
																		"r": "654",
																		"s": [
																			{
																				"r": "652",
																				"s": [
																					{
																						"r": "651",
																						"s": [
																							{
																								"r": "650",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "651",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "652",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"r": "653",
																				"value": [
																					" * ",
																					"30.0"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "672",
																"s": [
																	{
																		"value": [
																			"when "
																		]
																	},
																	{
																		"r": "666",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "666",
																				"s": [
																					{
																						"r": "660",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "658",
																								"s": [
																									{
																										"r": "657",
																										"s": [
																											{
																												"r": "656",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "657",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "658",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "659",
																								"s": [
																									{
																										"value": [
																											"'wk'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" or "
																						]
																					},
																					{
																						"r": "665",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "663",
																								"s": [
																									{
																										"r": "662",
																										"s": [
																											{
																												"r": "661",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "662",
																												"s": [
																													{
																														"value": [
																															"unit"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "663",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "664",
																								"s": [
																									{
																										"value": [
																											"'wk'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" then "
																		]
																	},
																	{
																		"r": "671",
																		"s": [
																			{
																				"r": "669",
																				"s": [
																					{
																						"r": "668",
																						"s": [
																							{
																								"r": "667",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "668",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "669",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"r": "670",
																				"value": [
																					" * ",
																					"7.0"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "687",
																"s": [
																	{
																		"value": [
																			"when "
																		]
																	},
																	{
																		"r": "683",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "683",
																				"s": [
																					{
																						"r": "677",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "675",
																								"s": [
																									{
																										"r": "674",
																										"s": [
																											{
																												"r": "673",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "674",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "675",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "676",
																								"s": [
																									{
																										"value": [
																											"'d'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" or "
																						]
																					},
																					{
																						"r": "682",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "680",
																								"s": [
																									{
																										"r": "679",
																										"s": [
																											{
																												"r": "678",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "679",
																												"s": [
																													{
																														"value": [
																															"unit"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "680",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "681",
																								"s": [
																									{
																										"value": [
																											"'d'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" then "
																		]
																	},
																	{
																		"r": "686",
																		"s": [
																			{
																				"r": "685",
																				"s": [
																					{
																						"r": "684",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "685",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "686",
																				"s": [
																					{
																						"value": [
																							"value"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "704",
																"s": [
																	{
																		"value": [
																			"when "
																		]
																	},
																	{
																		"r": "698",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "698",
																				"s": [
																					{
																						"r": "692",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "690",
																								"s": [
																									{
																										"r": "689",
																										"s": [
																											{
																												"r": "688",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "689",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "690",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "691",
																								"s": [
																									{
																										"value": [
																											"'h'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" or "
																						]
																					},
																					{
																						"r": "697",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "695",
																								"s": [
																									{
																										"r": "694",
																										"s": [
																											{
																												"r": "693",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "694",
																												"s": [
																													{
																														"value": [
																															"unit"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "695",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "696",
																								"s": [
																									{
																										"value": [
																											"'h'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" then "
																		]
																	},
																	{
																		"r": "703",
																		"s": [
																			{
																				"r": "701",
																				"s": [
																					{
																						"r": "700",
																						"s": [
																							{
																								"r": "699",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "700",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "701",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"r": "702",
																				"value": [
																					" / ",
																					"24.0"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "723",
																"s": [
																	{
																		"value": [
																			"when "
																		]
																	},
																	{
																		"r": "715",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "715",
																				"s": [
																					{
																						"r": "709",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "707",
																								"s": [
																									{
																										"r": "706",
																										"s": [
																											{
																												"r": "705",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "706",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "707",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "708",
																								"s": [
																									{
																										"value": [
																											"'min'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" or "
																						]
																					},
																					{
																						"r": "714",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "712",
																								"s": [
																									{
																										"r": "711",
																										"s": [
																											{
																												"r": "710",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "711",
																												"s": [
																													{
																														"value": [
																															"unit"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "712",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "713",
																								"s": [
																									{
																										"value": [
																											"'min'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" then "
																		]
																	},
																	{
																		"r": "722",
																		"s": [
																			{
																				"r": "720",
																				"s": [
																					{
																						"r": "718",
																						"s": [
																							{
																								"r": "717",
																								"s": [
																									{
																										"r": "716",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "717",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "718",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"r": "719",
																						"value": [
																							" / ",
																							"60.0"
																						]
																					}
																				]
																			},
																			{
																				"r": "721",
																				"value": [
																					" / ",
																					"24.0"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "744",
																"s": [
																	{
																		"value": [
																			"when "
																		]
																	},
																	{
																		"r": "734",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "734",
																				"s": [
																					{
																						"r": "728",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "726",
																								"s": [
																									{
																										"r": "725",
																										"s": [
																											{
																												"r": "724",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "725",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "726",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "727",
																								"s": [
																									{
																										"value": [
																											"'s'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" or "
																						]
																					},
																					{
																						"r": "733",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "731",
																								"s": [
																									{
																										"r": "730",
																										"s": [
																											{
																												"r": "729",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "730",
																												"s": [
																													{
																														"value": [
																															"unit"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "731",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "732",
																								"s": [
																									{
																										"value": [
																											"'s'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" then "
																		]
																	},
																	{
																		"r": "743",
																		"s": [
																			{
																				"r": "741",
																				"s": [
																					{
																						"r": "739",
																						"s": [
																							{
																								"r": "737",
																								"s": [
																									{
																										"r": "736",
																										"s": [
																											{
																												"r": "735",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "736",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "737",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"r": "738",
																								"value": [
																									" / ",
																									"60.0"
																								]
																							}
																						]
																					},
																					{
																						"r": "740",
																						"value": [
																							" / ",
																							"60.0"
																						]
																					}
																				]
																			},
																			{
																				"r": "742",
																				"value": [
																					" / ",
																					"24.0"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        "
																]
															},
															{
																"r": "767",
																"s": [
																	{
																		"value": [
																			"when "
																		]
																	},
																	{
																		"r": "755",
																		"s": [
																			{
																				"value": [
																					"("
																				]
																			},
																			{
																				"r": "755",
																				"s": [
																					{
																						"r": "749",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "747",
																								"s": [
																									{
																										"r": "746",
																										"s": [
																											{
																												"r": "745",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "746",
																												"s": [
																													{
																														"value": [
																															"code"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "747",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "748",
																								"s": [
																									{
																										"value": [
																											"'ms'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" or "
																						]
																					},
																					{
																						"r": "754",
																						"s": [
																							{
																								"value": [
																									"StartsWith",
																									"("
																								]
																							},
																							{
																								"r": "752",
																								"s": [
																									{
																										"r": "751",
																										"s": [
																											{
																												"r": "750",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "751",
																												"s": [
																													{
																														"value": [
																															"unit"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "752",
																										"s": [
																											{
																												"value": [
																													"value"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									", "
																								]
																							},
																							{
																								"r": "753",
																								"s": [
																									{
																										"value": [
																											"'ms'"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" then "
																		]
																	},
																	{
																		"r": "766",
																		"s": [
																			{
																				"r": "764",
																				"s": [
																					{
																						"r": "762",
																						"s": [
																							{
																								"r": "760",
																								"s": [
																									{
																										"r": "758",
																										"s": [
																											{
																												"r": "757",
																												"s": [
																													{
																														"r": "756",
																														"s": [
																															{
																																"value": [
																																	"value"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "757",
																														"s": [
																															{
																																"value": [
																																	"value"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "758",
																												"s": [
																													{
																														"value": [
																															"value"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"r": "759",
																										"value": [
																											" / ",
																											"60.0"
																										]
																									}
																								]
																							},
																							{
																								"r": "761",
																								"value": [
																									" / ",
																									"60.0"
																								]
																							}
																						]
																					},
																					{
																						"r": "763",
																						"value": [
																							" / ",
																							"24.0"
																						]
																					}
																				]
																			},
																			{
																				"r": "765",
																				"value": [
																					" / ",
																					"1000.0"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n        else "
																]
															},
															{
																"r": "773",
																"s": [
																	{
																		"r": "768",
																		"value": [
																			"Message",
																			"(",
																			"1000",
																			", ",
																			"true",
																			", "
																		]
																	},
																	{
																		"r": "770",
																		"s": [
																			{
																				"value": [
																					"'Undefined'"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			", "
																		]
																	},
																	{
																		"r": "771",
																		"s": [
																			{
																				"value": [
																					"'Error'"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			", "
																		]
																	},
																	{
																		"r": "772",
																		"s": [
																			{
																				"value": [
																					"'Unsupported duration unit code'"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			")"
																		]
																	}
																]
															},
															{
																"value": [
																	"\n      end"
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "775",
						"locator": "286:5-298:9",
						"type": "If",
						"condition": {
							"asType": "{urn:hl7-org:elm-types:r1}Boolean",
							"type": "As",
							"operand": {
								"localId": "620",
								"locator": "286:8-286:20",
								"type": "IsNull",
								"operand": {
									"localId": "619",
									"locator": "286:8-286:12",
									"name": "value",
									"type": "OperandRef"
								}
							}
						},
						"then": {
							"asType": "{urn:hl7-org:elm-types:r1}Decimal",
							"type": "As",
							"operand": {
								"localId": "621",
								"locator": "286:27-286:30",
								"type": "Null"
							}
						},
						"else": {
							"localId": "774",
							"locator": "288:7-298:9",
							"type": "Case",
							"caseItem": [
								{
									"localId": "638",
									"locator": "289:9-289:116",
									"when": {
										"localId": "632",
										"locator": "289:14-289:85",
										"type": "Or",
										"operand": [
											{
												"localId": "626",
												"locator": "289:15-289:47",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "624",
														"locator": "289:26-289:41",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "623",
															"locator": "289:26-289:35",
															"path": "code",
															"type": "Property",
															"source": {
																"localId": "622",
																"locator": "289:26-289:30",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "625",
														"locator": "289:44-289:46",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "a",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "631",
												"locator": "289:52-289:84",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "629",
														"locator": "289:63-289:78",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "628",
															"locator": "289:63-289:72",
															"path": "unit",
															"type": "Property",
															"source": {
																"localId": "627",
																"locator": "289:63-289:67",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "630",
														"locator": "289:81-289:83",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "a",
														"type": "Literal"
													}
												]
											}
										]
									},
									"then": {
										"localId": "637",
										"locator": "289:92-289:116",
										"type": "Multiply",
										"operand": [
											{
												"localId": "635",
												"locator": "289:92-289:108",
												"path": "value",
												"type": "Property",
												"source": {
													"localId": "634",
													"locator": "289:92-289:102",
													"path": "value",
													"type": "Property",
													"source": {
														"localId": "633",
														"locator": "289:92-289:96",
														"name": "value",
														"type": "OperandRef"
													}
												}
											},
											{
												"localId": "636",
												"locator": "289:112-289:116",
												"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
												"value": "365.0",
												"type": "Literal"
											}
										]
									}
								},
								{
									"localId": "655",
									"locator": "290:9-290:117",
									"when": {
										"localId": "649",
										"locator": "290:14-290:87",
										"type": "Or",
										"operand": [
											{
												"localId": "643",
												"locator": "290:15-290:48",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "641",
														"locator": "290:26-290:41",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "640",
															"locator": "290:26-290:35",
															"path": "code",
															"type": "Property",
															"source": {
																"localId": "639",
																"locator": "290:26-290:30",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "642",
														"locator": "290:44-290:47",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "mo",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "648",
												"locator": "290:53-290:86",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "646",
														"locator": "290:64-290:79",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "645",
															"locator": "290:64-290:73",
															"path": "unit",
															"type": "Property",
															"source": {
																"localId": "644",
																"locator": "290:64-290:68",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "647",
														"locator": "290:82-290:85",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "mo",
														"type": "Literal"
													}
												]
											}
										]
									},
									"then": {
										"localId": "654",
										"locator": "290:94-290:117",
										"type": "Multiply",
										"operand": [
											{
												"localId": "652",
												"locator": "290:94-290:110",
												"path": "value",
												"type": "Property",
												"source": {
													"localId": "651",
													"locator": "290:94-290:104",
													"path": "value",
													"type": "Property",
													"source": {
														"localId": "650",
														"locator": "290:94-290:98",
														"name": "value",
														"type": "OperandRef"
													}
												}
											},
											{
												"localId": "653",
												"locator": "290:114-290:117",
												"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
												"value": "30.0",
												"type": "Literal"
											}
										]
									}
								},
								{
									"localId": "672",
									"locator": "291:9-291:116",
									"when": {
										"localId": "666",
										"locator": "291:14-291:87",
										"type": "Or",
										"operand": [
											{
												"localId": "660",
												"locator": "291:15-291:48",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "658",
														"locator": "291:26-291:41",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "657",
															"locator": "291:26-291:35",
															"path": "code",
															"type": "Property",
															"source": {
																"localId": "656",
																"locator": "291:26-291:30",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "659",
														"locator": "291:44-291:47",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "wk",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "665",
												"locator": "291:53-291:86",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "663",
														"locator": "291:64-291:79",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "662",
															"locator": "291:64-291:73",
															"path": "unit",
															"type": "Property",
															"source": {
																"localId": "661",
																"locator": "291:64-291:68",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "664",
														"locator": "291:82-291:85",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "wk",
														"type": "Literal"
													}
												]
											}
										]
									},
									"then": {
										"localId": "671",
										"locator": "291:94-291:116",
										"type": "Multiply",
										"operand": [
											{
												"localId": "669",
												"locator": "291:94-291:110",
												"path": "value",
												"type": "Property",
												"source": {
													"localId": "668",
													"locator": "291:94-291:104",
													"path": "value",
													"type": "Property",
													"source": {
														"localId": "667",
														"locator": "291:94-291:98",
														"name": "value",
														"type": "OperandRef"
													}
												}
											},
											{
												"localId": "670",
												"locator": "291:114-291:116",
												"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
												"value": "7.0",
												"type": "Literal"
											}
										]
									}
								},
								{
									"localId": "687",
									"locator": "292:9-292:108",
									"when": {
										"localId": "683",
										"locator": "292:14-292:85",
										"type": "Or",
										"operand": [
											{
												"localId": "677",
												"locator": "292:15-292:47",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "675",
														"locator": "292:26-292:41",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "674",
															"locator": "292:26-292:35",
															"path": "code",
															"type": "Property",
															"source": {
																"localId": "673",
																"locator": "292:26-292:30",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "676",
														"locator": "292:44-292:46",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "d",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "682",
												"locator": "292:52-292:84",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "680",
														"locator": "292:63-292:78",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "679",
															"locator": "292:63-292:72",
															"path": "unit",
															"type": "Property",
															"source": {
																"localId": "678",
																"locator": "292:63-292:67",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "681",
														"locator": "292:81-292:83",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "d",
														"type": "Literal"
													}
												]
											}
										]
									},
									"then": {
										"localId": "686",
										"locator": "292:92-292:108",
										"path": "value",
										"type": "Property",
										"source": {
											"localId": "685",
											"locator": "292:92-292:102",
											"path": "value",
											"type": "Property",
											"source": {
												"localId": "684",
												"locator": "292:92-292:96",
												"name": "value",
												"type": "OperandRef"
											}
										}
									}
								},
								{
									"localId": "704",
									"locator": "293:9-293:115",
									"when": {
										"localId": "698",
										"locator": "293:14-293:85",
										"type": "Or",
										"operand": [
											{
												"localId": "692",
												"locator": "293:15-293:47",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "690",
														"locator": "293:26-293:41",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "689",
															"locator": "293:26-293:35",
															"path": "code",
															"type": "Property",
															"source": {
																"localId": "688",
																"locator": "293:26-293:30",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "691",
														"locator": "293:44-293:46",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "h",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "697",
												"locator": "293:52-293:84",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "695",
														"locator": "293:63-293:78",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "694",
															"locator": "293:63-293:72",
															"path": "unit",
															"type": "Property",
															"source": {
																"localId": "693",
																"locator": "293:63-293:67",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "696",
														"locator": "293:81-293:83",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "h",
														"type": "Literal"
													}
												]
											}
										]
									},
									"then": {
										"localId": "703",
										"locator": "293:92-293:115",
										"type": "Divide",
										"operand": [
											{
												"localId": "701",
												"locator": "293:92-293:108",
												"path": "value",
												"type": "Property",
												"source": {
													"localId": "700",
													"locator": "293:92-293:102",
													"path": "value",
													"type": "Property",
													"source": {
														"localId": "699",
														"locator": "293:92-293:96",
														"name": "value",
														"type": "OperandRef"
													}
												}
											},
											{
												"localId": "702",
												"locator": "293:112-293:115",
												"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
												"value": "24.0",
												"type": "Literal"
											}
										]
									}
								},
								{
									"localId": "723",
									"locator": "294:9-294:126",
									"when": {
										"localId": "715",
										"locator": "294:14-294:89",
										"type": "Or",
										"operand": [
											{
												"localId": "709",
												"locator": "294:15-294:49",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "707",
														"locator": "294:26-294:41",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "706",
															"locator": "294:26-294:35",
															"path": "code",
															"type": "Property",
															"source": {
																"localId": "705",
																"locator": "294:26-294:30",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "708",
														"locator": "294:44-294:48",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "min",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "714",
												"locator": "294:54-294:88",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "712",
														"locator": "294:65-294:80",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "711",
															"locator": "294:65-294:74",
															"path": "unit",
															"type": "Property",
															"source": {
																"localId": "710",
																"locator": "294:65-294:69",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "713",
														"locator": "294:83-294:87",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "min",
														"type": "Literal"
													}
												]
											}
										]
									},
									"then": {
										"localId": "722",
										"locator": "294:96-294:126",
										"type": "Divide",
										"operand": [
											{
												"localId": "720",
												"locator": "294:96-294:119",
												"type": "Divide",
												"operand": [
													{
														"localId": "718",
														"locator": "294:96-294:112",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "717",
															"locator": "294:96-294:106",
															"path": "value",
															"type": "Property",
															"source": {
																"localId": "716",
																"locator": "294:96-294:100",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "719",
														"locator": "294:116-294:119",
														"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
														"value": "60.0",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "721",
												"locator": "294:123-294:126",
												"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
												"value": "24.0",
												"type": "Literal"
											}
										]
									}
								},
								{
									"localId": "744",
									"locator": "295:9-295:129",
									"when": {
										"localId": "734",
										"locator": "295:14-295:85",
										"type": "Or",
										"operand": [
											{
												"localId": "728",
												"locator": "295:15-295:47",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "726",
														"locator": "295:26-295:41",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "725",
															"locator": "295:26-295:35",
															"path": "code",
															"type": "Property",
															"source": {
																"localId": "724",
																"locator": "295:26-295:30",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "727",
														"locator": "295:44-295:46",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "s",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "733",
												"locator": "295:52-295:84",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "731",
														"locator": "295:63-295:78",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "730",
															"locator": "295:63-295:72",
															"path": "unit",
															"type": "Property",
															"source": {
																"localId": "729",
																"locator": "295:63-295:67",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "732",
														"locator": "295:81-295:83",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "s",
														"type": "Literal"
													}
												]
											}
										]
									},
									"then": {
										"localId": "743",
										"locator": "295:92-295:129",
										"type": "Divide",
										"operand": [
											{
												"localId": "741",
												"locator": "295:92-295:122",
												"type": "Divide",
												"operand": [
													{
														"localId": "739",
														"locator": "295:92-295:115",
														"type": "Divide",
														"operand": [
															{
																"localId": "737",
																"locator": "295:92-295:108",
																"path": "value",
																"type": "Property",
																"source": {
																	"localId": "736",
																	"locator": "295:92-295:102",
																	"path": "value",
																	"type": "Property",
																	"source": {
																		"localId": "735",
																		"locator": "295:92-295:96",
																		"name": "value",
																		"type": "OperandRef"
																	}
																}
															},
															{
																"localId": "738",
																"locator": "295:112-295:115",
																"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
																"value": "60.0",
																"type": "Literal"
															}
														]
													},
													{
														"localId": "740",
														"locator": "295:119-295:122",
														"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
														"value": "60.0",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "742",
												"locator": "295:126-295:129",
												"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
												"value": "24.0",
												"type": "Literal"
											}
										]
									}
								},
								{
									"localId": "767",
									"locator": "296:9-296:140",
									"when": {
										"localId": "755",
										"locator": "296:14-296:87",
										"type": "Or",
										"operand": [
											{
												"localId": "749",
												"locator": "296:15-296:48",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "747",
														"locator": "296:26-296:41",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "746",
															"locator": "296:26-296:35",
															"path": "code",
															"type": "Property",
															"source": {
																"localId": "745",
																"locator": "296:26-296:30",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "748",
														"locator": "296:44-296:47",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "ms",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "754",
												"locator": "296:53-296:86",
												"type": "StartsWith",
												"operand": [
													{
														"localId": "752",
														"locator": "296:64-296:79",
														"path": "value",
														"type": "Property",
														"source": {
															"localId": "751",
															"locator": "296:64-296:73",
															"path": "unit",
															"type": "Property",
															"source": {
																"localId": "750",
																"locator": "296:64-296:68",
																"name": "value",
																"type": "OperandRef"
															}
														}
													},
													{
														"localId": "753",
														"locator": "296:82-296:85",
														"valueType": "{urn:hl7-org:elm-types:r1}String",
														"value": "ms",
														"type": "Literal"
													}
												]
											}
										]
									},
									"then": {
										"localId": "766",
										"locator": "296:94-296:140",
										"type": "Divide",
										"operand": [
											{
												"localId": "764",
												"locator": "296:94-296:131",
												"type": "Divide",
												"operand": [
													{
														"localId": "762",
														"locator": "296:94-296:124",
														"type": "Divide",
														"operand": [
															{
																"localId": "760",
																"locator": "296:94-296:117",
																"type": "Divide",
																"operand": [
																	{
																		"localId": "758",
																		"locator": "296:94-296:110",
																		"path": "value",
																		"type": "Property",
																		"source": {
																			"localId": "757",
																			"locator": "296:94-296:104",
																			"path": "value",
																			"type": "Property",
																			"source": {
																				"localId": "756",
																				"locator": "296:94-296:98",
																				"name": "value",
																				"type": "OperandRef"
																			}
																		}
																	},
																	{
																		"localId": "759",
																		"locator": "296:114-296:117",
																		"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
																		"value": "60.0",
																		"type": "Literal"
																	}
																]
															},
															{
																"localId": "761",
																"locator": "296:121-296:124",
																"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
																"value": "60.0",
																"type": "Literal"
															}
														]
													},
													{
														"localId": "763",
														"locator": "296:128-296:131",
														"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
														"value": "24.0",
														"type": "Literal"
													}
												]
											},
											{
												"localId": "765",
												"locator": "296:135-296:140",
												"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
												"value": "1000.0",
												"type": "Literal"
											}
										]
									}
								}
							],
							"else": {
								"type": "ToDecimal",
								"operand": {
									"localId": "773",
									"locator": "297:14-297:88",
									"type": "Message",
									"source": {
										"localId": "768",
										"locator": "297:22-297:25",
										"valueType": "{urn:hl7-org:elm-types:r1}Integer",
										"value": "1000",
										"type": "Literal"
									},
									"condition": {
										"localId": "769",
										"locator": "297:28-297:31",
										"valueType": "{urn:hl7-org:elm-types:r1}Boolean",
										"value": "true",
										"type": "Literal"
									},
									"code": {
										"localId": "770",
										"locator": "297:34-297:44",
										"valueType": "{urn:hl7-org:elm-types:r1}String",
										"value": "Undefined",
										"type": "Literal"
									},
									"severity": {
										"localId": "771",
										"locator": "297:47-297:53",
										"valueType": "{urn:hl7-org:elm-types:r1}String",
										"value": "Error",
										"type": "Literal"
									},
									"message": {
										"localId": "772",
										"locator": "297:56-297:87",
										"valueType": "{urn:hl7-org:elm-types:r1}String",
										"value": "Unsupported duration unit code",
										"type": "Literal"
									}
								}
							}
						}
					},
					"operand": [
						{
							"name": "value",
							"operandTypeSpecifier": {
								"localId": "618",
								"locator": "285:43-285:55",
								"name": "{http://hl7.org/fhir}Duration",
								"type": "NamedTypeSpecifier"
							}
						}
					]
				},
				{
					"localId": "826",
					"locator": "252:1-272:118",
					"name": "ProbableDaysInRange",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "826",
								"s": [
									{
										"value": [
											"define function ",
											"ProbableDaysInRange",
											"(",
											"Orders",
											" "
										]
									},
									{
										"r": "508",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "507",
												"s": [
													{
														"value": [
															"MedicationRequest"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											", ",
											"daysPast",
											" "
										]
									},
									{
										"r": "509",
										"s": [
											{
												"value": [
													"Integer"
												]
											}
										]
									},
									{
										"value": [
											", ",
											"numDaysInDaysPast",
											" "
										]
									},
									{
										"r": "510",
										"s": [
											{
												"value": [
													"Integer"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "825",
										"s": [
											{
												"r": "825",
												"s": [
													{
														"s": [
															{
																"r": "512",
																"s": [
																	{
																		"r": "511",
																		"s": [
																			{
																				"s": [
																					{
																						"value": [
																							"Orders"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"orders"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"s": [
															{
																"value": [
																	"let\n      "
																]
															},
															{
																"r": "521",
																"s": [
																	{
																		"value": [
																			"frequency",
																			": "
																		]
																	},
																	{
																		"r": "520",
																		"s": [
																			{
																				"r": "519",
																				"s": [
																					{
																						"r": "518",
																						"s": [
																							{
																								"r": "517",
																								"s": [
																									{
																										"r": "516",
																										"s": [
																											{
																												"r": "514",
																												"s": [
																													{
																														"r": "513",
																														"s": [
																															{
																																"value": [
																																	"orders"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "514",
																														"s": [
																															{
																																"value": [
																																	"dosageInstruction"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"r": "515",
																												"value": [
																													"[",
																													"0",
																													"]"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "517",
																										"s": [
																											{
																												"value": [
																													"timing"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "518",
																								"s": [
																									{
																										"value": [
																											"repeat"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "519",
																						"s": [
																							{
																								"value": [
																									"frequency"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "520",
																				"s": [
																					{
																						"value": [
																							"value"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "530",
																"s": [
																	{
																		"value": [
																			"period",
																			": "
																		]
																	},
																	{
																		"r": "529",
																		"s": [
																			{
																				"r": "528",
																				"s": [
																					{
																						"r": "527",
																						"s": [
																							{
																								"r": "526",
																								"s": [
																									{
																										"r": "525",
																										"s": [
																											{
																												"r": "523",
																												"s": [
																													{
																														"r": "522",
																														"s": [
																															{
																																"value": [
																																	"orders"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "523",
																														"s": [
																															{
																																"value": [
																																	"dosageInstruction"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"r": "524",
																												"value": [
																													"[",
																													"0",
																													"]"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "526",
																										"s": [
																											{
																												"value": [
																													"timing"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "527",
																								"s": [
																									{
																										"value": [
																											"repeat"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "528",
																						"s": [
																							{
																								"value": [
																									"period"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "529",
																				"s": [
																					{
																						"value": [
																							"value"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "594",
																"s": [
																	{
																		"value": [
																			"periodDays",
																			": "
																		]
																	},
																	{
																		"r": "593",
																		"s": [
																			{
																				"value": [
																					"GetPeriodDays",
																					"("
																				]
																			},
																			{
																				"r": "538",
																				"s": [
																					{
																						"r": "537",
																						"s": [
																							{
																								"r": "536",
																								"s": [
																									{
																										"r": "535",
																										"s": [
																											{
																												"r": "534",
																												"s": [
																													{
																														"r": "532",
																														"s": [
																															{
																																"r": "531",
																																"s": [
																																	{
																																		"value": [
																																			"orders"
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	"."
																																]
																															},
																															{
																																"r": "532",
																																"s": [
																																	{
																																		"value": [
																																			"dosageInstruction"
																																		]
																																	}
																																]
																															}
																														]
																													},
																													{
																														"r": "533",
																														"value": [
																															"[",
																															"0",
																															"]"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "535",
																												"s": [
																													{
																														"value": [
																															"timing"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "536",
																										"s": [
																											{
																												"value": [
																													"repeat"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "537",
																								"s": [
																									{
																										"value": [
																											"periodUnit"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "538",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "609",
																"s": [
																	{
																		"value": [
																			"dosesPerDay",
																			":\n        "
																		]
																	},
																	{
																		"r": "608",
																		"s": [
																			{
																				"value": [
																					"if "
																				]
																			},
																			{
																				"r": "601",
																				"s": [
																					{
																						"r": "599",
																						"s": [
																							{
																								"value": [
																									"("
																								]
																							},
																							{
																								"r": "599",
																								"s": [
																									{
																										"r": "595",
																										"s": [
																											{
																												"value": [
																													"frequency"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" / "
																										]
																									},
																									{
																										"r": "598",
																										"s": [
																											{
																												"value": [
																													"("
																												]
																											},
																											{
																												"r": "598",
																												"s": [
																													{
																														"r": "596",
																														"s": [
																															{
																																"value": [
																																	"period"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															" * "
																														]
																													},
																													{
																														"r": "597",
																														"s": [
																															{
																																"value": [
																																	"periodDays"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													")"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					},
																					{
																						"r": "600",
																						"value": [
																							" ",
																							">=",
																							" ",
																							"1.0"
																						]
																					}
																				]
																			},
																			{
																				"r": "602",
																				"value": [
																					"\n        then ",
																					"1.0",
																					"\n        else "
																				]
																			},
																			{
																				"r": "607",
																				"s": [
																					{
																						"r": "603",
																						"s": [
																							{
																								"value": [
																									"frequency"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" / "
																						]
																					},
																					{
																						"r": "606",
																						"s": [
																							{
																								"value": [
																									"("
																								]
																							},
																							{
																								"r": "606",
																								"s": [
																									{
																										"r": "604",
																										"s": [
																											{
																												"value": [
																													"period"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" * "
																										]
																									},
																									{
																										"r": "605",
																										"s": [
																											{
																												"value": [
																													"periodDays"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "614",
																"s": [
																	{
																		"value": [
																			"repeat",
																			": "
																		]
																	},
																	{
																		"r": "613",
																		"s": [
																			{
																				"r": "612",
																				"s": [
																					{
																						"r": "611",
																						"s": [
																							{
																								"r": "610",
																								"s": [
																									{
																										"value": [
																											"orders"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "611",
																								"s": [
																									{
																										"value": [
																											"dispenseRequest"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "612",
																						"s": [
																							{
																								"value": [
																									"numberOfRepeatsAllowed"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "613",
																				"s": [
																					{
																						"value": [
																							"value"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "778",
																"s": [
																	{
																		"value": [
																			"supplyDuration",
																			": "
																		]
																	},
																	{
																		"r": "777",
																		"s": [
																			{
																				"value": [
																					"GetDurationInDays",
																					"("
																				]
																			},
																			{
																				"r": "617",
																				"s": [
																					{
																						"r": "616",
																						"s": [
																							{
																								"r": "615",
																								"s": [
																									{
																										"value": [
																											"orders"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "616",
																								"s": [
																									{
																										"value": [
																											"dispenseRequest"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "617",
																						"s": [
																							{
																								"value": [
																									"expectedSupplyDuration"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					")"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "786",
																"s": [
																	{
																		"value": [
																			"validityPeriod",
																			": "
																		]
																	},
																	{
																		"r": "785",
																		"s": [
																			{
																				"value": [
																					"days between "
																				]
																			},
																			{
																				"r": "783",
																				"s": [
																					{
																						"r": "782",
																						"s": [
																							{
																								"r": "781",
																								"s": [
																									{
																										"r": "780",
																										"s": [
																											{
																												"r": "779",
																												"s": [
																													{
																														"value": [
																															"orders"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "780",
																												"s": [
																													{
																														"value": [
																															"dispenseRequest"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "781",
																										"s": [
																											{
																												"value": [
																													"validityPeriod"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "782",
																								"s": [
																									{
																										"value": [
																											"\"start\""
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "783",
																						"s": [
																							{
																								"value": [
																									"value"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" and "
																				]
																			},
																			{
																				"r": "784",
																				"s": [
																					{
																						"value": [
																							"Today",
																							"()"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	",\n      "
																]
															},
															{
																"r": "803",
																"s": [
																	{
																		"value": [
																			"endDifference",
																			":\n        "
																		]
																	},
																	{
																		"r": "802",
																		"s": [
																			{
																				"value": [
																					"if "
																				]
																			},
																			{
																				"r": "793",
																				"s": [
																					{
																						"r": "791",
																						"s": [
																							{
																								"r": "790",
																								"s": [
																									{
																										"r": "789",
																										"s": [
																											{
																												"r": "788",
																												"s": [
																													{
																														"r": "787",
																														"s": [
																															{
																																"value": [
																																	"orders"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "788",
																														"s": [
																															{
																																"value": [
																																	"dispenseRequest"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "789",
																												"s": [
																													{
																														"value": [
																															"validityPeriod"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "790",
																										"s": [
																											{
																												"value": [
																													"\"end\""
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "791",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" ",
																							"<",
																							" "
																						]
																					},
																					{
																						"r": "792",
																						"s": [
																							{
																								"value": [
																									"Today",
																									"()"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"\n        then "
																				]
																			},
																			{
																				"r": "800",
																				"s": [
																					{
																						"value": [
																							"days between "
																						]
																					},
																					{
																						"r": "798",
																						"s": [
																							{
																								"r": "797",
																								"s": [
																									{
																										"r": "796",
																										"s": [
																											{
																												"r": "795",
																												"s": [
																													{
																														"r": "794",
																														"s": [
																															{
																																"value": [
																																	"orders"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "795",
																														"s": [
																															{
																																"value": [
																																	"dispenseRequest"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "796",
																												"s": [
																													{
																														"value": [
																															"validityPeriod"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											"."
																										]
																									},
																									{
																										"r": "797",
																										"s": [
																											{
																												"value": [
																													"\"end\""
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "798",
																								"s": [
																									{
																										"value": [
																											"value"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" and "
																						]
																					},
																					{
																						"r": "799",
																						"s": [
																							{
																								"value": [
																									"Today",
																									"()"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"r": "801",
																				"value": [
																					"\n        else ",
																					"0"
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"r": "824",
														"s": [
															{
																"value": [
																	"return\n      "
																]
															},
															{
																"r": "823",
																"s": [
																	{
																		"value": [
																			"if "
																		]
																	},
																	{
																		"r": "808",
																		"s": [
																			{
																				"r": "806",
																				"s": [
																					{
																						"value": [
																							"("
																						]
																					},
																					{
																						"r": "806",
																						"s": [
																							{
																								"r": "804",
																								"s": [
																									{
																										"value": [
																											"repeat"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" * "
																								]
																							},
																							{
																								"r": "805",
																								"s": [
																									{
																										"value": [
																											"supplyDuration"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" ",
																					"<",
																					" "
																				]
																			},
																			{
																				"r": "807",
																				"s": [
																					{
																						"value": [
																							"numDaysInDaysPast"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"r": "809",
																		"value": [
																			" then ",
																			"false",
																			"\n      else\n        "
																		]
																	},
																	{
																		"r": "822",
																		"s": [
																			{
																				"r": "820",
																				"s": [
																					{
																						"value": [
																							"("
																						]
																					},
																					{
																						"r": "820",
																						"s": [
																							{
																								"r": "816",
																								"s": [
																									{
																										"r": "810",
																										"s": [
																											{
																												"value": [
																													"dosesPerDay"
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											" * "
																										]
																									},
																									{
																										"r": "815",
																										"s": [
																											{
																												"value": [
																													"("
																												]
																											},
																											{
																												"r": "815",
																												"s": [
																													{
																														"r": "813",
																														"s": [
																															{
																																"value": [
																																	"("
																																]
																															},
																															{
																																"r": "813",
																																"s": [
																																	{
																																		"r": "811",
																																		"s": [
																																			{
																																				"value": [
																																					"repeat"
																																				]
																																			}
																																		]
																																	},
																																	{
																																		"value": [
																																			" * "
																																		]
																																	},
																																	{
																																		"r": "812",
																																		"s": [
																																			{
																																				"value": [
																																					"supplyDuration"
																																				]
																																			}
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	")"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															" / "
																														]
																													},
																													{
																														"r": "814",
																														"s": [
																															{
																																"value": [
																																	"validityPeriod"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													")"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									" * "
																								]
																							},
																							{
																								"r": "819",
																								"s": [
																									{
																										"value": [
																											"("
																										]
																									},
																									{
																										"r": "819",
																										"s": [
																											{
																												"r": "817",
																												"s": [
																													{
																														"value": [
																															"daysPast"
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													" - "
																												]
																											},
																											{
																												"r": "818",
																												"s": [
																													{
																														"value": [
																															"endDifference"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							")"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					" ",
																					">=",
																					" "
																				]
																			},
																			{
																				"r": "821",
																				"s": [
																					{
																						"value": [
																							"numDaysInDaysPast"
																						]
																					}
																				]
																			}
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "825",
						"locator": "253:3-272:118",
						"type": "Query",
						"source": [
							{
								"localId": "512",
								"locator": "253:3-253:15",
								"alias": "orders",
								"expression": {
									"localId": "511",
									"locator": "253:3-253:8",
									"name": "Orders",
									"type": "OperandRef"
								}
							}
						],
						"let": [
							{
								"localId": "521",
								"locator": "255:7-255:74",
								"identifier": "frequency",
								"expression": {
									"localId": "520",
									"locator": "255:18-255:74",
									"path": "value",
									"type": "Property",
									"source": {
										"localId": "519",
										"locator": "255:18-255:68",
										"path": "frequency",
										"type": "Property",
										"source": {
											"localId": "518",
											"locator": "255:18-255:58",
											"path": "repeat",
											"type": "Property",
											"source": {
												"localId": "517",
												"locator": "255:18-255:51",
												"path": "timing",
												"type": "Property",
												"source": {
													"localId": "516",
													"locator": "255:18-255:44",
													"type": "Indexer",
													"operand": [
														{
															"localId": "514",
															"locator": "255:18-255:41",
															"path": "dosageInstruction",
															"scope": "orders",
															"type": "Property"
														},
														{
															"localId": "515",
															"locator": "255:43",
															"valueType": "{urn:hl7-org:elm-types:r1}Integer",
															"value": "0",
															"type": "Literal"
														}
													]
												}
											}
										}
									}
								}
							},
							{
								"localId": "530",
								"locator": "256:7-256:68",
								"identifier": "period",
								"expression": {
									"localId": "529",
									"locator": "256:15-256:68",
									"path": "value",
									"type": "Property",
									"source": {
										"localId": "528",
										"locator": "256:15-256:62",
										"path": "period",
										"type": "Property",
										"source": {
											"localId": "527",
											"locator": "256:15-256:55",
											"path": "repeat",
											"type": "Property",
											"source": {
												"localId": "526",
												"locator": "256:15-256:48",
												"path": "timing",
												"type": "Property",
												"source": {
													"localId": "525",
													"locator": "256:15-256:41",
													"type": "Indexer",
													"operand": [
														{
															"localId": "523",
															"locator": "256:15-256:38",
															"path": "dosageInstruction",
															"scope": "orders",
															"type": "Property"
														},
														{
															"localId": "524",
															"locator": "256:40",
															"valueType": "{urn:hl7-org:elm-types:r1}Integer",
															"value": "0",
															"type": "Literal"
														}
													]
												}
											}
										}
									}
								}
							},
							{
								"localId": "594",
								"locator": "257:7-257:91",
								"identifier": "periodDays",
								"expression": {
									"localId": "593",
									"locator": "257:19-257:91",
									"name": "GetPeriodDays",
									"type": "FunctionRef",
									"operand": [
										{
											"localId": "538",
											"locator": "257:33-257:90",
											"path": "value",
											"type": "Property",
											"source": {
												"localId": "537",
												"locator": "257:33-257:84",
												"path": "periodUnit",
												"type": "Property",
												"source": {
													"localId": "536",
													"locator": "257:33-257:73",
													"path": "repeat",
													"type": "Property",
													"source": {
														"localId": "535",
														"locator": "257:33-257:66",
														"path": "timing",
														"type": "Property",
														"source": {
															"localId": "534",
															"locator": "257:33-257:59",
															"type": "Indexer",
															"operand": [
																{
																	"localId": "532",
																	"locator": "257:33-257:56",
																	"path": "dosageInstruction",
																	"scope": "orders",
																	"type": "Property"
																},
																{
																	"localId": "533",
																	"locator": "257:58",
																	"valueType": "{urn:hl7-org:elm-types:r1}Integer",
																	"value": "0",
																	"type": "Literal"
																}
															]
														}
													}
												}
											}
										}
									]
								}
							},
							{
								"localId": "609",
								"locator": "258:7-261:46",
								"identifier": "dosesPerDay",
								"expression": {
									"localId": "608",
									"locator": "259:9-261:46",
									"type": "If",
									"condition": {
										"asType": "{urn:hl7-org:elm-types:r1}Boolean",
										"type": "As",
										"operand": {
											"localId": "601",
											"locator": "259:12-259:53",
											"type": "GreaterOrEqual",
											"operand": [
												{
													"localId": "599",
													"locator": "259:12-259:46",
													"type": "Divide",
													"operand": [
														{
															"type": "ToDecimal",
															"operand": {
																"localId": "595",
																"locator": "259:13-259:21",
																"name": "frequency",
																"type": "QueryLetRef"
															}
														},
														{
															"localId": "598",
															"locator": "259:25-259:45",
															"type": "Multiply",
															"operand": [
																{
																	"localId": "596",
																	"locator": "259:26-259:31",
																	"name": "period",
																	"type": "QueryLetRef"
																},
																{
																	"localId": "597",
																	"locator": "259:35-259:44",
																	"name": "periodDays",
																	"type": "QueryLetRef"
																}
															]
														}
													]
												},
												{
													"localId": "600",
													"locator": "259:51-259:53",
													"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
													"value": "1.0",
													"type": "Literal"
												}
											]
										}
									},
									"then": {
										"localId": "602",
										"locator": "260:14-260:16",
										"valueType": "{urn:hl7-org:elm-types:r1}Decimal",
										"value": "1.0",
										"type": "Literal"
									},
									"else": {
										"localId": "607",
										"locator": "261:14-261:46",
										"type": "Divide",
										"operand": [
											{
												"type": "ToDecimal",
												"operand": {
													"localId": "603",
													"locator": "261:14-261:22",
													"name": "frequency",
													"type": "QueryLetRef"
												}
											},
											{
												"localId": "606",
												"locator": "261:26-261:46",
												"type": "Multiply",
												"operand": [
													{
														"localId": "604",
														"locator": "261:27-261:32",
														"name": "period",
														"type": "QueryLetRef"
													},
													{
														"localId": "605",
														"locator": "261:36-261:45",
														"name": "periodDays",
														"type": "QueryLetRef"
													}
												]
											}
										]
									}
								}
							},
							{
								"localId": "614",
								"locator": "262:7-262:65",
								"identifier": "repeat",
								"expression": {
									"localId": "613",
									"locator": "262:15-262:65",
									"path": "value",
									"type": "Property",
									"source": {
										"localId": "612",
										"locator": "262:15-262:59",
										"path": "numberOfRepeatsAllowed",
										"type": "Property",
										"source": {
											"localId": "611",
											"locator": "262:15-262:36",
											"path": "dispenseRequest",
											"scope": "orders",
											"type": "Property"
										}
									}
								}
							},
							{
								"localId": "778",
								"locator": "263:7-263:86",
								"identifier": "supplyDuration",
								"expression": {
									"localId": "777",
									"locator": "263:23-263:86",
									"name": "GetDurationInDays",
									"type": "FunctionRef",
									"operand": [
										{
											"localId": "617",
											"locator": "263:41-263:85",
											"path": "expectedSupplyDuration",
											"type": "Property",
											"source": {
												"localId": "616",
												"locator": "263:41-263:62",
												"path": "dispenseRequest",
												"scope": "orders",
												"type": "Property"
											}
										}
									]
								}
							},
							{
								"localId": "786",
								"locator": "264:7-264:98",
								"identifier": "validityPeriod",
								"expression": {
									"localId": "785",
									"locator": "264:23-264:98",
									"precision": "Day",
									"type": "DurationBetween",
									"operand": [
										{
											"localId": "783",
											"locator": "264:36-264:86",
											"path": "value",
											"type": "Property",
											"source": {
												"localId": "782",
												"locator": "264:36-264:80",
												"path": "start",
												"type": "Property",
												"source": {
													"localId": "781",
													"locator": "264:36-264:72",
													"path": "validityPeriod",
													"type": "Property",
													"source": {
														"localId": "780",
														"locator": "264:36-264:57",
														"path": "dispenseRequest",
														"scope": "orders",
														"type": "Property"
													}
												}
											}
										},
										{
											"type": "ToDateTime",
											"operand": {
												"localId": "784",
												"locator": "264:92-264:98",
												"type": "Today"
											}
										}
									]
								}
							},
							{
								"localId": "803",
								"locator": "265:7-268:14",
								"identifier": "endDifference",
								"expression": {
									"localId": "802",
									"locator": "266:9-268:14",
									"type": "If",
									"condition": {
										"asType": "{urn:hl7-org:elm-types:r1}Boolean",
										"type": "As",
										"operand": {
											"localId": "793",
											"locator": "266:12-266:70",
											"type": "Less",
											"operand": [
												{
													"localId": "791",
													"locator": "266:12-266:60",
													"path": "value",
													"type": "Property",
													"source": {
														"localId": "790",
														"locator": "266:12-266:54",
														"path": "end",
														"type": "Property",
														"source": {
															"localId": "789",
															"locator": "266:12-266:48",
															"path": "validityPeriod",
															"type": "Property",
															"source": {
																"localId": "788",
																"locator": "266:12-266:33",
																"path": "dispenseRequest",
																"scope": "orders",
																"type": "Property"
															}
														}
													}
												},
												{
													"type": "ToDateTime",
													"operand": {
														"localId": "792",
														"locator": "266:64-266:70",
														"type": "Today"
													}
												}
											]
										}
									},
									"then": {
										"localId": "800",
										"locator": "267:14-267:87",
										"precision": "Day",
										"type": "DurationBetween",
										"operand": [
											{
												"localId": "798",
												"locator": "267:27-267:75",
												"path": "value",
												"type": "Property",
												"source": {
													"localId": "797",
													"locator": "267:27-267:69",
													"path": "end",
													"type": "Property",
													"source": {
														"localId": "796",
														"locator": "267:27-267:63",
														"path": "validityPeriod",
														"type": "Property",
														"source": {
															"localId": "795",
															"locator": "267:27-267:48",
															"path": "dispenseRequest",
															"scope": "orders",
															"type": "Property"
														}
													}
												}
											},
											{
												"type": "ToDateTime",
												"operand": {
													"localId": "799",
													"locator": "267:81-267:87",
													"type": "Today"
												}
											}
										]
									},
									"else": {
										"localId": "801",
										"locator": "268:14",
										"valueType": "{urn:hl7-org:elm-types:r1}Integer",
										"value": "0",
										"type": "Literal"
									}
								}
							}
						],
						"relationship": [],
						"return": {
							"localId": "824",
							"locator": "269:5-272:118",
							"expression": {
								"localId": "823",
								"locator": "270:7-272:118",
								"type": "If",
								"condition": {
									"asType": "{urn:hl7-org:elm-types:r1}Boolean",
									"type": "As",
									"operand": {
										"localId": "808",
										"locator": "270:10-270:54",
										"type": "Less",
										"operand": [
											{
												"localId": "806",
												"locator": "270:10-270:34",
												"type": "Multiply",
												"operand": [
													{
														"type": "ToDecimal",
														"operand": {
															"localId": "804",
															"locator": "270:11-270:16",
															"name": "repeat",
															"type": "QueryLetRef"
														}
													},
													{
														"localId": "805",
														"locator": "270:20-270:33",
														"name": "supplyDuration",
														"type": "QueryLetRef"
													}
												]
											},
											{
												"type": "ToDecimal",
												"operand": {
													"localId": "807",
													"locator": "270:38-270:54",
													"name": "numDaysInDaysPast",
													"type": "OperandRef"
												}
											}
										]
									}
								},
								"then": {
									"localId": "809",
									"locator": "270:61-270:65",
									"valueType": "{urn:hl7-org:elm-types:r1}Boolean",
									"value": "false",
									"type": "Literal"
								},
								"else": {
									"localId": "822",
									"locator": "272:9-272:118",
									"type": "GreaterOrEqual",
									"operand": [
										{
											"localId": "820",
											"locator": "272:9-272:97",
											"type": "Multiply",
											"operand": [
												{
													"localId": "816",
													"locator": "272:10-272:67",
													"type": "Multiply",
													"operand": [
														{
															"localId": "810",
															"locator": "272:10-272:20",
															"name": "dosesPerDay",
															"type": "QueryLetRef"
														},
														{
															"localId": "815",
															"locator": "272:24-272:67",
															"type": "Divide",
															"operand": [
																{
																	"localId": "813",
																	"locator": "272:25-272:49",
																	"type": "Multiply",
																	"operand": [
																		{
																			"type": "ToDecimal",
																			"operand": {
																				"localId": "811",
																				"locator": "272:26-272:31",
																				"name": "repeat",
																				"type": "QueryLetRef"
																			}
																		},
																		{
																			"localId": "812",
																			"locator": "272:35-272:48",
																			"name": "supplyDuration",
																			"type": "QueryLetRef"
																		}
																	]
																},
																{
																	"type": "ToDecimal",
																	"operand": {
																		"localId": "814",
																		"locator": "272:53-272:66",
																		"name": "validityPeriod",
																		"type": "QueryLetRef"
																	}
																}
															]
														}
													]
												},
												{
													"type": "ToDecimal",
													"operand": {
														"localId": "819",
														"locator": "272:71-272:96",
														"type": "Subtract",
														"operand": [
															{
																"localId": "817",
																"locator": "272:72-272:79",
																"name": "daysPast",
																"type": "OperandRef"
															},
															{
																"localId": "818",
																"locator": "272:83-272:95",
																"name": "endDifference",
																"type": "QueryLetRef"
															}
														]
													}
												}
											]
										},
										{
											"type": "ToDecimal",
											"operand": {
												"localId": "821",
												"locator": "272:102-272:118",
												"name": "numDaysInDaysPast",
												"type": "OperandRef"
											}
										}
									]
								}
							}
						}
					},
					"operand": [
						{
							"name": "Orders",
							"operandTypeSpecifier": {
								"localId": "508",
								"locator": "252:44-252:66",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "507",
									"locator": "252:49-252:65",
									"name": "{http://hl7.org/fhir}MedicationRequest",
									"type": "NamedTypeSpecifier"
								}
							}
						},
						{
							"name": "daysPast",
							"operandTypeSpecifier": {
								"localId": "509",
								"locator": "252:78-252:84",
								"name": "{urn:hl7-org:elm-types:r1}Integer",
								"type": "NamedTypeSpecifier"
							}
						},
						{
							"name": "numDaysInDaysPast",
							"operandTypeSpecifier": {
								"localId": "510",
								"locator": "252:105-252:111",
								"name": "{urn:hl7-org:elm-types:r1}Integer",
								"type": "NamedTypeSpecifier"
							}
						}
					]
				},
				{
					"localId": "836",
					"locator": "300:1-301:53",
					"name": "GetIngredient",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "836",
								"s": [
									{
										"value": [
											"define function ",
											"GetIngredient",
											"(",
											"rxNormCode",
											" "
										]
									},
									{
										"r": "831",
										"s": [
											{
												"value": [
													"Code"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "835",
										"s": [
											{
												"r": "835",
												"s": [
													{
														"r": "834",
														"s": [
															{
																"r": "832",
																"s": [
																	{
																		"value": [
																			"OMTKLogic"
																		]
																	}
																]
															},
															{
																"value": [
																	"."
																]
															},
															{
																"r": "834",
																"s": [
																	{
																		"value": [
																			"GetIngredients",
																			"("
																		]
																	},
																	{
																		"r": "833",
																		"s": [
																			{
																				"value": [
																					"rxNormCode"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			")"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"."
														]
													},
													{
														"r": "835",
														"s": [
															{
																"value": [
																	"ingredientName"
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "835",
						"locator": "301:3-301:53",
						"type": "Query",
						"source": [
							{
								"alias": "$this",
								"expression": {
									"localId": "834",
									"locator": "301:3-301:38",
									"name": "GetIngredients",
									"libraryName": "OMTKLogic",
									"type": "FunctionRef",
									"operand": [
										{
											"localId": "833",
											"locator": "301:28-301:37",
											"name": "rxNormCode",
											"type": "OperandRef"
										}
									]
								}
							}
						],
						"where": {
							"type": "Not",
							"operand": {
								"type": "IsNull",
								"operand": {
									"path": "ingredientName",
									"type": "Property",
									"source": {
										"name": "$this",
										"type": "AliasRef"
									}
								}
							}
						},
						"return": {
							"expression": {
								"path": "ingredientName",
								"type": "Property",
								"source": {
									"name": "$this",
									"type": "AliasRef"
								}
							}
						}
					},
					"operand": [
						{
							"name": "rxNormCode",
							"operandTypeSpecifier": {
								"localId": "831",
								"locator": "300:42-300:45",
								"name": "{urn:hl7-org:elm-types:r1}Code",
								"type": "NamedTypeSpecifier"
							}
						}
					]
				},
				{
					"localId": "845",
					"locator": "303:1-304:43",
					"name": "GetIngredients",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "845",
								"s": [
									{
										"value": [
											"define function ",
											"GetIngredients",
											"(",
											"rxNormCodes",
											" "
										]
									},
									{
										"r": "838",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "837",
												"s": [
													{
														"value": [
															"Code"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "844",
										"s": [
											{
												"r": "844",
												"s": [
													{
														"s": [
															{
																"r": "840",
																"s": [
																	{
																		"r": "839",
																		"s": [
																			{
																				"s": [
																					{
																						"value": [
																							"rxNormCodes"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"rnc"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" "
														]
													},
													{
														"r": "843",
														"s": [
															{
																"value": [
																	"return "
																]
															},
															{
																"r": "842",
																"s": [
																	{
																		"value": [
																			"GetIngredient",
																			"("
																		]
																	},
																	{
																		"r": "841",
																		"s": [
																			{
																				"value": [
																					"rnc"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			")"
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "844",
						"locator": "304:3-304:43",
						"type": "Query",
						"source": [
							{
								"localId": "840",
								"locator": "304:3-304:17",
								"alias": "rnc",
								"expression": {
									"localId": "839",
									"locator": "304:3-304:13",
									"name": "rxNormCodes",
									"type": "OperandRef"
								}
							}
						],
						"relationship": [],
						"return": {
							"localId": "843",
							"locator": "304:19-304:43",
							"expression": {
								"localId": "842",
								"locator": "304:26-304:43",
								"name": "GetIngredient",
								"type": "FunctionRef",
								"operand": [
									{
										"localId": "841",
										"locator": "304:40-304:42",
										"name": "rnc",
										"type": "AliasRef"
									}
								]
							}
						}
					},
					"operand": [
						{
							"name": "rxNormCodes",
							"operandTypeSpecifier": {
								"localId": "838",
								"locator": "303:44-303:53",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "837",
									"locator": "303:49-303:52",
									"name": "{urn:hl7-org:elm-types:r1}Code",
									"type": "NamedTypeSpecifier"
								}
							}
						}
					]
				},
				{
					"localId": "864",
					"locator": "347:1-350:3",
					"name": "ToRxNormCode",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "864",
								"s": [
									{
										"value": [
											"define function ",
											"ToRxNormCode",
											"(",
											"coding",
											" "
										]
									},
									{
										"r": "855",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "854",
												"s": [
													{
														"value": [
															"FHIR",
															".",
															"Coding"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "863",
										"s": [
											{
												"r": "863",
												"s": [
													{
														"value": [
															"singleton from "
														]
													},
													{
														"r": "862",
														"s": [
															{
																"value": [
																	"(\n    "
																]
															},
															{
																"r": "862",
																"s": [
																	{
																		"s": [
																			{
																				"r": "857",
																				"s": [
																					{
																						"r": "856",
																						"s": [
																							{
																								"s": [
																									{
																										"value": [
																											"coding"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" ",
																							"C"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" "
																		]
																	},
																	{
																		"r": "861",
																		"s": [
																			{
																				"value": [
																					"where "
																				]
																			},
																			{
																				"r": "861",
																				"s": [
																					{
																						"r": "859",
																						"s": [
																							{
																								"r": "858",
																								"s": [
																									{
																										"value": [
																											"C"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"."
																								]
																							},
																							{
																								"r": "859",
																								"s": [
																									{
																										"value": [
																											"system"
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							" ",
																							"=",
																							" "
																						]
																					},
																					{
																						"r": "860",
																						"s": [
																							{
																								"value": [
																									"'http://www.nlm.nih.gov/research/umls/rxnorm'"
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	"\n  )"
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "863",
						"locator": "348:3-350:3",
						"type": "SingletonFrom",
						"operand": {
							"localId": "862",
							"locator": "348:18-350:3",
							"type": "Query",
							"source": [
								{
									"localId": "857",
									"locator": "349:5-349:12",
									"alias": "C",
									"expression": {
										"localId": "856",
										"locator": "349:5-349:10",
										"name": "coding",
										"type": "OperandRef"
									}
								}
							],
							"relationship": [],
							"where": {
								"localId": "861",
								"locator": "349:14-349:75",
								"type": "Equal",
								"operand": [
									{
										"name": "ToString",
										"libraryName": "FHIRHelpers",
										"type": "FunctionRef",
										"operand": [
											{
												"localId": "859",
												"locator": "349:20-349:27",
												"path": "system",
												"scope": "C",
												"type": "Property"
											}
										]
									},
									{
										"localId": "860",
										"locator": "349:31-349:75",
										"valueType": "{urn:hl7-org:elm-types:r1}String",
										"value": "http://www.nlm.nih.gov/research/umls/rxnorm",
										"type": "Literal"
									}
								]
							}
						}
					},
					"operand": [
						{
							"name": "coding",
							"operandTypeSpecifier": {
								"localId": "855",
								"locator": "347:37-347:53",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "854",
									"locator": "347:42-347:52",
									"name": "{http://hl7.org/fhir}Coding",
									"type": "NamedTypeSpecifier"
								}
							}
						}
					]
				},
				{
					"localId": "871",
					"locator": "306:1-308:89",
					"name": "GetMedicationNames",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "871",
								"s": [
									{
										"value": [
											"define function ",
											"GetMedicationNames",
											"(",
											"medications",
											" "
										]
									},
									{
										"r": "847",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "846",
												"s": [
													{
														"value": [
															"MedicationRequest"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "870",
										"s": [
											{
												"r": "870",
												"s": [
													{
														"s": [
															{
																"r": "849",
																"s": [
																	{
																		"r": "848",
																		"s": [
																			{
																				"s": [
																					{
																						"value": [
																							"medications"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"M"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															"\n    "
														]
													},
													{
														"r": "869",
														"s": [
															{
																"value": [
																	"return "
																]
															},
															{
																"r": "868",
																"s": [
																	{
																		"r": "867",
																		"s": [
																			{
																				"r": "866",
																				"s": [
																					{
																						"r": "850",
																						"s": [
																							{
																								"value": [
																									"OMTKLogic"
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"."
																						]
																					},
																					{
																						"r": "866",
																						"s": [
																							{
																								"value": [
																									"GetIngredients",
																									"("
																								]
																							},
																							{
																								"r": "865",
																								"s": [
																									{
																										"value": [
																											"ToRxNormCode",
																											"("
																										]
																									},
																									{
																										"r": "853",
																										"s": [
																											{
																												"r": "852",
																												"s": [
																													{
																														"r": "851",
																														"s": [
																															{
																																"value": [
																																	"M"
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															"."
																														]
																													},
																													{
																														"r": "852",
																														"s": [
																															{
																																"value": [
																																	"medication"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													"."
																												]
																											},
																											{
																												"r": "853",
																												"s": [
																													{
																														"value": [
																															"coding"
																														]
																													}
																												]
																											}
																										]
																									},
																									{
																										"value": [
																											")"
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									")"
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"."
																				]
																			},
																			{
																				"r": "867",
																				"s": [
																					{
																						"value": [
																							"rxNormCode"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			"."
																		]
																	},
																	{
																		"r": "868",
																		"s": [
																			{
																				"value": [
																					"display"
																				]
																			}
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "870",
						"locator": "307:3-308:89",
						"type": "Query",
						"source": [
							{
								"localId": "849",
								"locator": "307:3-307:15",
								"alias": "M",
								"expression": {
									"localId": "848",
									"locator": "307:3-307:13",
									"name": "medications",
									"type": "OperandRef"
								}
							}
						],
						"relationship": [],
						"return": {
							"localId": "869",
							"locator": "308:5-308:89",
							"expression": {
								"localId": "868",
								"locator": "308:12-308:89",
								"type": "Query",
								"source": [
									{
										"alias": "$this",
										"expression": {
											"localId": "867",
											"locator": "308:12-308:81",
											"type": "Query",
											"source": [
												{
													"alias": "$this",
													"expression": {
														"localId": "866",
														"locator": "308:12-308:70",
														"name": "GetIngredients",
														"libraryName": "OMTKLogic",
														"type": "FunctionRef",
														"operand": [
															{
																"name": "ToCode",
																"libraryName": "FHIRHelpers",
																"type": "FunctionRef",
																"operand": [
																	{
																		"localId": "865",
																		"locator": "308:37-308:69",
																		"name": "ToRxNormCode",
																		"type": "FunctionRef",
																		"operand": [
																			{
																				"localId": "853",
																				"locator": "308:50-308:68",
																				"path": "coding",
																				"type": "Property",
																				"source": {
																					"localId": "852",
																					"locator": "308:50-308:61",
																					"path": "medication",
																					"scope": "M",
																					"type": "Property"
																				}
																			}
																		]
																	}
																]
															}
														]
													}
												}
											],
											"where": {
												"type": "Not",
												"operand": {
													"type": "IsNull",
													"operand": {
														"path": "rxNormCode",
														"type": "Property",
														"source": {
															"name": "$this",
															"type": "AliasRef"
														}
													}
												}
											},
											"return": {
												"expression": {
													"path": "rxNormCode",
													"type": "Property",
													"source": {
														"name": "$this",
														"type": "AliasRef"
													}
												}
											}
										}
									}
								],
								"where": {
									"type": "Not",
									"operand": {
										"type": "IsNull",
										"operand": {
											"path": "display",
											"type": "Property",
											"source": {
												"name": "$this",
												"type": "AliasRef"
											}
										}
									}
								},
								"return": {
									"expression": {
										"path": "display",
										"type": "Property",
										"source": {
											"name": "$this",
											"type": "AliasRef"
										}
									}
								}
							}
						}
					},
					"operand": [
						{
							"name": "medications",
							"operandTypeSpecifier": {
								"localId": "847",
								"locator": "306:48-306:70",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "846",
									"locator": "306:53-306:69",
									"name": "{http://hl7.org/fhir}MedicationRequest",
									"type": "NamedTypeSpecifier"
								}
							}
						}
					]
				},
				{
					"localId": "915",
					"locator": "317:1-334:7",
					"name": "CodeableConceptToString",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "915",
								"s": [
									{
										"value": [
											"define function ",
											"CodeableConceptToString",
											"(",
											"concept",
											" "
										]
									},
									{
										"r": "877",
										"s": [
											{
												"value": [
													"FHIR",
													".",
													"CodeableConcept"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "914",
										"s": [
											{
												"r": "914",
												"s": [
													{
														"value": [
															"if "
														]
													},
													{
														"r": "879",
														"s": [
															{
																"value": [
																	"("
																]
															},
															{
																"r": "879",
																"s": [
																	{
																		"r": "878",
																		"s": [
																			{
																				"value": [
																					"concept"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" is null"
																		]
																	}
																]
															},
															{
																"value": [
																	")"
																]
															}
														]
													},
													{
														"r": "880",
														"value": [
															"\n  then ",
															"null",
															"\n  else\n    "
														]
													},
													{
														"r": "913",
														"s": [
															{
																"r": "911",
																"s": [
																	{
																		"r": "881",
																		"s": [
																			{
																				"value": [
																					"'CodeableConcept { '"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" &\n      "
																		]
																	},
																	{
																		"r": "910",
																		"s": [
																			{
																				"value": [
																					"Combine",
																					"(\n        "
																				]
																			},
																			{
																				"r": "908",
																				"s": [
																					{
																						"value": [
																							"("
																						]
																					},
																					{
																						"r": "908",
																						"s": [
																							{
																								"s": [
																									{
																										"r": "883",
																										"s": [
																											{
																												"r": "882",
																												"s": [
																													{
																														"s": [
																															{
																																"value": [
																																	"concept",
																																	".",
																																	"coding"
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													" ",
																													"C"
																												]
																											}
																										]
																									}
																								]
																							},
																							{
																								"value": [
																									"\n          "
																								]
																							},
																							{
																								"r": "907",
																								"s": [
																									{
																										"value": [
																											"return\n            "
																										]
																									},
																									{
																										"r": "906",
																										"s": [
																											{
																												"r": "904",
																												"s": [
																													{
																														"r": "901",
																														"s": [
																															{
																																"r": "899",
																																"s": [
																																	{
																																		"r": "896",
																																		"s": [
																																			{
																																				"r": "894",
																																				"s": [
																																					{
																																						"r": "891",
																																						"s": [
																																							{
																																								"r": "889",
																																								"s": [
																																									{
																																										"r": "886",
																																										"s": [
																																											{
																																												"r": "884",
																																												"s": [
																																													{
																																														"value": [
																																															"'Coding { '"
																																														]
																																													}
																																												]
																																											},
																																											{
																																												"value": [
																																													" &\n              "
																																												]
																																											},
																																											{
																																												"r": "885",
																																												"s": [
																																													{
																																														"value": [
																																															"'code: '"
																																														]
																																													}
																																												]
																																											}
																																										]
																																									},
																																									{
																																										"value": [
																																											" & "
																																										]
																																									},
																																									{
																																										"r": "888",
																																										"s": [
																																											{
																																												"r": "887",
																																												"s": [
																																													{
																																														"value": [
																																															"C"
																																														]
																																													}
																																												]
																																											},
																																											{
																																												"value": [
																																													"."
																																												]
																																											},
																																											{
																																												"r": "888",
																																												"s": [
																																													{
																																														"value": [
																																															"code"
																																														]
																																													}
																																												]
																																											}
																																										]
																																									}
																																								]
																																							},
																																							{
																																								"value": [
																																									" &\n              "
																																								]
																																							},
																																							{
																																								"r": "890",
																																								"s": [
																																									{
																																										"value": [
																																											"' system: '"
																																										]
																																									}
																																								]
																																							}
																																						]
																																					},
																																					{
																																						"value": [
																																							" & "
																																						]
																																					},
																																					{
																																						"r": "893",
																																						"s": [
																																							{
																																								"r": "892",
																																								"s": [
																																									{
																																										"value": [
																																											"C"
																																										]
																																									}
																																								]
																																							},
																																							{
																																								"value": [
																																									"."
																																								]
																																							},
																																							{
																																								"r": "893",
																																								"s": [
																																									{
																																										"value": [
																																											"system"
																																										]
																																									}
																																								]
																																							}
																																						]
																																					}
																																				]
																																			},
																																			{
																																				"value": [
																																					" &\n              "
																																				]
																																			},
																																			{
																																				"r": "895",
																																				"s": [
																																					{
																																						"value": [
																																							"' version: '"
																																						]
																																					}
																																				]
																																			}
																																		]
																																	},
																																	{
																																		"value": [
																																			" & "
																																		]
																																	},
																																	{
																																		"r": "898",
																																		"s": [
																																			{
																																				"r": "897",
																																				"s": [
																																					{
																																						"value": [
																																							"C"
																																						]
																																					}
																																				]
																																			},
																																			{
																																				"value": [
																																					"."
																																				]
																																			},
																																			{
																																				"r": "898",
																																				"s": [
																																					{
																																						"value": [
																																							"version"
																																						]
																																					}
																																				]
																																			}
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	" &\n              "
																																]
																															},
																															{
																																"r": "900",
																																"s": [
																																	{
																																		"value": [
																																			"' display: '"
																																		]
																																	}
																																]
																															}
																														]
																													},
																													{
																														"value": [
																															" & "
																														]
																													},
																													{
																														"r": "903",
																														"s": [
																															{
																																"r": "902",
																																"s": [
																																	{
																																		"value": [
																																			"C"
																																		]
																																	}
																																]
																															},
																															{
																																"value": [
																																	"."
																																]
																															},
																															{
																																"r": "903",
																																"s": [
																																	{
																																		"value": [
																																			"display"
																																		]
																																	}
																																]
																															}
																														]
																													}
																												]
																											},
																											{
																												"value": [
																													" &\n            "
																												]
																											},
																											{
																												"r": "905",
																												"s": [
																													{
																														"value": [
																															"' }'"
																														]
																													}
																												]
																											}
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"value": [
																							"\n        )"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					",\n        "
																				]
																			},
																			{
																				"r": "909",
																				"s": [
																					{
																						"value": [
																							"','"
																						]
																					}
																				]
																			},
																			{
																				"value": [
																					"\n      )"
																				]
																			}
																		]
																	}
																]
															},
															{
																"value": [
																	" &\n   "
																]
															},
															{
																"r": "912",
																"s": [
																	{
																		"value": [
																			"' }'"
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "914",
						"locator": "318:3-334:7",
						"type": "If",
						"condition": {
							"asType": "{urn:hl7-org:elm-types:r1}Boolean",
							"type": "As",
							"operand": {
								"localId": "879",
								"locator": "318:6-318:22",
								"type": "IsNull",
								"operand": {
									"localId": "878",
									"locator": "318:7-318:13",
									"name": "concept",
									"type": "OperandRef"
								}
							}
						},
						"then": {
							"asType": "{urn:hl7-org:elm-types:r1}String",
							"type": "As",
							"operand": {
								"localId": "880",
								"locator": "319:8-319:11",
								"type": "Null"
							}
						},
						"else": {
							"localId": "913",
							"locator": "321:5-334:7",
							"type": "Concatenate",
							"operand": [
								{
									"type": "Coalesce",
									"operand": [
										{
											"localId": "911",
											"locator": "321:5-333:7",
											"type": "Concatenate",
											"operand": [
												{
													"type": "Coalesce",
													"operand": [
														{
															"localId": "881",
															"locator": "321:5-321:24",
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": "CodeableConcept { ",
															"type": "Literal"
														},
														{
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": "",
															"type": "Literal"
														}
													]
												},
												{
													"type": "Coalesce",
													"operand": [
														{
															"localId": "910",
															"locator": "322:7-333:7",
															"type": "Combine",
															"source": {
																"localId": "908",
																"locator": "323:9-331:9",
																"type": "Query",
																"source": [
																	{
																		"localId": "883",
																		"locator": "323:10-323:25",
																		"alias": "C",
																		"expression": {
																			"localId": "882",
																			"locator": "323:10-323:23",
																			"path": "coding",
																			"type": "Property",
																			"source": {
																				"name": "concept",
																				"type": "OperandRef"
																			}
																		}
																	}
																],
																"relationship": [],
																"return": {
																	"localId": "907",
																	"locator": "324:11-330:16",
																	"expression": {
																		"localId": "906",
																		"locator": "325:13-330:16",
																		"type": "Concatenate",
																		"operand": [
																			{
																				"type": "Coalesce",
																				"operand": [
																					{
																						"localId": "904",
																						"locator": "325:13-329:38",
																						"type": "Concatenate",
																						"operand": [
																							{
																								"type": "Coalesce",
																								"operand": [
																									{
																										"localId": "901",
																										"locator": "325:13-329:26",
																										"type": "Concatenate",
																										"operand": [
																											{
																												"type": "Coalesce",
																												"operand": [
																													{
																														"localId": "899",
																														"locator": "325:13-328:38",
																														"type": "Concatenate",
																														"operand": [
																															{
																																"type": "Coalesce",
																																"operand": [
																																	{
																																		"localId": "896",
																																		"locator": "325:13-328:26",
																																		"type": "Concatenate",
																																		"operand": [
																																			{
																																				"type": "Coalesce",
																																				"operand": [
																																					{
																																						"localId": "894",
																																						"locator": "325:13-327:36",
																																						"type": "Concatenate",
																																						"operand": [
																																							{
																																								"type": "Coalesce",
																																								"operand": [
																																									{
																																										"localId": "891",
																																										"locator": "325:13-327:25",
																																										"type": "Concatenate",
																																										"operand": [
																																											{
																																												"type": "Coalesce",
																																												"operand": [
																																													{
																																														"localId": "889",
																																														"locator": "325:13-326:31",
																																														"type": "Concatenate",
																																														"operand": [
																																															{
																																																"type": "Coalesce",
																																																"operand": [
																																																	{
																																																		"localId": "886",
																																																		"locator": "325:13-326:22",
																																																		"type": "Concatenate",
																																																		"operand": [
																																																			{
																																																				"type": "Coalesce",
																																																				"operand": [
																																																					{
																																																						"localId": "884",
																																																						"locator": "325:13-325:23",
																																																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																																																						"value": "Coding { ",
																																																						"type": "Literal"
																																																					},
																																																					{
																																																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																																																						"value": "",
																																																						"type": "Literal"
																																																					}
																																																				]
																																																			},
																																																			{
																																																				"type": "Coalesce",
																																																				"operand": [
																																																					{
																																																						"localId": "885",
																																																						"locator": "326:15-326:22",
																																																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																																																						"value": "code: ",
																																																						"type": "Literal"
																																																					},
																																																					{
																																																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																																																						"value": "",
																																																						"type": "Literal"
																																																					}
																																																				]
																																																			}
																																																		]
																																																	},
																																																	{
																																																		"valueType": "{urn:hl7-org:elm-types:r1}String",
																																																		"value": "",
																																																		"type": "Literal"
																																																	}
																																																]
																																															},
																																															{
																																																"type": "Coalesce",
																																																"operand": [
																																																	{
																																																		"name": "ToString",
																																																		"libraryName": "FHIRHelpers",
																																																		"type": "FunctionRef",
																																																		"operand": [
																																																			{
																																																				"localId": "888",
																																																				"locator": "326:26-326:31",
																																																				"path": "code",
																																																				"scope": "C",
																																																				"type": "Property"
																																																			}
																																																		]
																																																	},
																																																	{
																																																		"valueType": "{urn:hl7-org:elm-types:r1}String",
																																																		"value": "",
																																																		"type": "Literal"
																																																	}
																																																]
																																															}
																																														]
																																													},
																																													{
																																														"valueType": "{urn:hl7-org:elm-types:r1}String",
																																														"value": "",
																																														"type": "Literal"
																																													}
																																												]
																																											},
																																											{
																																												"type": "Coalesce",
																																												"operand": [
																																													{
																																														"localId": "890",
																																														"locator": "327:15-327:25",
																																														"valueType": "{urn:hl7-org:elm-types:r1}String",
																																														"value": " system: ",
																																														"type": "Literal"
																																													},
																																													{
																																														"valueType": "{urn:hl7-org:elm-types:r1}String",
																																														"value": "",
																																														"type": "Literal"
																																													}
																																												]
																																											}
																																										]
																																									},
																																									{
																																										"valueType": "{urn:hl7-org:elm-types:r1}String",
																																										"value": "",
																																										"type": "Literal"
																																									}
																																								]
																																							},
																																							{
																																								"type": "Coalesce",
																																								"operand": [
																																									{
																																										"name": "ToString",
																																										"libraryName": "FHIRHelpers",
																																										"type": "FunctionRef",
																																										"operand": [
																																											{
																																												"localId": "893",
																																												"locator": "327:29-327:36",
																																												"path": "system",
																																												"scope": "C",
																																												"type": "Property"
																																											}
																																										]
																																									},
																																									{
																																										"valueType": "{urn:hl7-org:elm-types:r1}String",
																																										"value": "",
																																										"type": "Literal"
																																									}
																																								]
																																							}
																																						]
																																					},
																																					{
																																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																																						"value": "",
																																						"type": "Literal"
																																					}
																																				]
																																			},
																																			{
																																				"type": "Coalesce",
																																				"operand": [
																																					{
																																						"localId": "895",
																																						"locator": "328:15-328:26",
																																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																																						"value": " version: ",
																																						"type": "Literal"
																																					},
																																					{
																																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																																						"value": "",
																																						"type": "Literal"
																																					}
																																				]
																																			}
																																		]
																																	},
																																	{
																																		"valueType": "{urn:hl7-org:elm-types:r1}String",
																																		"value": "",
																																		"type": "Literal"
																																	}
																																]
																															},
																															{
																																"type": "Coalesce",
																																"operand": [
																																	{
																																		"name": "ToString",
																																		"libraryName": "FHIRHelpers",
																																		"type": "FunctionRef",
																																		"operand": [
																																			{
																																				"localId": "898",
																																				"locator": "328:30-328:38",
																																				"path": "version",
																																				"scope": "C",
																																				"type": "Property"
																																			}
																																		]
																																	},
																																	{
																																		"valueType": "{urn:hl7-org:elm-types:r1}String",
																																		"value": "",
																																		"type": "Literal"
																																	}
																																]
																															}
																														]
																													},
																													{
																														"valueType": "{urn:hl7-org:elm-types:r1}String",
																														"value": "",
																														"type": "Literal"
																													}
																												]
																											},
																											{
																												"type": "Coalesce",
																												"operand": [
																													{
																														"localId": "900",
																														"locator": "329:15-329:26",
																														"valueType": "{urn:hl7-org:elm-types:r1}String",
																														"value": " display: ",
																														"type": "Literal"
																													},
																													{
																														"valueType": "{urn:hl7-org:elm-types:r1}String",
																														"value": "",
																														"type": "Literal"
																													}
																												]
																											}
																										]
																									},
																									{
																										"valueType": "{urn:hl7-org:elm-types:r1}String",
																										"value": "",
																										"type": "Literal"
																									}
																								]
																							},
																							{
																								"type": "Coalesce",
																								"operand": [
																									{
																										"name": "ToString",
																										"libraryName": "FHIRHelpers",
																										"type": "FunctionRef",
																										"operand": [
																											{
																												"localId": "903",
																												"locator": "329:30-329:38",
																												"path": "display",
																												"scope": "C",
																												"type": "Property"
																											}
																										]
																									},
																									{
																										"valueType": "{urn:hl7-org:elm-types:r1}String",
																										"value": "",
																										"type": "Literal"
																									}
																								]
																							}
																						]
																					},
																					{
																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																						"value": "",
																						"type": "Literal"
																					}
																				]
																			},
																			{
																				"type": "Coalesce",
																				"operand": [
																					{
																						"localId": "905",
																						"locator": "330:13-330:16",
																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																						"value": " }",
																						"type": "Literal"
																					},
																					{
																						"valueType": "{urn:hl7-org:elm-types:r1}String",
																						"value": "",
																						"type": "Literal"
																					}
																				]
																			}
																		]
																	}
																}
															},
															"separator": {
																"localId": "909",
																"locator": "332:9-332:11",
																"valueType": "{urn:hl7-org:elm-types:r1}String",
																"value": ",",
																"type": "Literal"
															}
														},
														{
															"valueType": "{urn:hl7-org:elm-types:r1}String",
															"value": "",
															"type": "Literal"
														}
													]
												}
											]
										},
										{
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "",
											"type": "Literal"
										}
									]
								},
								{
									"type": "Coalesce",
									"operand": [
										{
											"localId": "912",
											"locator": "334:4-334:7",
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": " }",
											"type": "Literal"
										},
										{
											"valueType": "{urn:hl7-org:elm-types:r1}String",
											"value": "",
											"type": "Literal"
										}
									]
								}
							]
						}
					},
					"operand": [
						{
							"name": "concept",
							"operandTypeSpecifier": {
								"localId": "877",
								"locator": "317:49-317:68",
								"name": "{http://hl7.org/fhir}CodeableConcept",
								"type": "NamedTypeSpecifier"
							}
						}
					]
				},
				{
					"localId": "919",
					"locator": "314:1-315:46",
					"name": "CodeableConceptsToString",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "919",
								"s": [
									{
										"value": [
											"define function ",
											"CodeableConceptsToString",
											"(",
											"concepts",
											" "
										]
									},
									{
										"r": "873",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "872",
												"s": [
													{
														"value": [
															"FHIR",
															".",
															"CodeableConcept"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "918",
										"s": [
											{
												"r": "918",
												"s": [
													{
														"s": [
															{
																"r": "875",
																"s": [
																	{
																		"r": "874",
																		"s": [
																			{
																				"s": [
																					{
																						"value": [
																							"concepts"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"c"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" "
														]
													},
													{
														"r": "917",
														"s": [
															{
																"value": [
																	"return "
																]
															},
															{
																"r": "916",
																"s": [
																	{
																		"value": [
																			"CodeableConceptToString",
																			"("
																		]
																	},
																	{
																		"r": "876",
																		"s": [
																			{
																				"value": [
																					"c"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			")"
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "918",
						"locator": "315:3-315:46",
						"type": "Query",
						"source": [
							{
								"localId": "875",
								"locator": "315:3-315:12",
								"alias": "c",
								"expression": {
									"localId": "874",
									"locator": "315:3-315:10",
									"name": "concepts",
									"type": "OperandRef"
								}
							}
						],
						"relationship": [],
						"return": {
							"localId": "917",
							"locator": "315:14-315:46",
							"expression": {
								"localId": "916",
								"locator": "315:21-315:46",
								"name": "CodeableConceptToString",
								"type": "FunctionRef",
								"operand": [
									{
										"localId": "876",
										"locator": "315:45",
										"name": "c",
										"type": "AliasRef"
									}
								]
							}
						}
					},
					"operand": [
						{
							"name": "concepts",
							"operandTypeSpecifier": {
								"localId": "873",
								"locator": "314:51-314:76",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "872",
									"locator": "314:56-314:75",
									"name": "{http://hl7.org/fhir}CodeableConcept",
									"type": "NamedTypeSpecifier"
								}
							}
						}
					]
				},
				{
					"localId": "932",
					"locator": "344:1-345:27",
					"name": "ToCodes",
					"context": "Patient",
					"accessLevel": "Public",
					"type": "FunctionDef",
					"annotation": [
						{
							"type": "Annotation",
							"s": {
								"r": "932",
								"s": [
									{
										"value": [
											"define function ",
											"ToCodes",
											"(",
											"coding",
											" "
										]
									},
									{
										"r": "925",
										"s": [
											{
												"value": [
													"List<"
												]
											},
											{
												"r": "924",
												"s": [
													{
														"value": [
															"FHIR",
															".",
															"Coding"
														]
													}
												]
											},
											{
												"value": [
													">"
												]
											}
										]
									},
									{
										"value": [
											"):\n  "
										]
									},
									{
										"r": "931",
										"s": [
											{
												"r": "931",
												"s": [
													{
														"s": [
															{
																"r": "927",
																"s": [
																	{
																		"r": "926",
																		"s": [
																			{
																				"s": [
																					{
																						"value": [
																							"coding"
																						]
																					}
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			" ",
																			"c"
																		]
																	}
																]
															}
														]
													},
													{
														"value": [
															" "
														]
													},
													{
														"r": "930",
														"s": [
															{
																"value": [
																	"return "
																]
															},
															{
																"r": "929",
																"s": [
																	{
																		"value": [
																			"ToCode",
																			"("
																		]
																	},
																	{
																		"r": "928",
																		"s": [
																			{
																				"value": [
																					"c"
																				]
																			}
																		]
																	},
																	{
																		"value": [
																			")"
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						}
					],
					"expression": {
						"localId": "931",
						"locator": "345:3-345:27",
						"type": "Query",
						"source": [
							{
								"localId": "927",
								"locator": "345:3-345:10",
								"alias": "c",
								"expression": {
									"localId": "926",
									"locator": "345:3-345:8",
									"name": "coding",
									"type": "OperandRef"
								}
							}
						],
						"relationship": [],
						"return": {
							"localId": "930",
							"locator": "345:12-345:27",
							"expression": {
								"localId": "929",
								"locator": "345:19-345:27",
								"name": "ToCode",
								"type": "FunctionRef",
								"operand": [
									{
										"localId": "928",
										"locator": "345:26",
										"name": "c",
										"type": "AliasRef"
									}
								]
							}
						}
					},
					"operand": [
						{
							"name": "coding",
							"operandTypeSpecifier": {
								"localId": "925",
								"locator": "344:32-344:48",
								"type": "ListTypeSpecifier",
								"elementType": {
									"localId": "924",
									"locator": "344:37-344:47",
									"name": "{http://hl7.org/fhir}Coding",
									"type": "NamedTypeSpecifier"
								}
							}
						}
					]
				}
			]
		}
	}
}