{
  "PertinentMedicalHistory": [
    {
      "name": "Conditions Associated with Chronic Pain",
      "dataKey": "ConditionsAssociatedWithChronicPain",
      "dataKeySource": "PertinentMedicalHistory",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Status": "Status",
            "Start": {
              "key": "Onset",
              "formatter": "datishAgeFormat",
              "minWidth": 150
            },
            "End": {
              "key": "Abatement",
              "formatter": "datishAgeFormat",
              "minWidth": 150
            },
            "Recorded": {
              "key": "DateRecorded",
              "formatter": "datishFormat"
            }
          }
        }
      ]
    },
    {
      "name": "Risk Factors for Opioid-related Harms",
      "dataKey": "HighRiskConditionsForOpioidTherapy",
      "dataKeySource": "PertinentMedicalHistory",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Status": "Status",
            "Start": {
              "key": "Onset",
              "formatter": "datishAgeFormat",
              "minWidth": 150
            },
            "End": {
              "key": "Abatement",
              "formatter": "datishAgeFormat",
              "minWidth": 150
            },
            "Recorded": {
              "key": "DateRecorded",
              "formatter": "datishFormat"
            }
          },
          "filter": "!Visit",
          "flags": [
            {
              "flag": "always",
              "flagText": "Factor that may place the patient at risk for an opioid-related harm"
            }
          ]
        },
        {
          "headers": {
            "Name": "Name",
            "Visit": {
              "key": "Visit",
              "formatter": "datishAgeFormat",
              "minWidth": 150
            }
          },
          "filter": "Visit",
          "flags": [
            {
              "flag": "always",
              "flagText": "Factor that may place the patient at risk for an opioid-related harm"
            }
          ]
        }
      ]
    }
  ],
  "PainAssessments": [
    {
      "name": "Numeric Pain Intensity Assessments",
      "dataKey": "NumericPainIntensityAssessments",
      "dataKeySource": "PainAssessments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Score": "Score",
            "Interpretation": "Interpretation",
            "Date": { "key": "Date", "formatter": "datishFormat" }
          }
        }
      ]
    },
    {
      "name": "Pain Enjoyment General Activity (PEG) Assessments",
      "dataKey": "PainEnjoymentGeneralActivityAssessments",
      "dataKeySource": "PainAssessments",
      "info": [
        {
          "url": "https://link.springer.com/article/10.1007/s11606-009-0981-1",
          "title": "Development and Initial Validation of the PEG, a Three-item Scale Assessing Pain Intensity and Interference"
        }
      ],
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Score": "Score",
            "Question": {
              "key": "Questions",
              "formatter": "arrayFlatten",
              "formatterArguments": ["Name"],
              "sortable": false,
              "minWidth": 200
            },
            "Question Score": {
              "key": "Questions",
              "formatter": "arrayFlatten",
              "formatterArguments": ["Score"],
              "sortable": false,
              "minWidth": 150
            },
            "Date": { "key": "Date", "formatter": "datishFormat" }
          }
        }
      ]
    },
    {
      "name": "STarT Back Assessments",
      "dataKey": "STarTBackAssessments",
      "dataKeySource": "PainAssessments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Score": "Score",
            "Interpretation": "Interpretation",
            "Date": { "key": "Date", "formatter": "datishFormat" }
          }
        }
      ]
    }
  ],
  "HistoricalTreatments": [
    {
      "name": "Opioid Medications",
      "dataKey": "OpioidMedications",
      "dataKeySource": "HistoricalTreatments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Type": "Type",
            "Start": { "key": "Start", "formatter": "datishFormat" },
            "End": { "key": "End", "formatter": "datishFormat" }
          },
          "flags": [
            {
              "flag": "always",
              "flagText": "Opioid medication"
            }
          ]
        }
      ]
    },
    {
      "name": "Non-Opioid Medications",
      "dataKey": "NonOpioidMedications",
      "dataKeySource": "HistoricalTreatments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Type": "Type",
            "Start": { "key": "Start", "formatter": "datishFormat" },
            "End": { "key": "End", "formatter": "datishFormat" }
          },
          "flags": [
            {
              "flag": "ifNone",
              "flagText": "Absence of non-opioid medications"
            }
          ]
        }
      ]
    },
    {
      "name": "Non-Pharmacologic Treatments",
      "dataKey": "NonPharmacologicTreatments",
      "dataKeySource": "HistoricalTreatments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Type": "Type",
            "Date": { "key": "Date", "formatter": "datishFormat" }
          },
          "flags": [
            {
              "flag": "ifNone",
              "flagText": "Absence of non-pharmacologic treatments"
            }
          ]
        }
      ]
    },
    {
      "name": "Stool Softeners and Laxatives",
      "dataKey": "StoolSoftenersAndLaxatives",
      "dataKeySource": "HistoricalTreatments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Type": "Type",
            "Start": { "key": "Start", "formatter": "datishFormat" },
            "End": { "key": "End", "formatter": "datishFormat" }
          },
          "flags": [
            {
              "flag": {
                "ifAnd": [
                  "ifNone",
                  {
                    "ifOneOrMore": {
                      "table": "OpioidMedications",
                      "source": "HistoricalTreatments"
                    }
                  }
                ]
              },
              "flagText": "Absence of stool softeners/laxative with presence of at least one opioid medication"
            }
          ]
        }
      ]
    }
  ],
  "RiskFactorsAndAssessments": [
    {
      "name": "Most Recent MME",
      "dataKey": "MostRecentMME",
      "dataKeySource": "RiskFactorsAndAssessments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Result": { "key": "Result", "formatter": "MMEFormat" },
            "Date": { "key": "Date", "formatter": "datishFormat" }
          },
          "flags": [
            {
              "flag": {
                "ifGreaterThanOrEqualTo": {
                  "header": "Result",
                  "value": 50
                }
              },
              "flagText": "Most recent MME assessment is 50+ MME/day"
            }
          ]
        }
      ]
    },
    {
      "name": "Urine Drug Screens",
      "dataKey": "UrineDrugScreens",
      "dataKeySource": "RiskFactorsAndAssessments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Result": "Result",
            "Interpretation": "Interpretation",
            "Date": { "key": "Date", "formatter": "datishFormat" }
          },
          "flags": [
            {
              "flag": {
                "ifAnd": [
                  "ifNone",
                  {
                    "ifOneOrMore": {
                      "table": "OpioidMedications",
                      "source": "HistoricalTreatments"
                    }
                  }
                ]
              },
              "flagText": "Absence of urine drug screen and at least one opioid medication"
            }
          ]
        }
      ]
    },
    {
      "name": "Benzodiazepine Medications",
      "dataKey": "BenzodiazepineMedications",
      "dataKeySource": "RiskFactorsAndAssessments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Type": "Type",
            "Start": { "key": "Start", "formatter": "datishFormat" },
            "End": { "key": "End", "formatter": "datishFormat" }
          },
          "flags": [
            {
              "flag": {
                "ifAnd": [
                  "ifOneOrMore",
                  {
                    "ifOneOrMore": {
                      "table": "OpioidMedications",
                      "source": "HistoricalTreatments"
                    }
                  }
                ]
              },
              "flagText": "Benzodiazepine medication and at least one opioid medication"
            }
          ]
        }
      ]
    },
    {
      "name": "Naloxone Medications",
      "dataKey": "NaloxoneMedications",
      "dataKeySource": "RiskFactorsAndAssessments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Type": "Type",
            "Start": { "key": "Start", "formatter": "datishFormat" },
            "End": { "key": "End", "formatter": "datishFormat" }
          },
          "flags": [
            {
              "flag": {
                "ifAnd": [
                  "ifNone",
                  {
                    "ifGreaterThanOrEqualTo": {
                      "table": "MostRecentMME",
                      "source": "RiskFactorsAndAssessments",
                      "header": "Result",
                      "value": 50
                    }
                  }
                ]
              },
              "flagText": "Absence of Naloxone medication and most recent MME assessment is 50+ MME/day"
            },
            {
              "flag": "ifOneOrMore",
              "flagText": "Evidence of Naloxone medication"
            }
          ]
        }
      ]
    },
    {
      "name": "Pain Management Risk Screenings",
      "dataKey": "PainManagementRiskScreenings",
      "dataKeySource": "RiskFactorsAndAssessments",
      "tables": [
        {
          "headers": {
            "Name": "Name",
            "Score": "Score",
            "Interpretation": "Interpretation",
            "Date": { "key": "Date", "formatter": "datishFormat" }
          }
        }
      ]
    }
  ]
}
